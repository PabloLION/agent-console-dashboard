{"id":"acd-04g","title":"Decide plugin.json vs settings.json hook strategy","description":"plugin.json embeds hooks inline (valid per docs) but becomes irrelevant if install command writes to ~/.claude/settings.json. Decision: keep plugin.json for distribution AND settings.json for personal use? Or drop the plugin approach? See docs/end-to-end-blockers.md B4.","status":"closed","priority":1,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:42.968881+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:45:03.57473+01:00","closed_at":"2026-02-08T18:45:03.57473+01:00","close_reason":"Decision: keep both. plugin.json (build.rs) for future distribution via marketplace. settings.json (acd install) for personal/immediate use. They serve different scopes and don't conflict."}
{"id":"acd-0ll","title":"Discuss logging UX: --debug flag vs ACD_LOG env var","description":"Current logging uses ACD_LOG env var (tracing/EnvFilter). Works but requires: ACD_LOG=debug acd daemon. User considered --debug/-d flags but deferred the decision. Options: (1) keep env var only, (2) add --debug flag that sets ACD_LOG=debug, (3) add --log-level flag. Discuss and decide.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:33.587998+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T10:27:33.587998+01:00"}
{"id":"acd-0uz","title":"TUI: directory should be first column","description":"Directory column is currently after name and status. User wants it as the first column (after status symbol). Column order should be: symbol → directory → session ID → status → elapsed.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:10.557611+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.020316+01:00","closed_at":"2026-02-10T12:40:18.020319+01:00"}
{"id":"acd-16p","title":"TUI right-side truncation: scrollbar hides 2-3 chars in macOS Terminal","description":"TUI right-side truncation caused by highlight marker width not accounted for in column layout. Root cause: highlight_symbol(\"▸ \") adds 2 chars to list items, but format_session_line() calculates content at full terminal width. Result: content (width) + highlight (2) = width+2, rightmost 2 chars overflow. Also: cell content should be left-aligned (status and elapsed are currently right-aligned). Header \"Elapsed\" should be renamed to \"Time Elapsed\". Cell content alignment: all left-aligned, trailing padding. Column alignment: 3 fixed-width columns on right side of table. Update from previous description: Originally thought macOS Terminal.app scrollbar was the cause. User discovered it is the highlight/focus marker pushing content right by 2 chars.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T00:24:40.292858+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.988776+01:00","closed_at":"2026-02-12T05:40:26.988776+01:00","close_reason":"Closed"}
{"id":"acd-1bo","title":"Create agent-console placeholder crate on crates.io","description":"Publish a minimal agent-console crate to crates.io to reserve the name. The real app will be developed in a separate repository. This is just name reservation.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:10.638015+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T00:57:10.638015+01:00"}
{"id":"acd-1ih","title":"Bug: all sessions show same time elapsed (Instant serialization)","description":"All sessions in the TUI show the same elapsed time. Likely cause: Instant (process-local monotonic clock) cannot survive IPC serialization. When the TUI deserializes sessions from the daemon, it reconstructs each with Instant::now(), making all sessions appear to start simultaneously. The daemon knows the real timestamps but they get lost over the wire. Fix: serialize elapsed duration or a relative timestamp instead of Instant.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:25.542703+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:43:05.343127+01:00","closed_at":"2026-02-10T12:43:05.343127+01:00","close_reason":"TUI now parses elapsed_seconds from daemon and backdates Instant for correct per-session timing"}
{"id":"acd-20j","title":"Copy button/emoji for session info in TUI","description":"Add a copy indicator (emoji or icon) in the TUI row. When user clicks it, copy session info to clipboard. Exact UX TBD.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:32.166207+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:19:32.166207+01:00"}
{"id":"acd-211","title":"Implement TUI TestBackend tests (TDD)","description":"Write 46 TUI tests using ratatui TestBackend per docs/uncategorized/tui-test-plan.md. Shared helpers in src/tui/test_utils.rs. Work in feat/tui-tests worktree. Resumable agents: ae91266 (test expert), abbc188 (UI expert).","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:23.249815+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T21:41:51.574345+01:00","closed_at":"2026-02-11T21:41:51.574345+01:00","close_reason":"Closed"}
{"id":"acd-2co","title":"Implement auto-stop idle timer (60min constant)","description":"Add AUTO_STOP_IDLE_SECS = 3600 constant to daemon. Daemon should auto-stop when no sessions are active for 60 minutes. Logic lives in the main event loop (reset on any session activity, shut down when timer fires). Split from acd-ojb which bundled this with actor model refactor. Configurability deferred to acd-jnd (P4).","status":"closed","priority":1,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T09:00:05.314162+01:00","created_by":"Pablo LION","updated_at":"2026-02-06T22:13:38.632781+01:00","closed_at":"2026-02-06T22:13:38.632781+01:00","close_reason":"Implemented: idle auto-stop timer with AUTO_STOP_IDLE_SECS=3600 constant, merged to master"}
{"id":"acd-2n6","title":"Add missing hook events: SessionEnd, Notification","description":"Only 3 of 14 hook events are registered. Missing critical events: SessionEnd → closed (sessions never close), Notification/elicitation_dialog → question (AskUserQuestion), Notification/permission_prompt → attention. Must also verify Status enum accepts 'closed' and 'question' via claude-hook subcommand. See docs/end-to-end-blockers.md B3.","status":"closed","priority":1,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:40.98283+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.261217+01:00","closed_at":"2026-02-08T18:51:55.261217+01:00","close_reason":"Closed"}
{"id":"acd-2ou","title":"No highlight when no session selected; click header to deselect","description":"No highlight when no session selected. Clicking table header should clear selection. Research: check if ratatui List widget supports selected=None. Workaround if not: add an invisible/guide row at top (e.g. 'Use arrow keys to select') that acts as the deselected state. When selection is None, select the guide row which shows usage hints.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:30.506343+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.874203+01:00","closed_at":"2026-02-12T00:13:22.874203+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-2rk","title":"Add debug mode with column ruler for TUI border visualization","description":"When AGENT_CONSOLE_DASHBOARD_DEBUG=1 is set, show a ruler line in the TUI that counts columns from the right edge: 9 8 7 6 5 4 3 2 1 0 (where 0 is the rightmost character). Purpose: diagnose terminal clipping issues like scrollbar overlap. Lower priority since highlight marker width was identified as the real truncation cause.","status":"closed","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:18.385975+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.01871+01:00","closed_at":"2026-02-12T05:40:27.01871+01:00","close_reason":"Closed"}
{"id":"acd-2zh","title":"Add SessionStore::has_active_sessions() to avoid clone-all in idle check","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T21:40:34.8905+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:29:13.424576+01:00","closed_at":"2026-02-08T01:29:13.424576+01:00","close_reason":"Added has_active_sessions(), updated idle_check_loop to use it"}
{"id":"acd-35c","title":"Create root README.md","description":"No documentation for new users. Create README.md with: overview, installation, setup (acd install), usage (acd tui), CLI reference. See docs/end-to-end-blockers.md B5.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:44.473255+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:49.735561+01:00","closed_at":"2026-02-08T22:57:49.735561+01:00","close_reason":"README.md written by tech-writer agent. Covers quick start, commands, architecture, development, project structure."}
{"id":"acd-36h","title":"Protect main branch and require PRs for CI","description":"Stop running CI on every push to main. Protect main branch so even administrators cannot push directly — all changes must go through PRs. This prevents unnecessary CI runs and enforces review workflow. Steps: 1) Add branch protection rules on GitHub (require PR, no direct push, include administrators), 2) Update CI workflow to only run on pull_request events (not push to main), 3) Optionally keep push-triggered CI for other branches.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:52:26.352701+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:09.254811+01:00","closed_at":"2026-02-08T22:57:09.254811+01:00","close_reason":"Branch protection configured: required CI checks (5 jobs), required PRs (0 approvals), enforce_admins=false for owner bypass, no force pushes or deletions."}
{"id":"acd-3cv","title":"Add mouse/cursor interaction to TUI","description":"Investigate and implement mouse interaction in the TUI — text selection, click to select session, scroll, etc. Ratatui supports mouse events (MouseEvent, crossterm mouse capture). Scope TBD during implementation.","status":"closed","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:36.185033+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:55:01.283038+01:00","closed_at":"2026-02-10T11:55:01.283038+01:00","close_reason":"Implemented: click/double-click/scroll. Redesign needed: acd-bbh (left click shows details below, not popup) + acd-79b (double-click fires configurable hook from config)","dependencies":[{"issue_id":"acd-3cv","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-08T22:43:24.124236+01:00","created_by":"Pablo LION"}]}
{"id":"acd-3kr","title":"Rename auto-start to lazy-start in codebase","description":"Rename all auto_start/auto-start references to lazy_start/lazy-start for consistency with the new design. Includes: connect_with_auto_start() -\u003e connect_with_lazy_start(), comments, module docs, error messages. Related to acd-tz3 (wire lazy-start into hook handler).","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T15:22:41.598744+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T15:26:49.679397+01:00","closed_at":"2026-02-08T15:26:49.679397+01:00","close_reason":"renamed all auto-start references to lazy-start across 4 files"}
{"id":"acd-3zc","title":"Research ratatui ListState selected=None and header click detection","description":"Initial findings: ratatui ListState supports select(None) — no highlight when nothing selected. Remaining question: how to detect mouse clicks on the header area to clear selection? Need to check mouse event handling in app.rs and determine header y-coordinate. Informs acd-2ou implementation.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:01:44.168567+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T03:07:17.618441+01:00","closed_at":"2026-02-12T03:07:17.618441+01:00","close_reason":"Research completed in previous session: confirmed ListState.select(None) works, header click detection via calculate_clicked_session() returning None. acd-2ou already implemented."}
{"id":"acd-4g0","title":"E2E integration test with real Claude Code","description":"## Problem\n\nNo automated or documented end-to-end test verifying the full ACD flow with a real\nClaude Code instance. A manual smoke test passed (2026-02-08) but the procedure is\nnot documented and not repeatable by others.\n\n## What Was Tested Manually\n\n1. cargo install → acd in PATH\n2. acd install → hooks written to ~/.claude/settings.json\n3. Start Claude Code session → hooks fire\n4. Daemon lazy-starts from hook\n5. Sessions tracked in daemon (verified via acd dump)\n6. acd tui shows live session\n7. acd uninstall → hooks removed\n\n## What Needs Documentation/Automation\n\n### Test Plan Document\n\nWrite a reproducible test plan covering:\n\n- Prerequisites (Claude Code installed, cargo, Rust toolchain)\n- Step-by-step procedure with expected outputs\n- Verification commands at each step\n- Known issues (e.g., env__fetch_usage_raw panics without CLAUDE_CODE_OAUTH_TOKEN)\n\n### Automated Smoke Test (stretch goal)\n\nA script that automates what can be automated:\n- cargo install\n- acd install → verify hooks in settings.json\n- acd daemon → start daemon\n- Simulate hook calls (echo JSON | acd claude-hook attention)\n- acd dump → verify session exists\n- acd uninstall → verify hooks removed\n\nThe Claude Code interaction itself cannot be automated (requires human session).\n\n## Acceptance Criteria\n\n- Documented test plan in docs/testing/ or similar\n- At least the non-interactive parts scriptable\n- CI could optionally run the automated portion","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-09T07:41:05.694293+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T11:05:31.395659+01:00","closed_at":"2026-02-11T11:05:31.395659+01:00","close_reason":"E2E test plan + automated smoke script. All tests pass."}
{"id":"acd-4mk","title":"Display version string in TUI corner","description":"Show version in TUI, format: v0.1.2 (no trailing spaces needed). Use env!(\"CARGO_PKG_VERSION\") for compile-time version. Placement: bottom-right corner of Sessions block or status bar area. Bump version to 0.1.2 in Cargo.toml.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:09.775965+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.999974+01:00","closed_at":"2026-02-12T05:40:26.999974+01:00","close_reason":"Closed"}
{"id":"acd-4sd","title":"Resolve cargo audit warnings from ratatui dependencies","description":"CI cargo audit reports 2 warnings, both from ratatui 0.29.0 transitive dependencies:\n\n## Advisories\n\n### RUSTSEC-2024-0436: paste (unmaintained)\n- Crate: paste v1.0.15\n- Severity: unmaintained (no longer maintained)\n- Chain: paste 1.0.15 ← ratatui 0.29.0 ← agent-console-dashboard\n\n### RUSTSEC-2026-0002: lru (unsound)\n- Crate: lru v0.12.5\n- Title: IterMut violates Stacked Borrows by invalidating internal pointer\n- Severity: unsound (memory safety issue)\n- Chain: lru 0.12.5 ← ratatui 0.29.0 ← agent-console-dashboard\n\n## Resolution paths\n\n1. **Upgrade ratatui to 0.30.0** — check if the new version bumps paste/lru to fixed versions\n2. **Cargo patch** — override transitive deps in Cargo.toml if ratatui 0.30.0 doesn't fix it\n3. **Upstream PR** — contribute fix to ratatui if they haven't addressed it\n4. **Allowlist** — last resort: add to audit deny.toml with justification (currently these are allowed warnings in CI)\n\n## Current CI behavior\nAudit job passes because these are warnings, not errors. But unsound memory in lru is a real concern.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T01:03:27.93995+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T22:26:46.324443+01:00","closed_at":"2026-02-10T22:26:46.324443+01:00","close_reason":"All security vulns already patched. Two INFO/unsoundness warnings (paste 1.0.15 unmaintained, lru 0.12.5 unsound) are transitive deps from ratatui 0.29 — requires ratatui 0.30 upgrade (breaking API). Not actionable without major version bump."}
{"id":"acd-4sq","title":"Detail panel shows 'unknown' for missing directory — should show 'error'","description":"Dashboard view correctly maps unknown → \u003cerror\u003e (line 120 in dashboard.rs). But the detail panel (detail.rs) may have a separate code path that still shows 'unknown' instead of '\u003cerror\u003e'. Need to check detail view rendering for consistency.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:30.737152+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.75447+01:00","closed_at":"2026-02-11T20:48:57.75447+01:00","close_reason":"Closed"}
{"id":"acd-50g","title":"Visually separate claude-hooks library output from ACD output in install/uninstall","description":"When 'acd install' runs, it calls the claude-hooks library which produces its own output. This output is mixed with ACD's own messages, making it unclear what comes from where. Options: (1) add delimiters/section headers, (2) indent the library output, (3) prefix lines. Decide which approach and implement.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T00:24:46.135979+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:24:46.135979+01:00"}
{"id":"acd-515","title":"Fix claude-hooks to use correct Claude Code hooks format","description":"The claude-hooks library uses wrong format. Expected object-based format with event keys: { \"hooks\": { \"Stop\": [{ \"hooks\": [...] }] } } but library uses array format { \"hooks\": [...] }. Need to update settings.rs and related code to handle actual Claude Code schema.","status":"closed","priority":1,"issue_type":"bug","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T21:33:36.775096+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T21:47:17.269398+01:00","closed_at":"2026-02-04T21:47:17.269398+01:00","close_reason":"Fixed claude-hooks library to use correct Claude Code hooks format (object-based instead of array-based). Updated all test files including edge_cases.rs, performance.rs, and atomic_safety.rs."}
{"id":"acd-51l","title":"Consider actor model refactor for daemon (deferred)","description":"Amendment 2 in decision-amendments.md proposed replacing tokio::spawn-per-connection + Arc\u003cRwLock\u003cHashMap\u003e\u003e with single-threaded actor model + plain HashMap. After analysis, decided to defer: Rust type system already prevents data races, TOCTOU risk is marginal at \u003c50 connections, and the refactor touches ~1600 lines across server.rs/store.rs/usage.rs. Revisit if: (1) actual concurrency bugs appear, (2) connection count grows significantly, or (3) lock contention shows up in profiling. See discussion in devlog.","status":"open","priority":4,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:31:09.025911+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T07:31:09.025911+01:00"}
{"id":"acd-52a","title":"Restructure daemon CLI: acd daemon start/stop subcommands","description":"Restructure daemon CLI from flat commands to subcommands: 'acd daemon start [--detach/-d]' and 'acd daemon stop [--force/-f]'. Bare 'acd daemon' with no subcommand shows help text. Update lazy-start logic to call 'acd daemon start' instead of 'acd daemon'. Remove old DaemonStop command. Update tests and hook system. Separate P4 issues exist for daemon log viewing and foreground mode.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:22.2565+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:11:29.342323+01:00","closed_at":"2026-02-12T00:11:29.342323+01:00","close_reason":"Closed"}
{"id":"acd-5dh","title":"Remove service install/launchd/systemd — lazy-start daemon","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T14:55:34.382147+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T15:17:23.612203+01:00","closed_at":"2026-02-08T15:17:23.612203+01:00","close_reason":"removed service.rs, plist, systemd unit, CLI subcommand, and tests"}
{"id":"acd-5i2","title":"Status stuck on 'attention' after user answers — investigate hook gap","description":"Status stuck on 'attention' after user answers permission prompt or AskUserQuestion. Root cause: no hook fires between user answering and Claude resuming work. Fix: add PreToolUse→working and PostToolUse→working hooks to acd_hook_definitions(). Also bump version (patch) so 'acd install' picks up the new hooks. Research needed: exact ordering of PreToolUse/PostToolUse vs Notification(permission_prompt) — create separate research issue.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:36.55015+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:11:15.63689+01:00","closed_at":"2026-02-12T00:11:15.63689+01:00","close_reason":"Closed"}
{"id":"acd-5xz","title":"Add validation layer for Claude Code hook stdin input","description":"Add validation layer for Claude Code hook stdin input (HookInput struct). Validate: session_id is UUID v4 format, cwd is non-empty absolute path. On invalid input: warn on stderr but still process the hook — don't block Claude Code. This is defense-in-depth, not a hard gate.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T23:02:16.580558+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.851284+01:00","closed_at":"2026-02-12T00:13:22.851284+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-63c","title":"Update E002 session code: verify session_id from JSON stdin","description":"Verify session management code uses session_id from JSON stdin (not basename PWD). Check any hook script examples or test fixtures that use the old pattern. Scope: crates/agent-console-dashboard/src/ session-related code. See docs/architecture/2026-01-31-decision-amendments.md and Q16.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.214276+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T21:37:30.87694+01:00","closed_at":"2026-02-05T21:37:30.87694+01:00","close_reason":"Verified: all hook scripts parse session_id from JSON stdin. Fixed stale $SESSION_ID $ARGS placeholders in daemon/mod.rs command templates. No code uses basename PWD."}
{"id":"acd-6dr","title":"Refactor Session.working_dir to Option\u003cPathBuf\u003e + fix disambiguation parent collision","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T19:04:57.072817+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.745546+01:00","closed_at":"2026-02-11T20:48:57.745546+01:00","close_reason":"Closed"}
{"id":"acd-6gh","title":"Move project-level rules from CLAUDE.md to AGENTS.md","description":"Some project-level rules currently live in CLAUDE.md or .claude/rules/ that should be in AGENTS.md instead. AGENTS.md is the right place for agent-specific instructions in shared codebases — it won't confuse human contributors. Audit current rules and migrate project-specific agent instructions to AGENTS.md. Also add a brief doc format section (3-5 lines) pointing to docs/index.md so agents know where documentation lives.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T18:35:03.747535+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.014758+01:00","closed_at":"2026-02-12T05:40:27.014758+01:00","close_reason":"Closed"}
{"id":"acd-6hr","title":"Wire usage_fetch_interval config to daemon timer","description":"The config field usage_fetch_interval exists but is NOT connected to the daemon's tokio::interval timer. Wire it so the daemon reads the config value and uses it for the fetch interval instead of the hardcoded 180s.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T01:00:39.828541+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:41:26.07221+01:00","closed_at":"2026-02-10T12:41:26.07221+01:00","close_reason":"Wired usage_fetch_interval from TOML config to daemon via humantime crate"}
{"id":"acd-6o2","title":"Limit TUI to 1 frame per second","description":"TUI currently updates too frequently, consuming unnecessary system resources. Limit rendering to 1 fps max. Only redraw when: (a) a daemon event arrives, or (b) 1 second has elapsed since last frame (for elapsed time updates). This reduces CPU usage while keeping the display responsive enough for a status dashboard.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T22:51:57.997451+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T22:51:57.997451+01:00"}
{"id":"acd-71n","title":"Verify acd binary is in PATH during install","description":"Hook commands use bare 'acd' — if not in PATH, hooks fail silently. The install command should check that 'acd' resolves in PATH and suggest 'cargo install --path crates/agent-console-dashboard' if not found. See docs/end-to-end-blockers.md B2.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:39.104008+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.263899+01:00","closed_at":"2026-02-08T18:51:55.263899+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-71n","depends_on_id":"acd-qe8","type":"blocks","created_at":"2026-02-08T18:24:50.087355+01:00","created_by":"Pablo LION"}]}
{"id":"acd-79b","title":"Double-click fires configurable hook from config file","description":"Double-click on a session should fire a user-configurable hook (defined in the TOML config file). ACD does NOT handle the action itself — it's modular. The hook receives the session context and the external tool (Zellij tab switch, tmux pane, VS Code, etc.) handles the action. This keeps ACD environment-agnostic. Config example: [hooks.double_click] command = 'zellij action go-to-tab-name \"{session_id}\"'","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:41.428302+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T23:37:36.917389+01:00"}
{"id":"acd-7dl","title":"TUI: column header says 'Name' but shows session ID","description":"The column header says 'Name' but the data shown is session.id (the session ID). Header should say 'Session ID' to match the actual data.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:11.954475+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.121286+01:00","closed_at":"2026-02-10T12:40:18.121288+01:00"}
{"id":"acd-7fm","title":"Research hook event ordering: PreToolUse/PostToolUse vs Notification(permission_prompt)","description":"Investigate the exact ordering of Claude Code hook events during tool use with permission prompts. Questions: (1) Does PreToolUse fire before or after Notification(permission_prompt)? (2) Does PostToolUse fire after the user grants permission, or after the tool completes? (3) Are there other events we should hook into? This research informs acd-5i2 (attention stuck fix).","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-11T23:37:38.369419+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T23:37:38.369419+01:00","dependencies":[{"issue_id":"acd-7fm","depends_on_id":"acd-ws6","type":"blocks","created_at":"2026-02-12T03:05:23.60938+01:00","created_by":"Pablo LION"}]}
{"id":"acd-7pa","title":"Add cargo audit to CI workflow","description":"Add a cargo audit step to .github/workflows/ci.yml. Checks dependencies for known security vulnerabilities (CVE database). Should run as a separate job alongside test/lint/docs.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:08.713403+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:14:12.42123+01:00","closed_at":"2026-02-08T01:14:12.42123+01:00","close_reason":"Closed"}
{"id":"acd-7u2","title":"Multiplexer integration (Zellij layouts and launcher)","description":"Integrate ACD dashboard as a top pane in Zellij terminal multiplexer layouts. Three layout presets: minimal (2-row), default (3-row), detailed (5-row). Includes launcher script, KDL layout files, and installation to ~/.config/zellij/layouts/. Scope note: this is about the broader 'agent console' concept — the dashboard as one component in a multiplexer workspace with work panes below. See design/integrations.md for the multiplexer integration philosophy.\n\n---\n\n## Original Spec (from docs/guides/zellij.md)\n\n### Prerequisites\n\n- **Zellij installed** (version 0.39.0+ recommended)\n  - Installation guide: https://zellij.dev/documentation/installation\n- **agent-console binary in PATH**\n  - Build: cargo build --release\n  - Install: cargo install --path .\n\n### Quick Start\n\nUse the provided launcher script to start Zellij with the dashboard:\n\n```sh\n# Default layout (2-line dashboard + vertical split)\n./scripts/zellij/zellij-claude.sh\n\n# Minimal layout (1-line dashboard)\n./scripts/zellij/zellij-claude.sh minimal\n\n# Detailed layout (multi-line dashboard)\n./scripts/zellij/zellij-claude.sh detailed\n```\n\nThe script automatically:\n- Checks for Zellij installation\n- Validates Zellij version (warns if \u003c 0.39.0)\n- Prevents nested sessions\n- Launches the appropriate layout\n\n### Layout Descriptions\n\nThree pre-configured layouts are available:\n\n| Layout | Pane Height | Content | Use Case |\n|--------|------------|---------|----------|\n| minimal | 2 rows | Session names + status | Maximum screen space for work |\n| default | 3 rows | Status + working directory | Balanced monitoring and space |\n| detailed | 5 rows | Full session details | Deep session inspection |\n\n#### Minimal Layout\n\n```kdl\nlayout {\n    pane size=2 {\n        command \"agent-console\"\n        args \"tui\" \"--layout\" \"one-line\"\n    }\n    pane\n}\n```\n\n#### Default Layout\n\n```kdl\nlayout {\n    pane size=3 {\n        command \"agent-console\"\n        args \"tui\" \"--layout\" \"two-line\"\n    }\n    pane split_direction=\"vertical\" {\n        pane\n        pane\n    }\n}\n```\n\n#### Detailed Layout\n\n```kdl\nlayout {\n    pane size=5 {\n        command \"agent-console\"\n        args \"tui\"\n    }\n    pane\n}\n```\n\n### Installation to Zellij Config\n\n```sh\nmkdir -p ~/.config/zellij/layouts\ncp scripts/zellij/layouts/claude-*.kdl ~/.config/zellij/layouts/\nzellij --layout claude-default\n```\n\n### Usage Patterns\n\n#### Launching from Outside Zellij\n\n```sh\n./scripts/zellij/zellij-claude.sh default\nzellij --layout claude-default\n```\n\n#### Adding Dashboard to Existing Session\n\n```sh\nzellij action new-pane --command agent-console tui\n```\n\n### Daemon Auto-Start\n\nThe dashboard automatically triggers daemon auto-start when launched. No manual daemon management is required.\n\n### Troubleshooting\n\n- Zellij not installed → brew install zellij / cargo install zellij\n- Nested session warning → exit current session or use zellij action new-pane\n- Version compatibility → update to 0.39.0+\n- Layout file not found → run from project root\n- agent-console not found → cargo install --path .\n- No data shown → check daemon status, ensure active sessions exist\n\n### Customization\n\nCustom layouts: copy existing KDL, modify pane size and args. Save to ~/.config/zellij/layouts/custom.kdl.\n\nDashboard placement: reverse pane order in KDL to place at bottom instead of top.\n\n### Platform Support\n\nTested on macOS (Sonoma 14.x+) and Linux (Ubuntu 22.04+, Arch, Fedora). Windows via WSL.\n\n### References\n\n- Zellij docs: https://zellij.dev/documentation/\n- KDL layout syntax: https://zellij.dev/documentation/creating-a-layout.html","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-09T20:55:09.141463+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T21:07:28.050868+01:00"}
{"id":"acd-7xz","title":"Session ID ellipsis truncation for small window sizes","description":"When terminal window is too small to show full UUID (36 chars), truncate session_id with ellipsis. Design TBD — user is still thinking about the exact behavior. Defer until user provides spec.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:26.560083+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:19:26.560083+01:00"}
{"id":"acd-80s","title":"Add integration tests for claude-hook subcommand","description":"Automate the manual integration tests for `acd claude-hook`. These test the compiled binary with real stdin/stdout (no daemon running). Cases to cover:\n1. Valid JSON with session_id → exit 0, stdout contains {\"continue\": true} with systemMessage (daemon not running)\n2. Malformed JSON → exit 2, stderr contains error message\n3. Valid JSON missing session_id field → exit 2\n4. Valid JSON with extra unknown fields → exit 0 (forward-compatible)\n\nUse cargo integration test pattern (`tests/` directory) with `assert_cmd` or `std::process::Command` to invoke the built binary. See existing test patterns in the crate.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:39:13.597761+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T21:52:35.27479+01:00","closed_at":"2026-02-07T21:52:35.27479+01:00","close_reason":"Integration tests added and bugs fixed in PR #2"}
{"id":"acd-8uw","title":"Add column headers to TUI session list","description":"The session list table has no header row. Add visible column headers so users can tell what each column represents (session name, status, working directory, elapsed time). Headers should follow the same responsive breakpoints as the data rows.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:27.180486+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:54:52.132422+01:00","closed_at":"2026-02-10T11:54:52.132422+01:00","close_reason":"Implemented: column headers added. Superseded by acd-7dl (header says 'Name' but should say 'Session ID')","dependencies":[{"issue_id":"acd-8uw","depends_on_id":"acd-r57","type":"blocks","created_at":"2026-02-08T22:43:23.764807+01:00","created_by":"Pablo LION"}]}
{"id":"acd-8vx","title":"Validate hook cwd path exists on filesystem","description":"Currently cwd from hook stdin is accepted as-is. Should we validate the path exists? Pros: catches stale/wrong paths. Cons: path may not exist on daemon host (remote scenarios), adds I/O. Separate from format validation (acd-5xz validates absolute path format only).","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:01:42.135576+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:01:42.135576+01:00"}
{"id":"acd-8yv","title":"Rename cargo package agent-console to agent-console-dashboard","description":"Package name 'agent-console' doesn't match repo name 'agent-console-dashboard' or directory 'crates/agent-console-dashboard/'. Rename package to 'agent-console-dashboard', update lib name to 'agent_console_dashboard', and update all imports. Binary stays 'acd'.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T21:30:50.820146+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T14:38:29.285285+01:00","closed_at":"2026-02-08T14:38:29.285285+01:00","close_reason":"Package renamed to agent-console-dashboard across Cargo.toml, lib name, all imports, runtime paths, service identifiers, and plist file"}
{"id":"acd-9pq","title":"Verify hook scripts exist at referenced paths","description":"Daemon references /path/to/hooks/*.sh but scripts may not exist. Check if E006 (S006) created these scripts and update paths if needed.","status":"closed","priority":2,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:49.579311+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T15:26:40.576029+01:00","closed_at":"2026-02-07T15:26:40.576029+01:00","close_reason":"Obsolete: shell hook scripts deleted, replaced by plugin system (acd-a81)"}
{"id":"acd-9ul","title":"Directory column: show basename with disambiguation","description":"Display last path component (basename) instead of truncated full path. When multiple sessions share same basename, include parent folder to disambiguate. Per docs/design/ui.md:172.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:25.413908+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.75185+01:00","closed_at":"2026-02-11T20:48:57.75185+01:00","close_reason":"Closed"}
{"id":"acd-9zb","title":"Drift: README should document 'acd install' for setup, not 'acd daemon start'","description":"The daemon lazy-starts via hooks, so 'acd daemon start' is unnecessary and misleading as setup guidance. The README (when written) should tell users to run 'acd install' to set up hooks. 'acd daemon start' should not appear in getting-started instructions.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:44.427262+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.012555+01:00","closed_at":"2026-02-12T05:40:27.012555+01:00","close_reason":"Closed"}
{"id":"acd-a44","title":"closed flag is a one-way latch — no reverse path on re-activation","description":"set_status(Closed) sets closed=true, but set_status(Working) does not reset it to false. A re-activated session has status=Working but closed=true, causing incorrect active/closed counts in STATUS and DUMP commands. Needs decision: either clear closed on non-Closed transitions, or prevent re-activation of closed sessions.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.278012+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:27:01.97654+01:00","closed_at":"2026-02-08T01:27:01.97654+01:00","close_reason":"Fixed: self.closed now derived from new_status on every transition"}
{"id":"acd-a81","title":"Migrate ACD to Claude Code plugin system","description":"Replace manual hook management (daemon/hooks.rs + claude-hooks crate) with the official Claude Code plugin system. ACD would ship as a plugin with hooks declared in hooks/hooks.json. Claude Code handles install/update/uninstall lifecycle. This eliminates daemon/hooks.rs (610 lines), the registry system, and the claude-hooks dependency from ACD. The claude-hooks crate can be archived or kept for types only. See discussion in acd-in9 merge session.","status":"closed","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T02:59:53.346537+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T19:42:11.008566+01:00","closed_at":"2026-02-07T19:42:11.008566+01:00","close_reason":"Migrated to Claude Code plugin system: build.rs generates plugin manifest, claude-hook subcommand replaces shell scripts, removed daemon/hooks.rs (610 lines) and claude-hooks dependency"}
{"id":"acd-a8k","title":"Handle stale sessions from crashed clients (session TTL or heartbeat)","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T21:40:34.991201+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T02:42:04.252317+01:00","closed_at":"2026-02-08T02:42:04.252317+01:00","close_reason":"Inactive session detection with visual treatment (dimmed DarkGray + ◌ symbol). No auto-close — sessions stay in active list, distinct from closed. has_active_sessions excludes inactive to fix daemon idle timeout."}
{"id":"acd-ake","title":"Same-status transitions should reset elapsed timer","description":"Session.set_status() at lib.rs:204 returns early when new_status == current status, only updating last_activity. This means if we receive attention→attention (different event, same status), the elapsed timer keeps counting from the original transition. Fix: reset self.since = now even when status is unchanged, so elapsed reflects the latest event. Don't record a history transition for same-status, just reset the timer.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:39.905508+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.828803+01:00","closed_at":"2026-02-12T00:13:22.828803+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-awp","title":"Fix build.rs drift: missing PreToolUse and PostToolUse hooks in plugin.json","description":"build.rs generates .claude-plugin/plugin.json with a hardcoded hook list that is missing PreToolUse and PostToolUse hooks. These were added to acd_hook_definitions() in main.rs (v0.1.1) but never mirrored in build.rs. Result: plugin system hooks are incomplete while acd install settings are correct. Fix: add PreToolUse and PostToolUse hooks to build.rs hook definitions (lines 38-109). Consider DRY: share hook definitions between build.rs and main.rs to prevent future drift.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T03:54:22.178606+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.006034+01:00","closed_at":"2026-02-12T05:40:27.006034+01:00","close_reason":"Closed"}
{"id":"acd-b0p","title":"Show seconds in all time displays including hours format","description":"Three time formatting functions drop seconds when duration \u003e= 1 hour. DRY fix: extract a single shared format_duration function (e.g., in a helpers/shared module) used by all three call sites. Do NOT fix at three places separately. Functions to consolidate: (1) format_elapsed (dashboard.rs:44) — session list column, (2) format_duration (detail.rs:277) — detail panel status line, (3) format_transition_time (detail.rs:291) — detail panel history entries. All should show XhYmZs when hours\u003e0. Extract to shared location, then import everywhere. This enables future user customization of time format.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T03:34:39.209799+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.995169+01:00","closed_at":"2026-02-12T05:40:26.995169+01:00","close_reason":"Closed"}
{"id":"acd-bbh","title":"TUI: left click shows details below session list, not popup","description":"Current implementation opens a modal overlay on double-click. Redesign: left click selects a session and shows its details in a section BELOW the session list within the default dashboard view. No popup/modal. The detail section is part of the dashboard layout.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:38.594756+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T23:37:37.03047+01:00"}
{"id":"acd-bc7","title":"Daemon log viewing and foreground mode for detached daemon","description":"When a daemon is running detached (acd daemon start --detach), provide ways to: (1) view daemon logs/output, (2) bring it to foreground. Exact UX TBD. Low priority — not needed for prototype.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T23:37:40.797514+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T23:37:40.797514+01:00"}
{"id":"acd-bcg","title":"Create user documentation folder with environment variable reference","description":"Create docs/user/ folder for user-facing documentation (separate from dev docs in docs/). First document: environment-variables.md listing all env vars (AGENT_CONSOLE_DASHBOARD_LOG, AGENT_CONSOLE_DASHBOARD_DEBUG, XDG_CONFIG_HOME, XDG_RUNTIME_DIR). README can reference this folder.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:15.313066+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.010535+01:00","closed_at":"2026-02-12T05:40:27.010535+01:00","close_reason":"Closed"}
{"id":"acd-bho","title":"Restructure docs folder: detect auto-generated files and separate user/dev docs","description":"Investigate which docs are auto-generated vs hand-written. Approach: create git worktree branch, delete suspected auto-generated docs, regenerate, let git diff show which came back. Then restructure: either docs/user/ + docs/dev/ (option 3) or keep current + docs/user/ (option 2). Cross-references to update: AGENTS.md (@docs/terminology.md), markdown-lint-config-justification.md (glob patterns), lib.rs:517 (docs/decisions/variable-naming.md). Low priority — current structure works.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:54:27.007037+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T03:54:27.007037+01:00"}
{"id":"acd-boy","title":"Fix pre-commit hook infinite recursion: remove global hook chaining","description":"The local pre-commit hook (.git/hooks/pre-commit, sourced from scripts/pre-commit.sh) has a 'Chain to global hooks' section that reads core.hooksPath and calls the global hook. This causes infinite recursion because the global hook already chains back to the local hook. Fix: remove lines 11-19 (the GLOBAL_HOOKS_DIR block) from scripts/pre-commit.sh. The global hook runs first via core.hooksPath, then chains to local. Local should NOT call global back.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T00:07:30.302779+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.898275+01:00","closed_at":"2026-02-12T00:13:22.898275+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-bw4","title":"Auto-install git hooks via build.rs","description":"Add hook installation logic to build.rs. On cargo build, create symlinks from .git/hooks/{pre-commit,pre-push} to scripts/{pre-commit,pre-push}.sh. Skip if NO_INSTALL_HOOKS=1. Warn but don't overwrite foreign hooks.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:04.591027+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:00:24.320277+01:00","closed_at":"2026-02-08T01:00:24.320277+01:00","close_reason":"Closed"}
{"id":"acd-bwa","title":"Wire TUI resurrect keybinding to daemon RESURRECT IPC command","description":"TUI app.rs:249 has a TODO: pressing 'r' on a closed session produces Action::Resurrect but doesn't send the RESURRECT IPC command to the daemon. The daemon handler (handle_resurrect_command) and CLI command (acd resurrect) already work — just the TUI wiring is missing.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T02:07:46.445223+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T02:07:50.947719+01:00","dependencies":[{"issue_id":"acd-bwa","depends_on_id":"acd-hex","type":"blocks","created_at":"2026-02-08T22:43:24.00937+01:00","created_by":"Pablo LION"}]}
{"id":"acd-csg","title":"TUI: column labels should be left-aligned","description":"Column headers (Status, Directory, Elapsed) are right-aligned ({:\u003e10}, {:\u003e20}, {:\u003e8}). They should be left-aligned for a table layout.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:17.374221+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.432225+01:00","closed_at":"2026-02-10T12:40:18.432228+01:00"}
{"id":"acd-cx9","title":"TUI Polish","description":"Epic for TUI improvements: error display, layout fixes, column headers, compact dashboard, resurrect keybinding, mouse interaction. Sequential chain — all touch views/dashboard.rs.","status":"open","priority":2,"issue_type":"epic","owner":"dev@pablolion.com","created_at":"2026-02-08T22:43:19.755438+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:43:19.755438+01:00","dependencies":[{"issue_id":"acd-cx9","depends_on_id":"acd-lht","type":"blocks","created_at":"2026-02-08T22:43:29.053037+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-r57","type":"blocks","created_at":"2026-02-08T22:43:29.166598+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-8uw","type":"blocks","created_at":"2026-02-08T22:43:29.283283+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-hex","type":"blocks","created_at":"2026-02-08T22:43:29.401028+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-08T22:43:29.511344+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-3cv","type":"blocks","created_at":"2026-02-08T22:43:29.622039+01:00","created_by":"Pablo LION"}]}
{"id":"acd-czj","title":"TUI: time elapsed column too thin (8 chars)","description":"Elapsed column is 8 chars wide ({:\u003e8}). Gets squeezed and unreadable. Need more width. Also the elapsed values are incorrect — see related issue for the Instant serialization bug.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:16.035995+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.325433+01:00","closed_at":"2026-02-10T12:40:18.325435+01:00"}
{"id":"acd-dyb","title":"Add daemon stop command","description":"No way to stop the daemon. CLI has daemon/tui/status/dump/config/claude-hook/install/uninstall/resurrect but no stop. User needs to stop/restart the daemon. Lazy start handles startup, but there's no way to shut down a running daemon short of killing the process.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:21.960625+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T01:58:41.277322+01:00","closed_at":"2026-02-11T01:58:41.277322+01:00","close_reason":"STOP IPC command + acd daemon-stop CLI + graceful shutdown. Committed 83ba356."}
{"id":"acd-edx","title":"Implement floor rounding for usage time display","description":"Round down (floor) the displayed time percentage in the usage widget. The 5-hour API window = 300 minutes, we fetch every 3 minutes = 1% of window. Floor ensures: (1) never overstates elapsed time, (2) clean 1% steps per fetch, (3) tolerant of fetch/window misalignment. Implementation: apply floor() when converting elapsed minutes to percentage for display.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T01:00:44.260922+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:39:32.838005+01:00","closed_at":"2026-02-10T12:39:32.838005+01:00","close_reason":"Added .floor() to all 4 percentage format strings in api_usage.rs"}
{"id":"acd-g5h","title":"Investigate AskUserQuestion hook behavior in Claude Code","description":"Verify whether AskUserQuestion triggers any Claude Code hook (PreToolUse, Notification, etc). If it does, determine if it causes duplicate status updates. Log both JSON stdin session_id and CC_SESSION_ID env var, compare if they differ. Track across Claude Code versions.","notes":"## Investigation Complete (2026-02-09)\n\n### Original conclusion was WRONG\nelicitation_dialog is for MCP tool elicitation, NOT AskUserQuestion.\n\n### Solution: PreToolUse with matcher AskUserQuestion\nConfirmed by Anthropic collaborator @dicksontsai in #10168.\nBug that caused blank answers (pre-v2.0.76) is fixed since Jan 4 2026.\nCurrent version v2.1.37 — safe to use.\n\n### Ranked workarounds\n1. PreToolUse matcher AskUserQuestion — official workaround, confirmed working\n2. PermissionRequest matcher AskUserQuestion — also fires, duplicates with #1\n3. Stop hook — too broad (every response, not AskUserQuestion-specific)\n4. iTerm2 triggers — terminal-specific, fragile\n5. CLAUDE.md prompt engineering — non-deterministic\n\n### Related GitHub issues\n- #13024 (OPEN) — Main feature request for WaitingForInput hook\n- #10168 (OPEN) — Where Anthropic staff posted the workaround\n- #12048 (CLOSED dup of #10168)\n- #13830 (CLOSED dup of #13024)\n- #15872 (OPEN) — Another request for AskUserQuestion hook\n- #12605 (CLOSED dup of #10168) — Bidirectional hook request\n- #13439 (CLOSED fixed v2.0.76) — Bug that broke PreToolUse+AskUserQuestion\n\n### Action required for ACD\n1. Replace Notification/elicitation_dialog hook with PreToolUse/AskUserQuestion hook\n2. Or add PreToolUse/AskUserQuestion as a 7th hook alongside existing elicitation_dialog\n3. Test that question status fires correctly in TUI\n4. Verify no blank-answer regression on current Claude Code version\n\n### Also consider\n- PermissionRequest/AskUserQuestion fires simultaneously — pick one to avoid duplicate status updates\n- No bidirectional hook exists (cannot programmatically answer from hook)\n- VSCode extension may not fire PermissionRequest (PreToolUse safer)","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T13:45:16.412777+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T23:52:06.007433+01:00","closed_at":"2026-02-08T22:57:50.595896+01:00","close_reason":"Confirmed: AskUserQuestion fires Notification hook with notification_type=elicitation_dialog. ACD already maps this to question status correctly. No duplication risk. Other notification types: permission_prompt, idle_prompt, auth_success."}
{"id":"acd-gup","title":"Socket path not configurable via hooks","description":"Hook commands don't pass --socket, always use /tmp/agent-console-dashboard.sock default. Works for single-user but won't scale. Low priority — default works for personal use. See docs/end-to-end-blockers.md B7.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:45.671081+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T19:50:43.871627+01:00"}
{"id":"acd-gzy","title":"Rename ACD_LOG to AGENT_CONSOLE_DASHBOARD_LOG for env var consistency","description":"Rename environment variable ACD_LOG to AGENT_CONSOLE_DASHBOARD_LOG in daemon/logging.rs. Add AGENT_CONSOLE_DASHBOARD_DEBUG environment variable for debug mode. Update all references in docs, tests, and code. The full package name should be used consistently for all env vars.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:12.609027+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.997746+01:00","closed_at":"2026-02-12T05:40:26.997746+01:00","close_reason":"Closed"}
{"id":"acd-h3h","title":"Research: does Claude Code hot-reload hooks without restart?","description":"After 'acd install' adds/updates hooks in settings.json, does Claude Code pick them up immediately or require a restart? Currently we say 'You may need to restart.' If hot-reload is confirmed, remove the message. If restart is required, make the message definitive.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:24:43.293141+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:24:43.293141+01:00"}
{"id":"acd-hek","title":"Track mf-upm","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:56:01.819854+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:56:01.819854+01:00"}
{"id":"acd-hex","title":"Implement compact 3-line dashboard view","description":"Implement compact dashboard view for the TUI. Design: add --layout \u003cname\u003e flag to 'acd tui' command. When no flag is provided, use auto-detection based on terminal dimensions (height ≤ 5 lines → compact). Explicit flag overrides auto-detection. Initial layouts: 'compact' (3-line dashboard, one line per active session), default (current full session list). Future layouts: vertical, etc. The layout preset infrastructure already exists (session-status:compact, key 2 toggles) but rendering doesn't differentiate yet.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:29.232694+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:43:17.936471+01:00","dependencies":[{"issue_id":"acd-hex","depends_on_id":"acd-8uw","type":"blocks","created_at":"2026-02-08T22:43:23.88892+01:00","created_by":"Pablo LION"}]}
{"id":"acd-i4o","title":"Deep content audit of all 55 story files","description":"## Context\n\nStructural audit completed on 2026-01-30 (see docs/audits/2026-01-30-story-structural-audit.md).\nAll files pass structural validation (docs/docs-scripts/validate-stories.sh).\nThis task covers the CONTENT quality review that was not yet done.\n\n## Branch\n\nContinue on: docs/create-missing-stories\n\n## What to Check Per Story File\n\nFor each of the 55 story files in docs/stories/:\n\n1. **Description quality**: Clear user story format (\"As a..., I want..., So that...\")\n2. **Context section**: Explains WHY this story exists, not just WHAT\n3. **Implementation Details accuracy**: Files to modify/create match actual codebase structure\n   - Check paths like `src/daemon/server.rs` vs `crates/agent-console-dashboard/src/daemon/server.rs`\n   - Flag any paths that reference non-existent modules\n4. **Acceptance criteria**: Testable, specific, not vague\n5. **Dependencies**: Cross-references to other stories are accurate (correct story IDs, correct relationship)\n6. **Scope consistency with epic**: Story scope matches what the parent epic describes\n7. **Points estimation**: Reasonable relative to other stories (1=trivial, 2=small, 3=medium, 5=large)\n8. **Code examples**: If present, check they use correct crate/module names\n9. **Out of scope**: Items listed make sense and aren't things that should be in scope\n\n## Approach\n\n1. Read stories in epic order (E001 stories first, then E002, etc.)\n2. Read the parent epic first to understand goals\n3. Review each story against the checklist above\n4. Record findings per file in docs/audits/2026-01-30-story-content-audit.md\n5. Fix issues found\n6. Commit fixes\n\n## Already Verified (Do NOT Re-check)\n\n- File existence (all present)\n- Header format (Story ID, Epic link, Status, Priority, Points)\n- Required sections present (Description, Acceptance Criteria)\n- Epic links resolve to correct files\n- Epic story tables have hyperlinks\n- Sprint-status.yaml alignment\n- Story ID matches filename\n\n## Key Files\n\n- Validation script: docs/docs-scripts/validate-stories.sh\n- Structural audit: docs/audits/2026-01-30-story-structural-audit.md\n- Sprint status: planning-artifacts/sprint-status.yaml","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-30T17:55:53.788894+01:00","created_by":"Pablo LION","updated_at":"2026-01-30T19:21:46.215323+01:00","closed_at":"2026-01-30T19:21:46.215323+01:00","close_reason":"Content audit complete. First pass fixed 37 files (paths, E009 rewrite, stale refs). BMAD second pass scored 94% — 49/55 stories implementation-ready, 4 medium + 6 minor AC specificity issues remain."}
{"id":"acd-i71","title":"Remove unused assert_bg_color helper in test_utils.rs","description":"test_utils.rs:64 defines assert_bg_color() but no test uses it, causing a dead_code warning. Either use it in a test or remove it.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:47.504744+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:14:47.504744+01:00"}
{"id":"acd-in9","title":"Update E009/E011 integration: daemon fetches usage, not TUI","description":"Code changes needed: TUI should no longer call claude_usage::get_usage() directly. Instead, daemon fetches every 3 minutes and broadcasts via subscription. Update any TUI code that imports claude-usage crate directly. Scope: crates/agent-console-dashboard/src/. See docs/architecture/2026-01-31-discussion-decisions.md D3-D4.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.328486+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T23:46:15.357091+01:00","closed_at":"2026-02-05T23:46:15.357091+01:00","close_reason":"UsageFetcher wired into daemon, SUB extended with USAGE messages, TUI receives and stores usage data"}
{"id":"acd-isj","title":"Fixed-width columns: session_id (40), status (13), elapsed (16)","description":"Fixed-width columns for Full TUI mode. Directory fills remaining width (flex). Fixed columns: session_id=40 (UUID 36 + 4 padding), status=14 (even: max 'attention' 9 + 5 padding), elapsed=16 (HH:MM:SS 8 + 8 padding). Narrow mode (\u003c40 cols) unchanged. Collapse standard/wide modes into one mode since directory is now flex. Includes acd-ps6 (column arrangement). Update format_session_line(), format_header_line(), and affected tests.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:42.815278+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:10:47.214068+01:00","closed_at":"2026-02-12T00:10:47.214068+01:00","close_reason":"Closed"}
{"id":"acd-j4u","title":"Investigate usage fetch timer alignment and rounding","description":"Investigation complete. Timer uses tokio::interval(180s), no drift. Config usage_fetch_interval defined but NOT wired to daemon. D4 alignment concern deferred. Remaining work: (1) wire config to daemon, (2) investigate if rounding causes real issues, (3) consider API window boundary alignment.","notes":"## Investigation Results (2026-02-09)\n\n### Timer: No drift\ntokio::interval(180s) handles drift correctly. No issue here.\n\n### Config: usage_fetch_interval not wired\nThe config field exists but is NOT connected to the daemon timer. Needs wiring.\n\n### Rounding Solution (confirmed by user)\n5-hour API window = 300 minutes. Fetch every 3 minutes = 1% of window.\n\n**Solution: round down (floor) the displayed time percentage.**\n\nWhy floor:\n1. **Truthful** — never overstates elapsed time. 50.7% real → shows 50%.\n2. **Clean 1% steps** — each fetch advances real value by ~1%. Floor produces exactly +1% per fetch (50.2% → 50%, next fetch 51.2% → 51%).\n3. **Alignment tolerant** — first fetch may not land on window boundary. Floor absorbs: 0.8% → shows 0%, next → 1%. No jitter.\n\nRound-to-nearest would also give 1% steps but overstates by up to 0.5%, creating misleading rate signals when comparing time vs quota.\n\n### Remaining Work\n1. Wire usage_fetch_interval config to daemon timer\n2. Implement floor rounding for displayed time percentage","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:00:31.576795+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T01:01:01.351974+01:00","closed_at":"2026-02-10T01:01:01.351974+01:00","close_reason":"Split into two separate issues: acd-6hr (wire config to daemon) and acd-edx (floor rounding)"}
{"id":"acd-jnd","title":"Make AUTO_STOP_IDLE_SECS configurable via config.toml","description":"Currently AUTO_STOP_IDLE_SECS is a hardcoded constant (3600). Allow overriding via [daemon] section in config.toml as an integer (seconds). No env var needed — this is stable config, not per-invocation.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:11:27.767435+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T01:58:44.594559+01:00","closed_at":"2026-02-11T01:58:44.594559+01:00","close_reason":"daemon.idle_timeout read from [daemon] config section, defaults to 60m. Committed 83ba356."}
{"id":"acd-k69","title":"TUI: remove session ID truncation, decide policy later","description":"Line 106 in dashboard.rs hard-truncates session ID to 20 chars: truncate_string(\u0026session.id, 20). Remove the truncation entirely for now so we can see actual session ID lengths. Decide on a truncation policy later after observing real data.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:14.081276+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.222418+01:00","closed_at":"2026-02-10T12:40:18.22242+01:00"}
{"id":"acd-l5r","title":"Change highlight symbol to filled triangle and always show indent spacing","description":"Selection marker changes: (1) Change highlight_symbol from ▸ (small triangle) to ▶ (filled triangle, U+25B6). (2) Add .highlight_spacing(HighlightSpacing::Always) to List widget so 2-char indent is reserved for ALL items, not just selected. Currently non-selected items lose the leading 2 spaces, causing misalignment. ratatui 0.29 supports this API.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:07.404605+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.992853+01:00","closed_at":"2026-02-12T05:40:26.992853+01:00","close_reason":"Closed"}
{"id":"acd-lht","title":"Show \u003cerror\u003e in red instead of 'unknown' for missing working directory","description":"When a session has no working directory, the TUI shows 'unknown' in the working directory column. This is misleading — the JSON stdin from Claude Code always includes cwd, so a missing cwd means something went wrong. Display '\u003cerror\u003e' in red instead. Reserve 'unknown' for a true unknown state if one exists. This makes the error visible and debuggable.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:34.091679+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:54:50.24667+01:00","closed_at":"2026-02-10T11:54:50.24667+01:00","close_reason":"Implemented: dashboard shows \u003cerror\u003e in red for missing CWD. Follow-ups: acd-4sq (detail panel still shows 'unknown'), acd-rxy (cwd not recognized from hook input)"}
{"id":"acd-lj1","title":"Add uninstall command for agent-console-dashboard system","description":"Offer an option to fully uninstall the ACD system: remove hooks from Claude Code settings.json, remove service files (launchd/systemd), remove config files, remove socket file. Should be accessible via 'acd uninstall' CLI command.","notes":"Hooks uninstall portion done in acd-qe8. Remaining: launchd/systemd service file removal, config file removal, socket cleanup.","status":"open","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-02T09:55:57.018235+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:52:19.639919+01:00"}
{"id":"acd-o62","title":"Show status bar message when double-click hook is not configured","description":"Double-click visual feedback for TUI sessions. Two cases: (1) No hook configured: show status bar message with config file path, e.g. \"No double-click hook configured. Set tui.double_click_hook in \u003cconfig-path\u003e\". (2) Hook IS triggered: show confirmation message, e.g. \"Hook triggered: \u003chook-command\u003e\". Currently double-click with no hook silently does nothing, and hook trigger has no visual feedback either.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T00:13:44.633437+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.008309+01:00","closed_at":"2026-02-12T05:40:27.008309+01:00","close_reason":"Closed"}
{"id":"acd-ojb","title":"Update E001 daemon code: auto-stop 60min + actor model","description":"Code changes needed after epic amendments: (1) Update AUTO_STOP_IDLE_THRESHOLD_SECS from 1800 to 3600 in daemon code, (2) Refactor connection handling from tokio::spawn per connection to single-threaded actor model with mpsc queue, (3) Replace Arc\u003cRwLock\u003cHashMap\u003e\u003e with plain HashMap. Scope: crates/agent-console-dashboard/src/daemon/. See docs/architecture/2026-01-31-decision-amendments.md amendments 1-2.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.103218+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T09:08:36.54909+01:00","closed_at":"2026-02-05T09:08:36.54909+01:00","close_reason":"Split into focused issues: acd-2co (P1, idle timer implementation), acd-jnd (P4, configurability), acd-51l (P4, actor model deferred). Code audit found no deadlocks possible, one inconsequential TOCTOU. Current RwLock model is idiomatic Rust and correct for our scale."}
{"id":"acd-opf","title":"Republish claude-hooks v0.1.1 with two-layer safety","description":"Changes after initial publish (two-layer safety check) are not on crates.io yet. Bump version to v0.1.1 and republish.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:50.670104+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T19:30:56.045108+01:00","closed_at":"2026-02-04T19:30:56.045108+01:00","close_reason":"Published v0.1.1 with serial group fix"}
{"id":"acd-p6f","title":"Config documentation and acd config show command","description":"## Problem\n\nNo user-facing documentation on config options. Users don't know what settings exist,\nwhat the defaults are, or how to customize behavior. Three gaps:\n\n1. **No `acd config show`**: Users can create a config (`acd config init`), check\n   the path (`acd config path`), and validate (`acd config validate`), but cannot\n   view current effective values (defaults + file overrides + env var overrides).\n\n2. **No config reference docs**: The TOML schema defines fields like\n   `socket_path`, `tick_interval_secs`, `usage_fetch_interval`, `auto_stop_idle_secs`,\n   etc. but these are only documented in the source code. No user-facing reference.\n\n3. **No `--help` integration**: `acd config --help` shows subcommands but doesn't\n   explain what configuration controls.\n\n## Context\n\nConfig system implemented in E007. Config loading, XDG paths, TOML parsing all work.\nThe schema is defined in `src/config/` module. Default values documented in open\nquestions Q39. Environment variable overrides supported per Q64.\n\n## Acceptance Criteria\n\n- `acd config show` displays current effective config (resolved from defaults + file + env)\n- Config reference section added to README or as separate `docs/configuration.md`\n- Each config key documented with: type, default, description, env var override name","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-09T07:40:52.858888+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T01:58:42.966626+01:00","closed_at":"2026-02-11T01:58:42.966626+01:00","close_reason":"acd config show displays effective config as TOML with source header. Committed 83ba356."}
{"id":"acd-pdx","title":"Dynamic padding for all columns instead of hardcoded","description":"Column padding (currently 2 spaces each side) should be dynamic rather than hardcoded. Exact behavior TBD — possibly scale with terminal width or use proportional spacing.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:28.350981+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:19:28.350981+01:00"}
{"id":"acd-ps6","title":"Column reorder: directory flex-left, fixed columns right","description":"Reorder TUI columns: directory column on the LEFT with flex width (expands to fill remaining space, like CSS flexbox). Three fixed-width columns (session_id, status, time elapsed) on the RIGHT. Current layout has directory first but with truncated fixed width. New layout: [directory (flex)] [session_id (40)] [status (13)] [elapsed (16)].","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:45.670211+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T23:37:35.062902+01:00","closed_at":"2026-02-11T23:37:35.062902+01:00","close_reason":"Merged into acd-isj. Not a reorder — just width rearrangement.","dependencies":[{"issue_id":"acd-ps6","depends_on_id":"acd-isj","type":"blocks","created_at":"2026-02-11T22:14:51.67248+01:00","created_by":"Pablo LION"}]}
{"id":"acd-qe8","title":"Install command: write hooks to ~/.claude/settings.json","description":"Plugin is not installed in Claude Code. .claude-plugin/ is a gitignored build artifact — Claude Code doesn't auto-discover it. Add 'acd install' command that writes hooks directly to ~/.claude/settings.json (user scope). Also add 'acd uninstall' to remove them. See docs/end-to-end-blockers.md B1+B6.","status":"closed","priority":0,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:36.803276+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.257828+01:00","closed_at":"2026-02-08T18:51:55.257828+01:00","close_reason":"Closed"}
{"id":"acd-qhh","title":"One-line compact TUI dashboard view","description":"A minimal single-line TUI view that shows essential information in one row. Designed for tight spaces like Zellij status panes (size=2).\n\n## Content (must fit one line)\n\n- API usage: 5h and 7d percentage from claude-usage\n- Latest activity: most recent session name + status (or aggregated status indicator)\n- More content TBD during design phase\n\n## Interaction\n\n- Click: TBD (select? expand to full view?)\n- Double-click: TBD (open detail? switch to multi-line view?)\n- Keyboard bindings: TBD\n\n## Design considerations\n\n- Truncation strategy: how to handle long session names or many sessions in one line\n- View switching: keybinding to toggle between one-line and full dashboard (e.g. Tab or 1/2/3 for layout presets)\n- Color coding: session status as colored dots/icons since no room for text status\n- Overflow indicator: when more sessions than fit, show count (e.g. '3 sessions, 1 attention')\n\nFull design to come later. This issue captures the intent and known requirements.\n\n## Relationship to existing work\n\n- Related to acd-hex (compact 3-line view) — this is even more minimal (1 line)\n- Related to acd-7u2 (multiplexer integration) — the one-line view is what goes in a Zellij minimal layout pane","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T00:00:31.187671+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T00:02:19.007067+01:00"}
{"id":"acd-qk2","title":"Plugin distribution strategy decision (B1+B4)","description":"## Problem\n\nTwo hook installation paths exist with no clear strategy for which to use when:\n\n| Path | Method | Audience | Status |\n|------|--------|----------|--------|\n| acd install | Writes to ~/.claude/settings.json | Personal use | Working |\n| .claude-plugin/plugin.json | Build artifact from build.rs | Distribution | Unclear |\n\n### Issues with the Plugin Path\n\n1. .claude-plugin/ is gitignored — won't ship via git clone\n2. Plugin marketplace discovery is undocumented — unclear how to publish\n3. claude plugin install requires a marketplace entry (local or remote)\n4. build.rs generates plugin.json but nobody can use it without the binary\n\n### Issues with settings.json Path\n\n1. Works perfectly for personal use\n2. Cannot distribute to others (requires them to have acd installed first)\n3. Hardcodes binary path — won't work if acd is at a different location\n\n### Decision Needed\n\nChoose one of:\n\nA. **settings.json only**: Remove plugin system from build.rs. acd install is the\n   only installation method. Distribution via cargo install + acd install.\n   Plugin marketplace not needed.\n\nB. **Both paths**: Keep plugin.json for future marketplace publishing. Use\n   acd install for now. Revisit plugin distribution when Claude Code marketplace\n   is more mature.\n\nC. **Plugin-first**: Research Claude Code plugin marketplace requirements. Publish\n   plugin. Make acd install a fallback for users who prefer manual setup.\n\n### Recommendation\n\nOption B (keep both, defer marketplace). The plugin infrastructure costs nothing\nto maintain (build.rs generates it automatically). When the marketplace matures,\nwe can publish without rework.\n\n## References\n\n- Blockers doc: B1 and B4\n- Claude Code plugins reference: https://code.claude.com/docs/en/plugins-reference","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-09T07:41:18.389394+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T07:41:18.389394+01:00"}
{"id":"acd-qku","title":"Rename Session.id to Session.session_id for Claude Code naming consistency","description":"Rename the Session.id field to Session.session_id to match Claude Code's naming. Remove the unused Session.session_id: Option\u003cString\u003e field first. Mechanical refactor touching many files.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:21.034042+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T05:10:44.947671+01:00","closed_at":"2026-02-11T05:10:44.947671+01:00","close_reason":"Renamed Session.id and DumpSession.id to session_id across 20 files. All 534 lib tests + 12 integration tests passing."}
{"id":"acd-r4c","title":"Verify elicitation dialog → question state end-to-end","description":"We added Notification/elicitation_dialog → question hook mapping, but need to verify it works end-to-end: Claude Code fires the hook → acd receives it → TUI shows question status (blue ?). Also verify Notification/permission_prompt → attention works. Related: acd-g5h (AskUserQuestion hook behavior investigation).","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:39.041305+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:14:39.041305+01:00","dependencies":[{"issue_id":"acd-r4c","depends_on_id":"acd-g5h","type":"blocks","created_at":"2026-02-08T22:14:43.548313+01:00","created_by":"Pablo LION"},{"issue_id":"acd-r4c","depends_on_id":"acd-zdj","type":"blocks","created_at":"2026-02-10T01:01:02.290586+01:00","created_by":"Pablo LION"}]}
{"id":"acd-r57","title":"Fix TUI layout — right-align columns, flexbox-style name column","description":"Current layout centers content. Change to: first column (session name) is flexible and grows/shrinks with terminal width. Last 3 columns (status, working directory, elapsed time) are right-aligned with fixed widths. Like CSS flexbox where name column is flex:1 and others are fixed.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:31.486474+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:54:51.250015+01:00","closed_at":"2026-02-10T11:54:51.250015+01:00","close_reason":"Implemented: columns right-aligned. Superseded by acd-csg (labels should be left-aligned instead)","dependencies":[{"issue_id":"acd-r57","depends_on_id":"acd-lht","type":"blocks","created_at":"2026-02-08T22:43:23.64525+01:00","created_by":"Pablo LION"}]}
{"id":"acd-rhr","title":"Discuss full UUID v4 validation for session_id","description":"Currently we only validate session_id is 36 chars with hex+dashes. Should we enforce full UUID v4 format (8-4-4-4-12 pattern, version nibble = 4)? Pros: catches invalid IDs early. Cons: breaks if Claude Code changes format. Decision needed.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:01:39.294245+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:01:39.294245+01:00"}
{"id":"acd-rla","title":"Update design docs with fixed column layout decisions","description":"Document the TUI column layout decisions in docs/design/ui.md:\n- Fixed columns: session_id (40), status (13), time elapsed (16) — right-aligned\n- Directory column: flex width, left side\n- Padding: dynamic (not hardcoded)","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:24.339375+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T03:07:17.505466+01:00","closed_at":"2026-02-12T03:07:17.505466+01:00","close_reason":"Design docs updated directly in main thread: docs/design/ui.md now has column layout section, cell content alignment rule, and highlight marker decisions."}
{"id":"acd-rxy","title":"Bug: directory (cwd) not recognized from hook input","description":"Passing cwd via echo hook command doesn't set the working directory. User tested with: echo '{\"session_id\":\"test\",\"cwd\":\"/tmp\"}' | acd claude-hook working — directory not recognized. Need to investigate hook stdin parsing. Use ACD_LOG=debug to diagnose.","notes":"Implementation details:\n- Replaced split_whitespace() text protocol with JSON Lines (IpcCommand, IpcResponse structs)\n- Created SessionSnapshot wire struct (from Session with Instant→u64 conversion)\n- Created StatusChange history entries (status + at_secs unix timestamp)\n- Fixed get_or_create_session to update working_dir on existing sessions\n- Removed api_usage from wire struct (not consumed by any client)\n- Renamed old SessionSnapshot (dump) to DumpSession to avoid collision\n- Updated TUI subscription to parse JSON instead of text\n- All IPC commands: SET, LIST, GET, RM, SUB, STATUS, DUMP, RESURRECT use JSON\n- 528 lib + 40 bin + 12 integration tests pass\n- Committed as d6c43e4, documented in docs/decisions/ipc-protocol.md","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:28.257468+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T23:45:30.614315+01:00","closed_at":"2026-02-10T23:39:47.633594+01:00","close_reason":"JSON Lines IPC implemented. All commands/responses use JSON. SessionSnapshot wire struct with StatusChange history. get_or_create_session fixed."}
{"id":"acd-rzl","title":"Add shell autocompletion script for acd CLI","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:00:48.761222+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:00:48.761222+01:00"}
{"id":"acd-s07","title":"Replace silent \".\" fallback when cwd is absent from hook JSON","description":"When Claude Code hook JSON has no cwd field, run_set_command defaults to \".\" which resolves relative to the daemon's cwd, not the session's. This is semantically wrong — resurrection validation would pass incorrectly, and the dashboard shows useless \".\" as working dir. Needs design decision: use \"unknown\" sentinel, log a warning, or require cwd.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.285338+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:28:08.778259+01:00","closed_at":"2026-02-08T01:28:08.778259+01:00","close_reason":"Fixed: uses \u003cunknown\u003e sentinel + stderr warning instead of silent ."}
{"id":"acd-tvr","title":"Handle Claude Code hook JSON schema versioning","description":"Document the current Claude Code hook stdin JSON schema and the Claude Code version we support. Add version detection or a dispatcher if the JSON format changes in future Claude Code versions. Current schema has: session_id, transcript_path, cwd, permission_mode, hook_event_name. Event-specific: Stop has reason, UserPromptSubmit has user_prompt.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:01:56.107185+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T13:01:56.107185+01:00"}
{"id":"acd-tz3","title":"Wire lazy-start into claude-hook handler","description":"run_claude_hook_command() uses raw UnixStream::connect() via run_set_command(), bypassing the existing connect_with_auto_start() in client/connection.rs. The auto-start infrastructure (spawn daemon + exponential backoff retry) is built but not wired into the hook path. Fix: make the hook handler use connect_with_auto_start() so the daemon starts automatically on first hook trigger.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T15:17:00.493749+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T17:38:43.041967+01:00","closed_at":"2026-02-08T17:38:43.041967+01:00","close_reason":"Wired connect_with_lazy_start() into run_claude_hook_async(), daemon now auto-starts on first hook trigger","dependencies":[{"issue_id":"acd-tz3","depends_on_id":"acd-3kr","type":"blocks","created_at":"2026-02-08T15:22:45.117723+01:00","created_by":"Pablo LION"}]}
{"id":"acd-ubu","title":"Add pre-push hook with cargo doc and cargo test","description":"Create scripts/pre-push.sh that runs RUSTDOCFLAGS='-D warnings' cargo doc --workspace --no-deps --quiet and cargo test --workspace. build.rs installs the symlink alongside pre-commit.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:06.550947+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:00:24.323569+01:00","closed_at":"2026-02-08T01:00:24.323569+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-ubu","depends_on_id":"acd-bw4","type":"blocks","created_at":"2026-02-08T00:57:14.58858+01:00","created_by":"Pablo LION"}]}
{"id":"acd-uws","title":"Add --claude-path flag to acd service install","description":"Allow specifying the Claude CLI path instead of assuming it is on PATH. Over-engineering now, stored as a future idea for when we support multiple agent CLIs.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:01:53.062903+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T13:01:53.062903+01:00"}
{"id":"acd-vnd","title":"Fix dead code warnings for unused hook functions","description":"cleanup_existing_acd_hooks() and uninstall_acd_hooks() are unused. Either keep for future 'acd uninstall-hooks' CLI command or add #[allow(dead_code)] with comment explaining why.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:48.195917+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T15:26:40.660117+01:00","closed_at":"2026-02-07T15:26:40.660117+01:00","close_reason":"Obsolete: daemon/hooks.rs deleted entirely in plugin migration (acd-a81)"}
{"id":"acd-ws6","title":"Test PreToolUse timing by temporarily removing PostToolUse hook","description":"Experiment: temporarily remove PostToolUse hook from acd_hook_definitions() to test whether PreToolUse fires after user grants permission. If PreToolUse alone bridges the attention→working gap, PostToolUse may be redundant for status tracking. This informs hook ordering research (acd-7fm).","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:02.798643+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.00402+01:00","closed_at":"2026-02-12T05:40:27.00402+01:00","close_reason":"Closed"}
{"id":"acd-wsk","title":"Fix flaky test: create_with_force_creates_backup","description":"config::default::tests::create_with_force_creates_backup fails intermittently under parallel test execution due to serial_test contention on shared config file. Passes in isolation. Fix: use isolated temp directories per test or add proper locking.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T22:03:03.571535+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.016721+01:00","closed_at":"2026-02-12T05:40:27.016721+01:00","close_reason":"Closed"}
{"id":"acd-x4f","title":"Verify highlight symbol 2-char padding on all rows","description":"Ensure every session row has 2-char left padding for the highlight symbol. Unselected rows should have 2 spaces matching the highlight_symbol width. Verify ratatui List widget handles this or add manual padding.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:27.625773+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.749396+01:00","closed_at":"2026-02-11T20:48:57.749396+01:00","close_reason":"Closed"}
{"id":"acd-ynv","title":"Remove unnecessary inner mod wrapper in claude_hook integration tests","description":"tests/claude_hook.rs wraps everything in mod claude_hook { ... } which adds indentation without namespacing benefit (test files are already separate crates). Removing it would simplify the file. Low priority style improvement.","status":"closed","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.277703+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:20:57.291197+01:00","closed_at":"2026-02-08T01:20:57.291197+01:00","close_reason":"Closed"}
{"id":"acd-zdj","title":"Research AskUserQuestion hook in Claude Code","description":"Research task for a separate session (Claude Code-focused, not ACD code).\n\n## Background\nACD needs to detect when Claude Code shows an AskUserQuestion dialog so it can set the session status to 'question'. Investigation in acd-g5h confirmed the solution: PreToolUse hook with matcher 'AskUserQuestion'.\n\n## What to research\n\n### Verify PreToolUse/AskUserQuestion works\n- Set up a test hook with PreToolUse matcher AskUserQuestion\n- Confirm it fires when Claude Code shows an AskUserQuestion dialog\n- Confirm no blank-answer regression (was fixed in v2.0.76, current is v2.1.37+)\n- Test in both terminal and VSCode contexts\n\n### Compare with PermissionRequest\n- PermissionRequest also fires for AskUserQuestion (per acd-g5h notes)\n- Determine if both fire simultaneously\n- Recommend which to use (PreToolUse preferred — works in VSCode too)\n\n### Check for upstream progress\n- GitHub #13024 — main feature request for WaitingForInput hook (still open)\n- GitHub #10168 — where Anthropic staff (@dicksontsai) posted the workaround\n- GitHub #15872 — another AskUserQuestion hook request\n- Any new issues or PRs since Feb 2026\n\n### Document findings\n- Write up which hook to use and why\n- Note any caveats or version requirements\n- Feed results back to ACD implementation (acd-r4c depends on this)\n\n## Related issues\n- acd-g5h (closed) — original investigation, full notes there\n- acd-r4c — verify elicitation dialog → question state end-to-end (blocked)","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T01:00:56.974578+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T01:00:56.974578+01:00"}
