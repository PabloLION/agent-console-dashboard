{"id":"acd-04g","title":"Decide plugin.json vs settings.json hook strategy","description":"plugin.json embeds hooks inline (valid per docs) but becomes irrelevant if install command writes to ~/.claude/settings.json. Decision: keep plugin.json for distribution AND settings.json for personal use? Or drop the plugin approach? See docs/end-to-end-blockers.md B4.","status":"closed","priority":1,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:42.968881+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:45:03.57473+01:00","closed_at":"2026-02-08T18:45:03.57473+01:00","close_reason":"Decision: keep both. plugin.json (build.rs) for future distribution via marketplace. settings.json (acd install) for personal/immediate use. They serve different scopes and don't conflict."}
{"id":"acd-1bo","title":"Create agent-console placeholder crate on crates.io","description":"Publish a minimal agent-console crate to crates.io to reserve the name. The real app will be developed in a separate repository. This is just name reservation.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:10.638015+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T00:57:10.638015+01:00"}
{"id":"acd-2co","title":"Implement auto-stop idle timer (60min constant)","description":"Add AUTO_STOP_IDLE_SECS = 3600 constant to daemon. Daemon should auto-stop when no sessions are active for 60 minutes. Logic lives in the main event loop (reset on any session activity, shut down when timer fires). Split from acd-ojb which bundled this with actor model refactor. Configurability deferred to acd-jnd (P4).","status":"closed","priority":1,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T09:00:05.314162+01:00","created_by":"Pablo LION","updated_at":"2026-02-06T22:13:38.632781+01:00","closed_at":"2026-02-06T22:13:38.632781+01:00","close_reason":"Implemented: idle auto-stop timer with AUTO_STOP_IDLE_SECS=3600 constant, merged to master"}
{"id":"acd-2n6","title":"Add missing hook events: SessionEnd, Notification","description":"Only 3 of 14 hook events are registered. Missing critical events: SessionEnd → closed (sessions never close), Notification/elicitation_dialog → question (AskUserQuestion), Notification/permission_prompt → attention. Must also verify Status enum accepts 'closed' and 'question' via claude-hook subcommand. See docs/end-to-end-blockers.md B3.","status":"closed","priority":1,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:40.98283+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.261217+01:00","closed_at":"2026-02-08T18:51:55.261217+01:00","close_reason":"Closed"}
{"id":"acd-2zh","title":"Add SessionStore::has_active_sessions() to avoid clone-all in idle check","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T21:40:34.8905+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:29:13.424576+01:00","closed_at":"2026-02-08T01:29:13.424576+01:00","close_reason":"Added has_active_sessions(), updated idle_check_loop to use it"}
{"id":"acd-35c","title":"Create root README.md","description":"No documentation for new users. Create README.md with: overview, installation, setup (acd install), usage (acd tui), CLI reference. See docs/end-to-end-blockers.md B5.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:44.473255+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:49.735561+01:00","closed_at":"2026-02-08T22:57:49.735561+01:00","close_reason":"README.md written by tech-writer agent. Covers quick start, commands, architecture, development, project structure."}
{"id":"acd-36h","title":"Protect main branch and require PRs for CI","description":"Stop running CI on every push to main. Protect main branch so even administrators cannot push directly — all changes must go through PRs. This prevents unnecessary CI runs and enforces review workflow. Steps: 1) Add branch protection rules on GitHub (require PR, no direct push, include administrators), 2) Update CI workflow to only run on pull_request events (not push to main), 3) Optionally keep push-triggered CI for other branches.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:52:26.352701+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:09.254811+01:00","closed_at":"2026-02-08T22:57:09.254811+01:00","close_reason":"Branch protection configured: required CI checks (5 jobs), required PRs (0 approvals), enforce_admins=false for owner bypass, no force pushes or deletions."}
{"id":"acd-3cv","title":"Add mouse/cursor interaction to TUI","description":"Investigate and implement mouse interaction in the TUI — text selection, click to select session, scroll, etc. Ratatui supports mouse events (MouseEvent, crossterm mouse capture). Scope TBD during implementation.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:36.185033+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:14:36.185033+01:00","dependencies":[{"issue_id":"acd-3cv","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-08T22:43:24.124236+01:00","created_by":"Pablo LION"}]}
{"id":"acd-3kr","title":"Rename auto-start to lazy-start in codebase","description":"Rename all auto_start/auto-start references to lazy_start/lazy-start for consistency with the new design. Includes: connect_with_auto_start() -\u003e connect_with_lazy_start(), comments, module docs, error messages. Related to acd-tz3 (wire lazy-start into hook handler).","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T15:22:41.598744+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T15:26:49.679397+01:00","closed_at":"2026-02-08T15:26:49.679397+01:00","close_reason":"renamed all auto-start references to lazy-start across 4 files"}
{"id":"acd-4g0","title":"E2E integration test with real Claude Code","description":"## Problem\n\nNo automated or documented end-to-end test verifying the full ACD flow with a real\nClaude Code instance. A manual smoke test passed (2026-02-08) but the procedure is\nnot documented and not repeatable by others.\n\n## What Was Tested Manually\n\n1. cargo install → acd in PATH\n2. acd install → hooks written to ~/.claude/settings.json\n3. Start Claude Code session → hooks fire\n4. Daemon lazy-starts from hook\n5. Sessions tracked in daemon (verified via acd dump)\n6. acd tui shows live session\n7. acd uninstall → hooks removed\n\n## What Needs Documentation/Automation\n\n### Test Plan Document\n\nWrite a reproducible test plan covering:\n\n- Prerequisites (Claude Code installed, cargo, Rust toolchain)\n- Step-by-step procedure with expected outputs\n- Verification commands at each step\n- Known issues (e.g., env__fetch_usage_raw panics without CLAUDE_CODE_OAUTH_TOKEN)\n\n### Automated Smoke Test (stretch goal)\n\nA script that automates what can be automated:\n- cargo install\n- acd install → verify hooks in settings.json\n- acd daemon → start daemon\n- Simulate hook calls (echo JSON | acd claude-hook attention)\n- acd dump → verify session exists\n- acd uninstall → verify hooks removed\n\nThe Claude Code interaction itself cannot be automated (requires human session).\n\n## Acceptance Criteria\n\n- Documented test plan in docs/testing/ or similar\n- At least the non-interactive parts scriptable\n- CI could optionally run the automated portion","status":"open","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-09T07:41:05.694293+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T07:41:05.694293+01:00"}
{"id":"acd-515","title":"Fix claude-hooks to use correct Claude Code hooks format","description":"The claude-hooks library uses wrong format. Expected object-based format with event keys: { \"hooks\": { \"Stop\": [{ \"hooks\": [...] }] } } but library uses array format { \"hooks\": [...] }. Need to update settings.rs and related code to handle actual Claude Code schema.","status":"closed","priority":1,"issue_type":"bug","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T21:33:36.775096+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T21:47:17.269398+01:00","closed_at":"2026-02-04T21:47:17.269398+01:00","close_reason":"Fixed claude-hooks library to use correct Claude Code hooks format (object-based instead of array-based). Updated all test files including edge_cases.rs, performance.rs, and atomic_safety.rs."}
{"id":"acd-51l","title":"Consider actor model refactor for daemon (deferred)","description":"Amendment 2 in decision-amendments.md proposed replacing tokio::spawn-per-connection + Arc\u003cRwLock\u003cHashMap\u003e\u003e with single-threaded actor model + plain HashMap. After analysis, decided to defer: Rust type system already prevents data races, TOCTOU risk is marginal at \u003c50 connections, and the refactor touches ~1600 lines across server.rs/store.rs/usage.rs. Revisit if: (1) actual concurrency bugs appear, (2) connection count grows significantly, or (3) lock contention shows up in profiling. See discussion in devlog.","status":"open","priority":4,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:31:09.025911+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T07:31:09.025911+01:00"}
{"id":"acd-5dh","title":"Remove service install/launchd/systemd — lazy-start daemon","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T14:55:34.382147+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T15:17:23.612203+01:00","closed_at":"2026-02-08T15:17:23.612203+01:00","close_reason":"removed service.rs, plist, systemd unit, CLI subcommand, and tests"}
{"id":"acd-63c","title":"Update E002 session code: verify session_id from JSON stdin","description":"Verify session management code uses session_id from JSON stdin (not basename PWD). Check any hook script examples or test fixtures that use the old pattern. Scope: crates/agent-console-dashboard/src/ session-related code. See docs/architecture/2026-01-31-decision-amendments.md and Q16.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.214276+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T21:37:30.87694+01:00","closed_at":"2026-02-05T21:37:30.87694+01:00","close_reason":"Verified: all hook scripts parse session_id from JSON stdin. Fixed stale $SESSION_ID $ARGS placeholders in daemon/mod.rs command templates. No code uses basename PWD."}
{"id":"acd-71n","title":"Verify acd binary is in PATH during install","description":"Hook commands use bare 'acd' — if not in PATH, hooks fail silently. The install command should check that 'acd' resolves in PATH and suggest 'cargo install --path crates/agent-console-dashboard' if not found. See docs/end-to-end-blockers.md B2.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:39.104008+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.263899+01:00","closed_at":"2026-02-08T18:51:55.263899+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-71n","depends_on_id":"acd-qe8","type":"blocks","created_at":"2026-02-08T18:24:50.087355+01:00","created_by":"Pablo LION"}]}
{"id":"acd-7pa","title":"Add cargo audit to CI workflow","description":"Add a cargo audit step to .github/workflows/ci.yml. Checks dependencies for known security vulnerabilities (CVE database). Should run as a separate job alongside test/lint/docs.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:08.713403+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:14:12.42123+01:00","closed_at":"2026-02-08T01:14:12.42123+01:00","close_reason":"Closed"}
{"id":"acd-7u2","title":"Multiplexer integration (Zellij layouts and launcher)","description":"Integrate ACD dashboard as a top pane in Zellij terminal multiplexer layouts. Three layout presets: minimal (2-row), default (3-row), detailed (5-row). Includes launcher script, KDL layout files, and installation to ~/.config/zellij/layouts/. Scope note: this is about the broader 'agent console' concept — the dashboard as one component in a multiplexer workspace with work panes below. See design/integrations.md for the multiplexer integration philosophy.\n\n---\n\n## Original Spec (from docs/guides/zellij.md)\n\n### Prerequisites\n\n- **Zellij installed** (version 0.39.0+ recommended)\n  - Installation guide: https://zellij.dev/documentation/installation\n- **agent-console binary in PATH**\n  - Build: cargo build --release\n  - Install: cargo install --path .\n\n### Quick Start\n\nUse the provided launcher script to start Zellij with the dashboard:\n\n```sh\n# Default layout (2-line dashboard + vertical split)\n./scripts/zellij/zellij-claude.sh\n\n# Minimal layout (1-line dashboard)\n./scripts/zellij/zellij-claude.sh minimal\n\n# Detailed layout (multi-line dashboard)\n./scripts/zellij/zellij-claude.sh detailed\n```\n\nThe script automatically:\n- Checks for Zellij installation\n- Validates Zellij version (warns if \u003c 0.39.0)\n- Prevents nested sessions\n- Launches the appropriate layout\n\n### Layout Descriptions\n\nThree pre-configured layouts are available:\n\n| Layout | Pane Height | Content | Use Case |\n|--------|------------|---------|----------|\n| minimal | 2 rows | Session names + status | Maximum screen space for work |\n| default | 3 rows | Status + working directory | Balanced monitoring and space |\n| detailed | 5 rows | Full session details | Deep session inspection |\n\n#### Minimal Layout\n\n```kdl\nlayout {\n    pane size=2 {\n        command \"agent-console\"\n        args \"tui\" \"--layout\" \"one-line\"\n    }\n    pane\n}\n```\n\n#### Default Layout\n\n```kdl\nlayout {\n    pane size=3 {\n        command \"agent-console\"\n        args \"tui\" \"--layout\" \"two-line\"\n    }\n    pane split_direction=\"vertical\" {\n        pane\n        pane\n    }\n}\n```\n\n#### Detailed Layout\n\n```kdl\nlayout {\n    pane size=5 {\n        command \"agent-console\"\n        args \"tui\"\n    }\n    pane\n}\n```\n\n### Installation to Zellij Config\n\n```sh\nmkdir -p ~/.config/zellij/layouts\ncp scripts/zellij/layouts/claude-*.kdl ~/.config/zellij/layouts/\nzellij --layout claude-default\n```\n\n### Usage Patterns\n\n#### Launching from Outside Zellij\n\n```sh\n./scripts/zellij/zellij-claude.sh default\nzellij --layout claude-default\n```\n\n#### Adding Dashboard to Existing Session\n\n```sh\nzellij action new-pane --command agent-console tui\n```\n\n### Daemon Auto-Start\n\nThe dashboard automatically triggers daemon auto-start when launched. No manual daemon management is required.\n\n### Troubleshooting\n\n- Zellij not installed → brew install zellij / cargo install zellij\n- Nested session warning → exit current session or use zellij action new-pane\n- Version compatibility → update to 0.39.0+\n- Layout file not found → run from project root\n- agent-console not found → cargo install --path .\n- No data shown → check daemon status, ensure active sessions exist\n\n### Customization\n\nCustom layouts: copy existing KDL, modify pane size and args. Save to ~/.config/zellij/layouts/custom.kdl.\n\nDashboard placement: reverse pane order in KDL to place at bottom instead of top.\n\n### Platform Support\n\nTested on macOS (Sonoma 14.x+) and Linux (Ubuntu 22.04+, Arch, Fedora). Windows via WSL.\n\n### References\n\n- Zellij docs: https://zellij.dev/documentation/\n- KDL layout syntax: https://zellij.dev/documentation/creating-a-layout.html","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-09T20:55:09.141463+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T21:07:28.050868+01:00"}
{"id":"acd-80s","title":"Add integration tests for claude-hook subcommand","description":"Automate the manual integration tests for `acd claude-hook`. These test the compiled binary with real stdin/stdout (no daemon running). Cases to cover:\n1. Valid JSON with session_id → exit 0, stdout contains {\"continue\": true} with systemMessage (daemon not running)\n2. Malformed JSON → exit 2, stderr contains error message\n3. Valid JSON missing session_id field → exit 2\n4. Valid JSON with extra unknown fields → exit 0 (forward-compatible)\n\nUse cargo integration test pattern (`tests/` directory) with `assert_cmd` or `std::process::Command` to invoke the built binary. See existing test patterns in the crate.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:39:13.597761+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T21:52:35.27479+01:00","closed_at":"2026-02-07T21:52:35.27479+01:00","close_reason":"Integration tests added and bugs fixed in PR #2"}
{"id":"acd-8uw","title":"Add column headers to TUI session list","description":"The session list table has no header row. Add visible column headers so users can tell what each column represents (session name, status, working directory, elapsed time). Headers should follow the same responsive breakpoints as the data rows.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:27.180486+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:14:27.180486+01:00","dependencies":[{"issue_id":"acd-8uw","depends_on_id":"acd-r57","type":"blocks","created_at":"2026-02-08T22:43:23.764807+01:00","created_by":"Pablo LION"}]}
{"id":"acd-8yv","title":"Rename cargo package agent-console to agent-console-dashboard","description":"Package name 'agent-console' doesn't match repo name 'agent-console-dashboard' or directory 'crates/agent-console-dashboard/'. Rename package to 'agent-console-dashboard', update lib name to 'agent_console_dashboard', and update all imports. Binary stays 'acd'.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T21:30:50.820146+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T14:38:29.285285+01:00","closed_at":"2026-02-08T14:38:29.285285+01:00","close_reason":"Package renamed to agent-console-dashboard across Cargo.toml, lib name, all imports, runtime paths, service identifiers, and plist file"}
{"id":"acd-9pq","title":"Verify hook scripts exist at referenced paths","description":"Daemon references /path/to/hooks/*.sh but scripts may not exist. Check if E006 (S006) created these scripts and update paths if needed.","status":"closed","priority":2,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:49.579311+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T15:26:40.576029+01:00","closed_at":"2026-02-07T15:26:40.576029+01:00","close_reason":"Obsolete: shell hook scripts deleted, replaced by plugin system (acd-a81)"}
{"id":"acd-a44","title":"closed flag is a one-way latch — no reverse path on re-activation","description":"set_status(Closed) sets closed=true, but set_status(Working) does not reset it to false. A re-activated session has status=Working but closed=true, causing incorrect active/closed counts in STATUS and DUMP commands. Needs decision: either clear closed on non-Closed transitions, or prevent re-activation of closed sessions.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.278012+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:27:01.97654+01:00","closed_at":"2026-02-08T01:27:01.97654+01:00","close_reason":"Fixed: self.closed now derived from new_status on every transition"}
{"id":"acd-a81","title":"Migrate ACD to Claude Code plugin system","description":"Replace manual hook management (daemon/hooks.rs + claude-hooks crate) with the official Claude Code plugin system. ACD would ship as a plugin with hooks declared in hooks/hooks.json. Claude Code handles install/update/uninstall lifecycle. This eliminates daemon/hooks.rs (610 lines), the registry system, and the claude-hooks dependency from ACD. The claude-hooks crate can be archived or kept for types only. See discussion in acd-in9 merge session.","status":"closed","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T02:59:53.346537+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T19:42:11.008566+01:00","closed_at":"2026-02-07T19:42:11.008566+01:00","close_reason":"Migrated to Claude Code plugin system: build.rs generates plugin manifest, claude-hook subcommand replaces shell scripts, removed daemon/hooks.rs (610 lines) and claude-hooks dependency"}
{"id":"acd-a8k","title":"Handle stale sessions from crashed clients (session TTL or heartbeat)","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T21:40:34.991201+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T02:42:04.252317+01:00","closed_at":"2026-02-08T02:42:04.252317+01:00","close_reason":"Inactive session detection with visual treatment (dimmed DarkGray + ◌ symbol). No auto-close — sessions stay in active list, distinct from closed. has_active_sessions excludes inactive to fix daemon idle timeout."}
{"id":"acd-bw4","title":"Auto-install git hooks via build.rs","description":"Add hook installation logic to build.rs. On cargo build, create symlinks from .git/hooks/{pre-commit,pre-push} to scripts/{pre-commit,pre-push}.sh. Skip if NO_INSTALL_HOOKS=1. Warn but don't overwrite foreign hooks.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:04.591027+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:00:24.320277+01:00","closed_at":"2026-02-08T01:00:24.320277+01:00","close_reason":"Closed"}
{"id":"acd-bwa","title":"Wire TUI resurrect keybinding to daemon RESURRECT IPC command","description":"TUI app.rs:249 has a TODO: pressing 'r' on a closed session produces Action::Resurrect but doesn't send the RESURRECT IPC command to the daemon. The daemon handler (handle_resurrect_command) and CLI command (acd resurrect) already work — just the TUI wiring is missing.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T02:07:46.445223+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T02:07:50.947719+01:00","dependencies":[{"issue_id":"acd-bwa","depends_on_id":"acd-hex","type":"blocks","created_at":"2026-02-08T22:43:24.00937+01:00","created_by":"Pablo LION"}]}
{"id":"acd-cx9","title":"TUI Polish","description":"Epic for TUI improvements: error display, layout fixes, column headers, compact dashboard, resurrect keybinding, mouse interaction. Sequential chain — all touch views/dashboard.rs.","status":"open","priority":2,"issue_type":"epic","owner":"dev@pablolion.com","created_at":"2026-02-08T22:43:19.755438+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:43:19.755438+01:00","dependencies":[{"issue_id":"acd-cx9","depends_on_id":"acd-lht","type":"blocks","created_at":"2026-02-08T22:43:29.053037+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-r57","type":"blocks","created_at":"2026-02-08T22:43:29.166598+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-8uw","type":"blocks","created_at":"2026-02-08T22:43:29.283283+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-hex","type":"blocks","created_at":"2026-02-08T22:43:29.401028+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-08T22:43:29.511344+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-3cv","type":"blocks","created_at":"2026-02-08T22:43:29.622039+01:00","created_by":"Pablo LION"}]}
{"id":"acd-g5h","title":"Investigate AskUserQuestion hook behavior in Claude Code","description":"Verify whether AskUserQuestion triggers any Claude Code hook (PreToolUse, Notification, etc). If it does, determine if it causes duplicate status updates. Log both JSON stdin session_id and CC_SESSION_ID env var, compare if they differ. Track across Claude Code versions.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T13:45:16.412777+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:50.595896+01:00","closed_at":"2026-02-08T22:57:50.595896+01:00","close_reason":"Confirmed: AskUserQuestion fires Notification hook with notification_type=elicitation_dialog. ACD already maps this to question status correctly. No duplication risk. Other notification types: permission_prompt, idle_prompt, auth_success."}
{"id":"acd-gup","title":"Socket path not configurable via hooks","description":"Hook commands don't pass --socket, always use /tmp/agent-console-dashboard.sock default. Works for single-user but won't scale. Low priority — default works for personal use. See docs/end-to-end-blockers.md B7.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:45.671081+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:24:45.671081+01:00"}
{"id":"acd-hek","title":"Track mf-upm","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:56:01.819854+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:56:01.819854+01:00"}
{"id":"acd-hex","title":"Implement compact 3-line dashboard view","description":"Implement compact dashboard view for the TUI. Design: add --layout \u003cname\u003e flag to 'acd tui' command. When no flag is provided, use auto-detection based on terminal dimensions (height ≤ 5 lines → compact). Explicit flag overrides auto-detection. Initial layouts: 'compact' (3-line dashboard, one line per active session), default (current full session list). Future layouts: vertical, etc. The layout preset infrastructure already exists (session-status:compact, key 2 toggles) but rendering doesn't differentiate yet.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:29.232694+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:43:17.936471+01:00","dependencies":[{"issue_id":"acd-hex","depends_on_id":"acd-8uw","type":"blocks","created_at":"2026-02-08T22:43:23.88892+01:00","created_by":"Pablo LION"}]}
{"id":"acd-i4o","title":"Deep content audit of all 55 story files","description":"## Context\n\nStructural audit completed on 2026-01-30 (see docs/audits/2026-01-30-story-structural-audit.md).\nAll files pass structural validation (docs/docs-scripts/validate-stories.sh).\nThis task covers the CONTENT quality review that was not yet done.\n\n## Branch\n\nContinue on: docs/create-missing-stories\n\n## What to Check Per Story File\n\nFor each of the 55 story files in docs/stories/:\n\n1. **Description quality**: Clear user story format (\"As a..., I want..., So that...\")\n2. **Context section**: Explains WHY this story exists, not just WHAT\n3. **Implementation Details accuracy**: Files to modify/create match actual codebase structure\n   - Check paths like `src/daemon/server.rs` vs `crates/agent-console-dashboard/src/daemon/server.rs`\n   - Flag any paths that reference non-existent modules\n4. **Acceptance criteria**: Testable, specific, not vague\n5. **Dependencies**: Cross-references to other stories are accurate (correct story IDs, correct relationship)\n6. **Scope consistency with epic**: Story scope matches what the parent epic describes\n7. **Points estimation**: Reasonable relative to other stories (1=trivial, 2=small, 3=medium, 5=large)\n8. **Code examples**: If present, check they use correct crate/module names\n9. **Out of scope**: Items listed make sense and aren't things that should be in scope\n\n## Approach\n\n1. Read stories in epic order (E001 stories first, then E002, etc.)\n2. Read the parent epic first to understand goals\n3. Review each story against the checklist above\n4. Record findings per file in docs/audits/2026-01-30-story-content-audit.md\n5. Fix issues found\n6. Commit fixes\n\n## Already Verified (Do NOT Re-check)\n\n- File existence (all present)\n- Header format (Story ID, Epic link, Status, Priority, Points)\n- Required sections present (Description, Acceptance Criteria)\n- Epic links resolve to correct files\n- Epic story tables have hyperlinks\n- Sprint-status.yaml alignment\n- Story ID matches filename\n\n## Key Files\n\n- Validation script: docs/docs-scripts/validate-stories.sh\n- Structural audit: docs/audits/2026-01-30-story-structural-audit.md\n- Sprint status: planning-artifacts/sprint-status.yaml","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-30T17:55:53.788894+01:00","created_by":"Pablo LION","updated_at":"2026-01-30T19:21:46.215323+01:00","closed_at":"2026-01-30T19:21:46.215323+01:00","close_reason":"Content audit complete. First pass fixed 37 files (paths, E009 rewrite, stale refs). BMAD second pass scored 94% — 49/55 stories implementation-ready, 4 medium + 6 minor AC specificity issues remain."}
{"id":"acd-in9","title":"Update E009/E011 integration: daemon fetches usage, not TUI","description":"Code changes needed: TUI should no longer call claude_usage::get_usage() directly. Instead, daemon fetches every 3 minutes and broadcasts via subscription. Update any TUI code that imports claude-usage crate directly. Scope: crates/agent-console-dashboard/src/. See docs/architecture/2026-01-31-discussion-decisions.md D3-D4.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.328486+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T23:46:15.357091+01:00","closed_at":"2026-02-05T23:46:15.357091+01:00","close_reason":"UsageFetcher wired into daemon, SUB extended with USAGE messages, TUI receives and stores usage data"}
{"id":"acd-j4u","title":"Investigate usage fetch timer alignment and rounding","description":"Investigation complete. Timer uses tokio::interval(180s), no drift. Config usage_fetch_interval defined but NOT wired to daemon. D4 alignment concern deferred. Remaining work: (1) wire config to daemon, (2) investigate if rounding causes real issues, (3) consider API window boundary alignment.","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:00:31.576795+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:51.491247+01:00"}
{"id":"acd-jnd","title":"Make AUTO_STOP_IDLE_SECS configurable via config.toml","description":"Currently AUTO_STOP_IDLE_SECS is a hardcoded constant (3600). Allow overriding via [daemon] section in config.toml as an integer (seconds). No env var needed — this is stable config, not per-invocation.","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:11:27.767435+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T07:11:31.978136+01:00"}
{"id":"acd-lht","title":"Show \u003cerror\u003e in red instead of 'unknown' for missing working directory","description":"When a session has no working directory, the TUI shows 'unknown' in the working directory column. This is misleading — the JSON stdin from Claude Code always includes cwd, so a missing cwd means something went wrong. Display '\u003cerror\u003e' in red instead. Reserve 'unknown' for a true unknown state if one exists. This makes the error visible and debuggable.","status":"open","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:34.091679+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:14:34.091679+01:00"}
{"id":"acd-lj1","title":"Add uninstall command for agent-console-dashboard system","description":"Offer an option to fully uninstall the ACD system: remove hooks from Claude Code settings.json, remove service files (launchd/systemd), remove config files, remove socket file. Should be accessible via 'acd uninstall' CLI command.","notes":"Hooks uninstall portion done in acd-qe8. Remaining: launchd/systemd service file removal, config file removal, socket cleanup.","status":"open","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-02T09:55:57.018235+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:52:19.639919+01:00"}
{"id":"acd-ojb","title":"Update E001 daemon code: auto-stop 60min + actor model","description":"Code changes needed after epic amendments: (1) Update AUTO_STOP_IDLE_THRESHOLD_SECS from 1800 to 3600 in daemon code, (2) Refactor connection handling from tokio::spawn per connection to single-threaded actor model with mpsc queue, (3) Replace Arc\u003cRwLock\u003cHashMap\u003e\u003e with plain HashMap. Scope: crates/agent-console-dashboard/src/daemon/. See docs/architecture/2026-01-31-decision-amendments.md amendments 1-2.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.103218+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T09:08:36.54909+01:00","closed_at":"2026-02-05T09:08:36.54909+01:00","close_reason":"Split into focused issues: acd-2co (P1, idle timer implementation), acd-jnd (P4, configurability), acd-51l (P4, actor model deferred). Code audit found no deadlocks possible, one inconsequential TOCTOU. Current RwLock model is idiomatic Rust and correct for our scale."}
{"id":"acd-opf","title":"Republish claude-hooks v0.1.1 with two-layer safety","description":"Changes after initial publish (two-layer safety check) are not on crates.io yet. Bump version to v0.1.1 and republish.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:50.670104+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T19:30:56.045108+01:00","closed_at":"2026-02-04T19:30:56.045108+01:00","close_reason":"Published v0.1.1 with serial group fix"}
{"id":"acd-p6f","title":"Config documentation and acd config show command","description":"## Problem\n\nNo user-facing documentation on config options. Users don't know what settings exist,\nwhat the defaults are, or how to customize behavior. Three gaps:\n\n1. **No `acd config show`**: Users can create a config (`acd config init`), check\n   the path (`acd config path`), and validate (`acd config validate`), but cannot\n   view current effective values (defaults + file overrides + env var overrides).\n\n2. **No config reference docs**: The TOML schema defines fields like\n   `socket_path`, `tick_interval_secs`, `usage_fetch_interval`, `auto_stop_idle_secs`,\n   etc. but these are only documented in the source code. No user-facing reference.\n\n3. **No `--help` integration**: `acd config --help` shows subcommands but doesn't\n   explain what configuration controls.\n\n## Context\n\nConfig system implemented in E007. Config loading, XDG paths, TOML parsing all work.\nThe schema is defined in `src/config/` module. Default values documented in open\nquestions Q39. Environment variable overrides supported per Q64.\n\n## Acceptance Criteria\n\n- `acd config show` displays current effective config (resolved from defaults + file + env)\n- Config reference section added to README or as separate `docs/configuration.md`\n- Each config key documented with: type, default, description, env var override name","status":"open","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-09T07:40:52.858888+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T07:40:52.858888+01:00"}
{"id":"acd-qe8","title":"Install command: write hooks to ~/.claude/settings.json","description":"Plugin is not installed in Claude Code. .claude-plugin/ is a gitignored build artifact — Claude Code doesn't auto-discover it. Add 'acd install' command that writes hooks directly to ~/.claude/settings.json (user scope). Also add 'acd uninstall' to remove them. See docs/end-to-end-blockers.md B1+B6.","status":"closed","priority":0,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:36.803276+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.257828+01:00","closed_at":"2026-02-08T18:51:55.257828+01:00","close_reason":"Closed"}
{"id":"acd-qk2","title":"Plugin distribution strategy decision (B1+B4)","description":"## Problem\n\nTwo hook installation paths exist with no clear strategy for which to use when:\n\n| Path | Method | Audience | Status |\n|------|--------|----------|--------|\n| acd install | Writes to ~/.claude/settings.json | Personal use | Working |\n| .claude-plugin/plugin.json | Build artifact from build.rs | Distribution | Unclear |\n\n### Issues with the Plugin Path\n\n1. .claude-plugin/ is gitignored — won't ship via git clone\n2. Plugin marketplace discovery is undocumented — unclear how to publish\n3. claude plugin install requires a marketplace entry (local or remote)\n4. build.rs generates plugin.json but nobody can use it without the binary\n\n### Issues with settings.json Path\n\n1. Works perfectly for personal use\n2. Cannot distribute to others (requires them to have acd installed first)\n3. Hardcodes binary path — won't work if acd is at a different location\n\n### Decision Needed\n\nChoose one of:\n\nA. **settings.json only**: Remove plugin system from build.rs. acd install is the\n   only installation method. Distribution via cargo install + acd install.\n   Plugin marketplace not needed.\n\nB. **Both paths**: Keep plugin.json for future marketplace publishing. Use\n   acd install for now. Revisit plugin distribution when Claude Code marketplace\n   is more mature.\n\nC. **Plugin-first**: Research Claude Code plugin marketplace requirements. Publish\n   plugin. Make acd install a fallback for users who prefer manual setup.\n\n### Recommendation\n\nOption B (keep both, defer marketplace). The plugin infrastructure costs nothing\nto maintain (build.rs generates it automatically). When the marketplace matures,\nwe can publish without rework.\n\n## References\n\n- Blockers doc: B1 and B4\n- Claude Code plugins reference: https://code.claude.com/docs/en/plugins-reference","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-09T07:41:18.389394+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T07:41:18.389394+01:00"}
{"id":"acd-r4c","title":"Verify elicitation dialog → question state end-to-end","description":"We added Notification/elicitation_dialog → question hook mapping, but need to verify it works end-to-end: Claude Code fires the hook → acd receives it → TUI shows question status (blue ?). Also verify Notification/permission_prompt → attention works. Related: acd-g5h (AskUserQuestion hook behavior investigation).","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:39.041305+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:14:39.041305+01:00","dependencies":[{"issue_id":"acd-r4c","depends_on_id":"acd-g5h","type":"blocks","created_at":"2026-02-08T22:14:43.548313+01:00","created_by":"Pablo LION"}]}
{"id":"acd-r57","title":"Fix TUI layout — right-align columns, flexbox-style name column","description":"Current layout centers content. Change to: first column (session name) is flexible and grows/shrinks with terminal width. Last 3 columns (status, working directory, elapsed time) are right-aligned with fixed widths. Like CSS flexbox where name column is flex:1 and others are fixed.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:31.486474+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:14:31.486474+01:00","dependencies":[{"issue_id":"acd-r57","depends_on_id":"acd-lht","type":"blocks","created_at":"2026-02-08T22:43:23.64525+01:00","created_by":"Pablo LION"}]}
{"id":"acd-s07","title":"Replace silent \".\" fallback when cwd is absent from hook JSON","description":"When Claude Code hook JSON has no cwd field, run_set_command defaults to \".\" which resolves relative to the daemon's cwd, not the session's. This is semantically wrong — resurrection validation would pass incorrectly, and the dashboard shows useless \".\" as working dir. Needs design decision: use \"unknown\" sentinel, log a warning, or require cwd.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.285338+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:28:08.778259+01:00","closed_at":"2026-02-08T01:28:08.778259+01:00","close_reason":"Fixed: uses \u003cunknown\u003e sentinel + stderr warning instead of silent ."}
{"id":"acd-tvr","title":"Handle Claude Code hook JSON schema versioning","description":"Document the current Claude Code hook stdin JSON schema and the Claude Code version we support. Add version detection or a dispatcher if the JSON format changes in future Claude Code versions. Current schema has: session_id, transcript_path, cwd, permission_mode, hook_event_name. Event-specific: Stop has reason, UserPromptSubmit has user_prompt.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:01:56.107185+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T13:01:56.107185+01:00"}
{"id":"acd-tz3","title":"Wire lazy-start into claude-hook handler","description":"run_claude_hook_command() uses raw UnixStream::connect() via run_set_command(), bypassing the existing connect_with_auto_start() in client/connection.rs. The auto-start infrastructure (spawn daemon + exponential backoff retry) is built but not wired into the hook path. Fix: make the hook handler use connect_with_auto_start() so the daemon starts automatically on first hook trigger.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T15:17:00.493749+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T17:38:43.041967+01:00","closed_at":"2026-02-08T17:38:43.041967+01:00","close_reason":"Wired connect_with_lazy_start() into run_claude_hook_async(), daemon now auto-starts on first hook trigger","dependencies":[{"issue_id":"acd-tz3","depends_on_id":"acd-3kr","type":"blocks","created_at":"2026-02-08T15:22:45.117723+01:00","created_by":"Pablo LION"}]}
{"id":"acd-ubu","title":"Add pre-push hook with cargo doc and cargo test","description":"Create scripts/pre-push.sh that runs RUSTDOCFLAGS='-D warnings' cargo doc --workspace --no-deps --quiet and cargo test --workspace. build.rs installs the symlink alongside pre-commit.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:06.550947+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:00:24.323569+01:00","closed_at":"2026-02-08T01:00:24.323569+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-ubu","depends_on_id":"acd-bw4","type":"blocks","created_at":"2026-02-08T00:57:14.58858+01:00","created_by":"Pablo LION"}]}
{"id":"acd-uws","title":"Add --claude-path flag to acd service install","description":"Allow specifying the Claude CLI path instead of assuming it is on PATH. Over-engineering now, stored as a future idea for when we support multiple agent CLIs.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:01:53.062903+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T13:01:53.062903+01:00"}
{"id":"acd-vnd","title":"Fix dead code warnings for unused hook functions","description":"cleanup_existing_acd_hooks() and uninstall_acd_hooks() are unused. Either keep for future 'acd uninstall-hooks' CLI command or add #[allow(dead_code)] with comment explaining why.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:48.195917+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T15:26:40.660117+01:00","closed_at":"2026-02-07T15:26:40.660117+01:00","close_reason":"Obsolete: daemon/hooks.rs deleted entirely in plugin migration (acd-a81)"}
{"id":"acd-ynv","title":"Remove unnecessary inner mod wrapper in claude_hook integration tests","description":"tests/claude_hook.rs wraps everything in mod claude_hook { ... } which adds indentation without namespacing benefit (test files are already separate crates). Removing it would simplify the file. Low priority style improvement.","status":"closed","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.277703+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:20:57.291197+01:00","closed_at":"2026-02-08T01:20:57.291197+01:00","close_reason":"Closed"}
