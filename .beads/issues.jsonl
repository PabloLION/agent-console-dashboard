{"id":"acd-2co","title":"Implement auto-stop idle timer (60min constant)","description":"Add AUTO_STOP_IDLE_SECS = 3600 constant to daemon. Daemon should auto-stop when no sessions are active for 60 minutes. Logic lives in the main event loop (reset on any session activity, shut down when timer fires). Split from acd-ojb which bundled this with actor model refactor. Configurability deferred to acd-jnd (P4).","status":"open","priority":1,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T09:00:05.314162+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T09:00:05.314162+01:00"}
{"id":"acd-515","title":"Fix claude-hooks to use correct Claude Code hooks format","description":"The claude-hooks library uses wrong format. Expected object-based format with event keys: { \"hooks\": { \"Stop\": [{ \"hooks\": [...] }] } } but library uses array format { \"hooks\": [...] }. Need to update settings.rs and related code to handle actual Claude Code schema.","status":"closed","priority":1,"issue_type":"bug","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T21:33:36.775096+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T21:47:17.269398+01:00","closed_at":"2026-02-04T21:47:17.269398+01:00","close_reason":"Fixed claude-hooks library to use correct Claude Code hooks format (object-based instead of array-based). Updated all test files including edge_cases.rs, performance.rs, and atomic_safety.rs."}
{"id":"acd-51l","title":"Consider actor model refactor for daemon (deferred)","description":"Amendment 2 in decision-amendments.md proposed replacing tokio::spawn-per-connection + Arc\u003cRwLock\u003cHashMap\u003e\u003e with single-threaded actor model + plain HashMap. After analysis, decided to defer: Rust type system already prevents data races, TOCTOU risk is marginal at \u003c50 connections, and the refactor touches ~1600 lines across server.rs/store.rs/usage.rs. Revisit if: (1) actual concurrency bugs appear, (2) connection count grows significantly, or (3) lock contention shows up in profiling. See discussion in devlog.","status":"open","priority":4,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:31:09.025911+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T07:31:09.025911+01:00"}
{"id":"acd-63c","title":"Update E002 session code: verify session_id from JSON stdin","description":"Verify session management code uses session_id from JSON stdin (not basename PWD). Check any hook script examples or test fixtures that use the old pattern. Scope: crates/agent-console-dashboard/src/ session-related code. See docs/architecture/2026-01-31-decision-amendments.md and Q16.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.214276+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T21:37:30.87694+01:00","closed_at":"2026-02-05T21:37:30.87694+01:00","close_reason":"Verified: all hook scripts parse session_id from JSON stdin. Fixed stale $SESSION_ID $ARGS placeholders in daemon/mod.rs command templates. No code uses basename PWD."}
{"id":"acd-8yv","title":"Rename cargo package agent-console to agent-console-dashboard","description":"Package name 'agent-console' doesn't match repo name 'agent-console-dashboard' or directory 'crates/agent-console-dashboard/'. Rename package to 'agent-console-dashboard', update lib name to 'agent_console_dashboard', and update all imports. Binary stays 'acd'.","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T21:30:50.820146+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T21:30:50.820146+01:00"}
{"id":"acd-9pq","title":"Verify hook scripts exist at referenced paths","description":"Daemon references /path/to/hooks/*.sh but scripts may not exist. Check if E006 (S006) created these scripts and update paths if needed.","status":"open","priority":2,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:49.579311+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T19:27:49.579311+01:00"}
{"id":"acd-g5h","title":"Investigate AskUserQuestion hook behavior in Claude Code","description":"Verify whether AskUserQuestion triggers any Claude Code hook (PreToolUse, Notification, etc). If it does, determine if it causes duplicate status updates. Log both JSON stdin session_id and CC_SESSION_ID env var, compare if they differ. Track across Claude Code versions.","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T13:45:16.412777+01:00","created_by":"Pablo LION","updated_at":"2026-01-31T13:45:16.412777+01:00"}
{"id":"acd-i4o","title":"Deep content audit of all 55 story files","description":"## Context\n\nStructural audit completed on 2026-01-30 (see docs/audits/2026-01-30-story-structural-audit.md).\nAll files pass structural validation (docs/docs-scripts/validate-stories.sh).\nThis task covers the CONTENT quality review that was not yet done.\n\n## Branch\n\nContinue on: docs/create-missing-stories\n\n## What to Check Per Story File\n\nFor each of the 55 story files in docs/stories/:\n\n1. **Description quality**: Clear user story format (\"As a..., I want..., So that...\")\n2. **Context section**: Explains WHY this story exists, not just WHAT\n3. **Implementation Details accuracy**: Files to modify/create match actual codebase structure\n   - Check paths like `src/daemon/server.rs` vs `crates/agent-console-dashboard/src/daemon/server.rs`\n   - Flag any paths that reference non-existent modules\n4. **Acceptance criteria**: Testable, specific, not vague\n5. **Dependencies**: Cross-references to other stories are accurate (correct story IDs, correct relationship)\n6. **Scope consistency with epic**: Story scope matches what the parent epic describes\n7. **Points estimation**: Reasonable relative to other stories (1=trivial, 2=small, 3=medium, 5=large)\n8. **Code examples**: If present, check they use correct crate/module names\n9. **Out of scope**: Items listed make sense and aren't things that should be in scope\n\n## Approach\n\n1. Read stories in epic order (E001 stories first, then E002, etc.)\n2. Read the parent epic first to understand goals\n3. Review each story against the checklist above\n4. Record findings per file in docs/audits/2026-01-30-story-content-audit.md\n5. Fix issues found\n6. Commit fixes\n\n## Already Verified (Do NOT Re-check)\n\n- File existence (all present)\n- Header format (Story ID, Epic link, Status, Priority, Points)\n- Required sections present (Description, Acceptance Criteria)\n- Epic links resolve to correct files\n- Epic story tables have hyperlinks\n- Sprint-status.yaml alignment\n- Story ID matches filename\n\n## Key Files\n\n- Validation script: docs/docs-scripts/validate-stories.sh\n- Structural audit: docs/audits/2026-01-30-story-structural-audit.md\n- Sprint status: planning-artifacts/sprint-status.yaml","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-30T17:55:53.788894+01:00","created_by":"Pablo LION","updated_at":"2026-01-30T19:21:46.215323+01:00","closed_at":"2026-01-30T19:21:46.215323+01:00","close_reason":"Content audit complete. First pass fixed 37 files (paths, E009 rewrite, stale refs). BMAD second pass scored 94% — 49/55 stories implementation-ready, 4 medium + 6 minor AC specificity issues remain."}
{"id":"acd-in9","title":"Update E009/E011 integration: daemon fetches usage, not TUI","description":"Code changes needed: TUI should no longer call claude_usage::get_usage() directly. Instead, daemon fetches every 3 minutes and broadcasts via subscription. Update any TUI code that imports claude-usage crate directly. Scope: crates/agent-console-dashboard/src/. See docs/architecture/2026-01-31-discussion-decisions.md D3-D4.","status":"in_progress","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.328486+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T23:39:10.8981+01:00"}
{"id":"acd-j4u","title":"Investigate usage fetch timer alignment and rounding","description":"Investigate potential mismatch between 3-minute fetch interval and API tracking window rounding. When displayed percentages are rounded, they may fall into adjacent 3-minute buckets. Also consider: (1) fetch interval vs tracking interval alignment, (2) how many active TUIs affect fetch behavior (currently: fetch only when \u003e=1 TUI subscribed), (3) edge cases when TUI connects mid-interval. Related: D4 in docs/architecture/2026-01-31-discussion-decisions.md","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:00:31.576795+01:00","created_by":"Pablo LION","updated_at":"2026-01-31T05:00:31.576795+01:00"}
{"id":"acd-jnd","title":"Make AUTO_STOP_IDLE_SECS configurable via config.toml","description":"Currently AUTO_STOP_IDLE_SECS is a hardcoded constant (3600). Allow overriding via [daemon] section in config.toml as an integer (seconds). No env var needed — this is stable config, not per-invocation.","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:11:27.767435+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T07:11:31.978136+01:00"}
{"id":"acd-lj1","title":"Add uninstall command for agent-console-dashboard system","description":"Offer an option to fully uninstall the ACD system: remove hooks from Claude Code settings.json, remove service files (launchd/systemd), remove config files, remove socket file. Should be accessible via 'acd uninstall' CLI command.","status":"open","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-02T09:55:57.018235+01:00","created_by":"Pablo LION","updated_at":"2026-02-02T09:55:57.018235+01:00"}
{"id":"acd-ojb","title":"Update E001 daemon code: auto-stop 60min + actor model","description":"Code changes needed after epic amendments: (1) Update AUTO_STOP_IDLE_THRESHOLD_SECS from 1800 to 3600 in daemon code, (2) Refactor connection handling from tokio::spawn per connection to single-threaded actor model with mpsc queue, (3) Replace Arc\u003cRwLock\u003cHashMap\u003e\u003e with plain HashMap. Scope: crates/agent-console-dashboard/src/daemon/. See docs/architecture/2026-01-31-decision-amendments.md amendments 1-2.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.103218+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T09:08:36.54909+01:00","closed_at":"2026-02-05T09:08:36.54909+01:00","close_reason":"Split into focused issues: acd-2co (P1, idle timer implementation), acd-jnd (P4, configurability), acd-51l (P4, actor model deferred). Code audit found no deadlocks possible, one inconsequential TOCTOU. Current RwLock model is idiomatic Rust and correct for our scale."}
{"id":"acd-opf","title":"Republish claude-hooks v0.1.1 with two-layer safety","description":"Changes after initial publish (two-layer safety check) are not on crates.io yet. Bump version to v0.1.1 and republish.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:50.670104+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T19:30:56.045108+01:00","closed_at":"2026-02-04T19:30:56.045108+01:00","close_reason":"Published v0.1.1 with serial group fix"}
{"id":"acd-vnd","title":"Fix dead code warnings for unused hook functions","description":"cleanup_existing_acd_hooks() and uninstall_acd_hooks() are unused. Either keep for future 'acd uninstall-hooks' CLI command or add #[allow(dead_code)] with comment explaining why.","status":"open","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:48.195917+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T19:27:48.195917+01:00"}
