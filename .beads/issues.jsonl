{"id":"acd-04g","title":"Decide plugin.json vs settings.json hook strategy","description":"plugin.json embeds hooks inline (valid per docs) but becomes irrelevant if install command writes to ~/.claude/settings.json. Decision: keep plugin.json for distribution AND settings.json for personal use? Or drop the plugin approach? See docs/end-to-end-blockers.md B4.","status":"closed","priority":1,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:42.968881+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:45:03.57473+01:00","closed_at":"2026-02-08T18:45:03.57473+01:00","close_reason":"Decision: keep both. plugin.json (build.rs) for future distribution via marketplace. settings.json (acd install) for personal/immediate use. They serve different scopes and don't conflict."}
{"id":"acd-0ab","title":"Investigate: session resume/continue doesn't fire SessionStart hook","description":"SessionStart fires on resume (source field = 'resume'|'clear'|'compact'|'startup'). But user observed that resuming a closed session didn't update TUI.\n\nPossible explanations:\n1. SessionStart fired but daemon treated it as update to existing closed session (no status change visible)\n2. The daemon receives 'attention' for SessionStart — if session was already 'closed', does it reopen?\n3. Race condition between hook and TUI refresh\n\nCurrent daemon behavior: when a SET command arrives for a session that was marked closed, does it reopen? Need to verify in store code.\n\nKey: session_id is stable across resume/clear/compact. The daemon will see the same session_id for the resumed session.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T15:11:03.227999+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T00:29:14.161013+01:00","closed_at":"2026-02-13T00:29:14.161013+01:00","close_reason":"Non-issue: user already has direct visibility when resuming a session. Next UserPromptSubmit hook updates TUI within seconds anyway."}
{"id":"acd-0ci","title":"Unit test: directory basename disambiguation","description":"Create a unit test verifying that two sessions with the same directory basename (e.g., /foo/project and /bar/project) are disambiguated with the parent directory name in the TUI display. Use TestBackend — no daemon or real TUI needed. The disambiguation logic is in format_directory() or the dashboard rendering code.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T15:05:17.671575+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:59:00.497567+01:00","closed_at":"2026-02-14T04:59:00.497567+01:00","close_reason":"Added 3 TestBackend rendering tests for directory basename disambiguation."}
{"id":"acd-0f0","title":"Mock sessions with custom timestamps for testing","description":"Need a way to create fake/mock sessions with overridden timestamps for testing scenarios like:\n- Inactive sessions (created 1 hour ago)\n- Sessions with specific status history timing\n\nChallenge: verification layer may drop overridden values. Need to design an interface that bypasses or works with validation.\n\nUse cases:\n1. Manual smoke testing (create inactive sessions without waiting 1 hour)\n2. E2E tests (deterministic session states)\n3. TUI development (test visual treatments)\n\nDesign TBD — discuss when working on this issue.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T15:05:12.096091+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T15:05:12.096091+01:00","labels":["needs-design"]}
{"id":"acd-0hd","title":"Investigate narrow terminal responsive layout (\u003c40 cols)","description":"Smoke test: narrow terminal (\u003c40 cols) should show simplified layout with no column headers. User reports not seeing this behavior. Investigate whether responsive layout is implemented or just documented as a goal.\n\nAlso: debug bar should show layout mode changes when AGENT_CONSOLE_DASHBOARD_DEBUG=1.","status":"open","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T15:05:14.773914+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T15:05:14.773914+01:00","labels":["needs-design"]}
{"id":"acd-0hx","title":"Delete integrations/zellij module","description":"## Parent\n\nSub-issue of acd-bwa cleanup.\n\n## Scope\n\nDelete the integrations/zellij module which is dead code after hook-based\nreopen replaces multiplexer-aware resurrection.\n\n### Files to delete\n\n- src/integrations/zellij.rs\n- src/integrations/mod.rs\n\n### Files to update\n\n- src/lib.rs: remove `pub mod integrations;`\n- Any imports referencing integrations::zellij\n\n### Depends on\n\n- acd-1j2 (TUI hooks — last consumer of ResurrectionResult)\n- acd-jau (CLI remove — last consumer of resurrect_session)","status":"closed","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T02:23:54.617352+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T16:34:02.139752+01:00","closed_at":"2026-02-15T16:34:02.139752+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-0hx","depends_on_id":"acd-jau","type":"blocks","created_at":"2026-02-15T02:24:00.286274+01:00","created_by":"Pablo LION"}]}
{"id":"acd-0i4i","title":"TUI: show API usage in bottom-right of full-width layout footer","description":"Show API usage SHORT mode in bottom-right of large layout footer. Split footer: keybinding hints left, API usage right.\n\nSHORT format: [5h:8% 7d:77%] (brackets style, no spaces around colon)\n\nThe widget already exists at widgets/api_usage.rs with real data. Render the short format string right-aligned in the footer where the version string used to be (version moved to header per acd-mq6y, already done).\n\nOnly two API usage modes exist: short and long. The old \"full\" mode is dropped — remove any references to it. Long mode is defined separately in acd-elrc.\n\nAgent: tui-visual.","notes":"Design update from user discussion:\n\nNAMING: API usage widget modes renamed:\n- 'compact' → 'short' (e.g., '[5h:8% 7d:77%]')\n- 'full' mode DROPPED (no longer makes sense)\n- 'long' = new mode described in acd-elrc (time elapsed + quota)\nOnly two modes going forward: short and long.\n\nFOOTER: Put SHORT mode in footer bottom-right. Split footer layout: keybinding hints left, API usage short right.\n\nLAYOUT NAMING: Call it 'large layout' for now. Naming refactor later (acd-zcjx).\n\nRELATED: acd-elrc defines the 'long' mode format. These two issues are linked — 0i4i puts short mode in footer, elrc defines the long mode for use elsewhere.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T01:04:36.411223+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T00:08:04.027401+01:00","closed_at":"2026-02-17T00:08:04.027401+01:00","close_reason":"API usage SHORT format in footer right-aligned. Commit: ee9eb6b","dependencies":[{"issue_id":"acd-0i4i","depends_on_id":"acd-mq6y","type":"blocks","created_at":"2026-02-16T01:05:53.905916+01:00","created_by":"Pablo LION"}]}
{"id":"acd-0ll","title":"Discuss logging UX: --debug flag vs ACD_LOG env var","description":"Current logging uses ACD_LOG env var (tracing/EnvFilter). Works but requires: ACD_LOG=debug acd daemon. User considered --debug/-d flags but deferred the decision. Options: (1) keep env var only, (2) add --debug flag that sets ACD_LOG=debug, (3) add --log-level flag. Discuss and decide.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:33.587998+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T10:27:33.587998+01:00"}
{"id":"acd-0o2","title":"Create development shell scripts + document in scripts/README.md","description":"## Scope\n\nCreate organized shell scripts in `scripts/` for common development tasks, and document them in `scripts/README.md`.\n\n### Scripts to create\n- `scripts/test.sh` — run full test suite (`cargo test --workspace`)\n- `scripts/lint.sh` — check formatting + clippy (`cargo fmt --check \u0026\u0026 cargo clippy`)\n- `scripts/fmt.sh` — auto-fix formatting (`cargo fmt --all`)\n- `scripts/build.sh` — build workspace (`cargo build --workspace`)\n- `scripts/doc.sh` — build docs (`cargo doc --workspace --no-deps`)\n\nExisting scripts stay: `scripts/pre-commit.sh`, `scripts/pre-push.sh`, `scripts/post-merge.sh`\n\n### Documentation\n- Create `scripts/README.md` listing all scripts with descriptions and usage\n- In `AGENTS.md`: add `@scripts/README.md` to import the script list\n- In project `README.md`: link to `scripts/README.md`\n\n### Design decision\nChose shell scripts over `just` or `cargo xtask` (see acd-n7r discussion).\nReason: zero dependencies, Git Bash covers Windows, our tasks are simple cargo wrappers.\n\n### Agent: build-tooling","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T23:05:20.531243+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T23:11:06.242471+01:00","closed_at":"2026-02-15T23:11:06.242471+01:00","close_reason":"5 dev scripts + README + AGENTS.md @import + README update. Commit: 27e344f"}
{"id":"acd-0uz","title":"TUI: directory should be first column","description":"Directory column is currently after name and status. User wants it as the first column (after status symbol). Column order should be: symbol → directory → session ID → status → elapsed.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:10.557611+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.020316+01:00","closed_at":"2026-02-10T12:40:18.020319+01:00"}
{"id":"acd-11x","title":"Add acd daemon restart convenience command","description":"Convenience command: acd daemon restart = acd daemon stop --force \u0026\u0026 acd daemon start. Useful when changing ACD_LOG or other env vars that only take effect at startup.","status":"closed","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-14T04:40:59.786244+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:58:13.097586+01:00","closed_at":"2026-02-14T04:58:13.097586+01:00","close_reason":"Implemented acd daemon restart = stop --force + start. 4 tests added."}
{"id":"acd-16p","title":"TUI right-side truncation: scrollbar hides 2-3 chars in macOS Terminal","description":"TUI right-side truncation caused by highlight marker width not accounted for in column layout. Root cause: highlight_symbol(\"▸ \") adds 2 chars to list items, but format_session_line() calculates content at full terminal width. Result: content (width) + highlight (2) = width+2, rightmost 2 chars overflow. Also: cell content should be left-aligned (status and elapsed are currently right-aligned). Header \"Elapsed\" should be renamed to \"Time Elapsed\". Cell content alignment: all left-aligned, trailing padding. Column alignment: 3 fixed-width columns on right side of table. Update from previous description: Originally thought macOS Terminal.app scrollbar was the cause. User discovered it is the highlight/focus marker pushing content right by 2 chars.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T00:24:40.292858+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.988776+01:00","closed_at":"2026-02-12T05:40:26.988776+01:00","close_reason":"Closed"}
{"id":"acd-1bo","title":"Create agent-console placeholder crate on crates.io","description":"Publish a minimal agent-console crate to crates.io to reserve the name. The real app will be developed in a separate repository. This is just name reservation.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:10.638015+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T00:57:10.638015+01:00"}
{"id":"acd-1ih","title":"Bug: all sessions show same time elapsed (Instant serialization)","description":"All sessions in the TUI show the same elapsed time. Likely cause: Instant (process-local monotonic clock) cannot survive IPC serialization. When the TUI deserializes sessions from the daemon, it reconstructs each with Instant::now(), making all sessions appear to start simultaneously. The daemon knows the real timestamps but they get lost over the wire. Fix: serialize elapsed duration or a relative timestamp instead of Instant.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:25.542703+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:43:05.343127+01:00","closed_at":"2026-02-10T12:43:05.343127+01:00","close_reason":"TUI now parses elapsed_seconds from daemon and backdates Instant for correct per-session timing"}
{"id":"acd-1j2","title":"TUI: wire activate_hook + reopen_hook to double-click and keybindings","description":"## Parent\n\nSub-issue of acd-bwa (redesign resurrect → reopen).\n\n## Scope\n\nUpdate TUI to use the renamed/new hooks from config:\n\n### Double-click behavior (same gesture, context-sensitive)\n\n- Double-click on non-closed session → fire `activate_hook` (renamed from double_click_hook)\n- Double-click on closed session → fire `reopen_hook` (new)\n- No hook configured → show status bar message (same UX as before)\n\n### Keybindings\n\n- Enter on active/non-closed session → fire activate_hook\n- Enter or 'r' on closed session → fire reopen_hook\n\n### App struct changes\n\n- Rename `double_click_hook` field → `activate_hook: Option\u003cString\u003e`\n- Add `reopen_hook: Option\u003cString\u003e`\n- Update `handle_mouse_event` double-click path to check session status\n- Update `handle_key_event` for Enter/r\n\n### Config field type refactor\n\nBoth hook fields must be `Option\u003cString\u003e` (None = no hook). This means:\n- Change config schema: `activate_hook` and `reopen_hook` are `Option\u003cString\u003e`\n  with serde default None. TOML `activate_hook = \"cmd\"` → Some, absent → None.\n- Change App struct: `activate_hook: Option\u003cString\u003e` (was `double_click_hook`)\n- Update main.rs config loading to pass Option directly (remove is_empty check)\n\n### Hook execution\n\nSame pattern as current double_click_hook:\n- Substitute placeholders: {session_id}, {working_dir}, {status}\n- Pipe SessionSnapshot JSON to stdin\n- Fire-and-forget via sh -c\n\n### Reopen is LOCAL only\n\nDo NOT send IPC REOPEN to daemon. TUI just fires the hook and shows the session\nas Attention locally. Broadcasting to daemon is deferred to acd-398 (P4).\n\n### Files to change\n\n- src/config/schema.rs (field type: String → Option\u003cString\u003e for both hooks)\n- src/tui/app/mod.rs (App struct, handle_mouse_event, execute hooks)\n- src/tui/event/ (handle_key_event for Enter/r)\n- src/tui/app/tests/interaction.rs (update tests)\n- src/main.rs (config loading — pass Option directly)\n\n### Depends on\n\n- acd-3qx (daemon reopen handler — done)\n- acd-puk (config schema — done)","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T02:23:42.286628+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T18:57:21.322634+01:00","closed_at":"2026-02-15T18:57:21.322634+01:00","close_reason":"activate_hook + reopen_hook wired to TUI. Context-sensitive double-click/Enter/r. 8 new tests. Commit: 2eaafa6","dependencies":[{"issue_id":"acd-1j2","depends_on_id":"acd-3qx","type":"blocks","created_at":"2026-02-15T02:23:59.56305+01:00","created_by":"Pablo LION"},{"issue_id":"acd-1j2","depends_on_id":"acd-puk","type":"blocks","created_at":"2026-02-15T02:23:59.731775+01:00","created_by":"Pablo LION"}]}
{"id":"acd-1v1","title":"Extract tests: daemon/handlers.rs + client/connection.rs","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T15:28:11.320547+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T21:57:04.34446+01:00","closed_at":"2026-02-13T21:57:04.34446+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-1v1","depends_on_id":"acd-xqx","type":"blocks","created_at":"2026-02-13T15:28:16.652932+01:00","created_by":"Pablo LION"},{"issue_id":"acd-1v1","depends_on_id":"acd-s27","type":"blocks","created_at":"2026-02-13T15:28:16.77234+01:00","created_by":"Pablo LION"}]}
{"id":"acd-20j","title":"Copy button/emoji for session info in TUI","description":"Add a copy indicator (emoji or icon) in the TUI row. When user clicks it, copy session info to clipboard. Exact UX TBD.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:32.166207+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:19:32.166207+01:00"}
{"id":"acd-211","title":"Implement TUI TestBackend tests (TDD)","description":"Write 46 TUI tests using ratatui TestBackend per docs/uncategorized/tui-test-plan.md. Shared helpers in src/tui/test_utils.rs. Work in feat/tui-tests worktree. Resumable agents: ae91266 (test expert), abbc188 (UI expert).","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:23.249815+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T21:41:51.574345+01:00","closed_at":"2026-02-11T21:41:51.574345+01:00","close_reason":"Closed"}
{"id":"acd-2co","title":"Implement auto-stop idle timer (60min constant)","description":"Add AUTO_STOP_IDLE_SECS = 3600 constant to daemon. Daemon should auto-stop when no sessions are active for 60 minutes. Logic lives in the main event loop (reset on any session activity, shut down when timer fires). Split from acd-ojb which bundled this with actor model refactor. Configurability deferred to acd-jnd (P4).","status":"closed","priority":1,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T09:00:05.314162+01:00","created_by":"Pablo LION","updated_at":"2026-02-06T22:13:38.632781+01:00","closed_at":"2026-02-06T22:13:38.632781+01:00","close_reason":"Implemented: idle auto-stop timer with AUTO_STOP_IDLE_SECS=3600 constant, merged to master"}
{"id":"acd-2jp","title":"CLI tree redesign: group subcommands by domain","description":"## Problem\n\nCurrent CLI tree is flat and disorganized. Too many top-level commands (width)\nwithout enough depth. Commands from different domains (daemon, session, config)\nare mixed at the same level.\n\n## Current tree (v0.1.2)\n\n```text\nacd\n├── tui [--socket]\n├── status [--socket]                          # daemon-specific\n├── dump [--socket] [--format]                 # daemon-specific\n├── config {init,path,validate,show,edit}\n├── resurrect \u003csession_id\u003e [--socket] [--quiet]  # session-specific\n├── set \u003csession_id\u003e \u003cstatus\u003e [--working-dir]    # session-specific\n├── daemon {start,stop,restart}\n├── claude-hook \u003cstatus\u003e [--socket]            # internal hook handler\n├── install\n└── uninstall\n```\n\n## Proposed tree\n\n```text\nacd\n├── tui [--socket]\n├── daemon\n│   ├── start [--socket] [--detach]\n│   ├── stop [--socket] [--force]\n│   ├── restart [--socket] [--detach]\n│   ├── status [--socket]                      ← moved from top level\n│   └── dump [--socket] [--format]             ← moved from top level\n├── session\n│   ├── set \u003cid\u003e \u003cstatus\u003e [--priority] [--working-dir]  ← moved, extended\n│   ├── list [--socket]                        ← new\n│   └── reopen \u003cid\u003e [--socket]                 ← renamed from resurrect, moved\n├── config\n│   ├── init [--force]\n│   ├── path\n│   ├── validate\n│   ├── show\n│   └── edit\n├── claude-hook \u003cstatus\u003e [--socket]            # stays (internal, referenced by hooks)\n├── install\n└── uninstall\n```\n\n## Key decisions (from discussion)\n\n- `status` and `dump` move under `daemon` — they are daemon diagnostics\n- `set` and `resurrect` move under `session` — they are session operations\n- `resurrect` renamed to `reopen` (see acd-bwa for hook design)\n- `--priority` added to `session set` (Option A from priority discussion)\n- `claude-hook` stays at top level (internal, referenced by installed hooks)\n- Clean break (no backwards-compat aliases) — pre-1.0, no external users\n- `session list` added — currently sessions only visible via dump or TUI\n- `tui`, `config`, `install`, `uninstall` stay at top level\n\n## Scope\n\n- Move existing commands into new groups (clap nested subcommands)\n- Update `acd install` to reference new paths if any hook commands changed\n- Update tests that reference old command names\n- Update docs referencing old commands","notes":"Design question resolved (2026-02-15): Use single `update` command.\n\n`acd session update \u003cid\u003e [--status] [--priority] [--working-dir]`\n\nReasons: atomic (one IPC call), conventional (matches kubectl/gh/docker),\nfewer keystrokes. `set` rejected as primary name — `update` is the standard\nCRUD verb for partial modification. No flags = warning, nonexistent ID = error.\n\nDecision document: docs/decisions/session-update-command.md\n\nScope narrowed (2026-02-15):\n- `session reopen` removed — reopen is TUI-only (acd-bwa). Deferred: acd-9ws (P4)\n- `session list` removed — not needed for v0. Deferred: acd-eem (P4)\n- `session activate` removed — not needed for v0. Deferred: acd-4of (P4)\n- Remaining scope: restructure CLI tree (move commands into groups) + rename set → update","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-14T11:23:12.722069+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T21:02:47.10698+01:00","closed_at":"2026-02-15T21:02:47.10698+01:00","close_reason":"CLI tree restructured: status/dump under daemon, set→update under session. 5 files, 7 new tests. Commit: 0808a65","dependencies":[{"issue_id":"acd-2jp","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-14T11:23:35.838107+01:00","created_by":"Pablo LION"},{"issue_id":"acd-2jp","depends_on_id":"acd-nd1","type":"blocks","created_at":"2026-02-14T11:23:35.957096+01:00","created_by":"Pablo LION"}]}
{"id":"acd-2n6","title":"Add missing hook events: SessionEnd, Notification","description":"Only 3 of 14 hook events are registered. Missing critical events: SessionEnd → closed (sessions never close), Notification/elicitation_dialog → question (AskUserQuestion), Notification/permission_prompt → attention. Must also verify Status enum accepts 'closed' and 'question' via claude-hook subcommand. See docs/end-to-end-blockers.md B3.","status":"closed","priority":1,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:40.98283+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.261217+01:00","closed_at":"2026-02-08T18:51:55.261217+01:00","close_reason":"Closed"}
{"id":"acd-2olq","title":"History display: per-state duration format in detail panel","description":"Change the detail panel history display from 'time since transition' to 'duration in each state'.\n\nCurrent: shows relative time like 'some time ago' for each transition.\nNew: shows per-state duration in the most recent state transition sequence.\nExample: 'working 10m | attention 2m | question 30s'\n\n- Show the most recent transition sequence (not aggregated totals across all visits to a state)\n- All entries except the last are FIXED (historical, won't change)\n- The LAST entry is DYNAMIC: shows time from last transition to now, updates once per second (same tick rate as current implementation)\n- Duration format: use the CURRENT time format function as-is (no format changes in this issue)\n- Overflow handling: NOT in scope (separate TUI issue)\n- Time format refactoring: NOT in scope (separate refactor issue)\n\nScope is strictly: change the data source from 'time since transition' to 'duration in each state'. No TUI layout changes, no format changes.\n\nAgent: tui-visual.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T04:02:08.56396+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T22:50:33.163475+01:00","closed_at":"2026-02-16T22:50:33.163475+01:00","close_reason":"Per-state duration in detail panel. Commit: 9cbcf45"}
{"id":"acd-2ou","title":"No highlight when no session selected; click header to deselect","description":"No highlight when no session selected. Clicking table header should clear selection. Research: check if ratatui List widget supports selected=None. Workaround if not: add an invisible/guide row at top (e.g. 'Use arrow keys to select') that acts as the deselected state. When selection is None, select the guide row which shows usage hints.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:30.506343+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.874203+01:00","closed_at":"2026-02-12T00:13:22.874203+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-2rk","title":"Add debug mode with column ruler for TUI border visualization","description":"When AGENT_CONSOLE_DASHBOARD_DEBUG=1 is set, show a ruler line in the TUI that counts columns from the right edge: 9 8 7 6 5 4 3 2 1 0 (where 0 is the rightmost character). Purpose: diagnose terminal clipping issues like scrollbar overlap. Lower priority since highlight marker width was identified as the real truncation cause.","status":"closed","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:18.385975+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.01871+01:00","closed_at":"2026-02-12T05:40:27.01871+01:00","close_reason":"Closed"}
{"id":"acd-2zh","title":"Add SessionStore::has_active_sessions() to avoid clone-all in idle check","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T21:40:34.8905+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:29:13.424576+01:00","closed_at":"2026-02-08T01:29:13.424576+01:00","close_reason":"Added has_active_sessions(), updated idle_check_loop to use it"}
{"id":"acd-35c","title":"Create root README.md","description":"No documentation for new users. Create README.md with: overview, installation, setup (acd install), usage (acd tui), CLI reference. See docs/end-to-end-blockers.md B5.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:44.473255+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:49.735561+01:00","closed_at":"2026-02-08T22:57:49.735561+01:00","close_reason":"README.md written by tech-writer agent. Covers quick start, commands, architecture, development, project structure."}
{"id":"acd-36h","title":"Protect main branch and require PRs for CI","description":"Stop running CI on every push to main. Protect main branch so even administrators cannot push directly — all changes must go through PRs. This prevents unnecessary CI runs and enforces review workflow. Steps: 1) Add branch protection rules on GitHub (require PR, no direct push, include administrators), 2) Update CI workflow to only run on pull_request events (not push to main), 3) Optionally keep push-triggered CI for other branches.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:52:26.352701+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:57:09.254811+01:00","closed_at":"2026-02-08T22:57:09.254811+01:00","close_reason":"Branch protection configured: required CI checks (5 jobs), required PRs (0 approvals), enforce_admins=false for owner bypass, no force pushes or deletions."}
{"id":"acd-398","title":"Evaluate: should TUI broadcast reopen to daemon?","description":"When a user reopens a closed session via TUI double-click, the TUI currently\nhandles it locally (sets status to Attention in UI). Should the TUI also send\nan IPC REOPEN command to the daemon so the daemon knows the session is active?\n\nPros of broadcasting: daemon state stays accurate, other TUI consumers see\nthe change.\n\nCons: TUI currently only receives from daemon (subscription), never sends.\nAdding send capability increases complexity significantly.\n\nDeferred from acd-1j2 to avoid scope creep.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T03:32:46.416169+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T03:32:46.416169+01:00"}
{"id":"acd-3cv","title":"Add mouse/cursor interaction to TUI","description":"Investigate and implement mouse interaction in the TUI — text selection, click to select session, scroll, etc. Ratatui supports mouse events (MouseEvent, crossterm mouse capture). Scope TBD during implementation.","status":"closed","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:36.185033+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:55:01.283038+01:00","closed_at":"2026-02-10T11:55:01.283038+01:00","close_reason":"Implemented: click/double-click/scroll. Redesign needed: acd-bbh (left click shows details below, not popup) + acd-79b (double-click fires configurable hook from config)","dependencies":[{"issue_id":"acd-3cv","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-08T22:43:24.124236+01:00","created_by":"Pablo LION"}]}
{"id":"acd-3kr","title":"Rename auto-start to lazy-start in codebase","description":"Rename all auto_start/auto-start references to lazy_start/lazy-start for consistency with the new design. Includes: connect_with_auto_start() -\u003e connect_with_lazy_start(), comments, module docs, error messages. Related to acd-tz3 (wire lazy-start into hook handler).","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T15:22:41.598744+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T15:26:49.679397+01:00","closed_at":"2026-02-08T15:26:49.679397+01:00","close_reason":"renamed all auto-start references to lazy-start across 4 files"}
{"id":"acd-3le","title":"Delete terminal/ module (environment + executor)","description":"## Parent\n\nSub-issue of acd-bwa cleanup.\n\n## Scope\n\nDelete the terminal/ module which is dead code after integrations/zellij\nis removed. Contains TerminalEnvironment enum and execute_in_terminal().\n\n### Files to delete\n\n- src/terminal/mod.rs\n- src/terminal/environment.rs\n- src/terminal/executor.rs\n\n### Files to update\n\n- src/lib.rs: remove `pub mod terminal;`\n- Any imports referencing terminal::\n\n### Depends on\n\n- integrations/zellij deletion (zellij.rs imports from terminal/)","status":"closed","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T02:23:54.816549+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T18:25:07.429216+01:00","closed_at":"2026-02-15T18:25:07.429216+01:00","close_reason":"terminal/ module deleted (3 files + lib.rs mod declaration). All tests pass. Commit: e0f8647","dependencies":[{"issue_id":"acd-3le","depends_on_id":"acd-0hx","type":"blocks","created_at":"2026-02-15T02:24:00.410238+01:00","created_by":"Pablo LION"}]}
{"id":"acd-3q0z","title":"TUI: add priority column and reorder columns to match sort order","description":"## Current state\n\nFull TUI columns: Directory (flex) | Session ID (40) | Status (14) | Time Elapsed (16). No priority column exists.\n\n## Required changes\n\n1. Add a Priority column (12 chars wide) showing the session priority value (u64, default 0)\n2. Reorder columns to match sort precedence: Directory (flex) | Status (14) | Priority (12) | Time Elapsed (16) | Session ID (40)\n\nColumn order rationale: sort-key columns (Status, Priority, Time Elapsed) appear in sort precedence order. Directory is first as the primary visual identifier. Session ID is last.\n\nSort order for reference: status group → priority (desc) → time elapsed.\n\n## Column widths\n\n| Column | Width | Notes |\n|--------|-------|-------|\n| Directory | flex | Basename with parent disambiguation |\n| Status | 14 | Fixed |\n| Priority | 12 | New column. Header: \"Priority\" (8 chars + padding) |\n| Time Elapsed | 16 | Fixed. Header: \"Time Elapsed\" |\n| Session ID | 40 | UUID v4 (36 chars + padding) |\n\n## Files to modify\n\n- `src/tui/views/dashboard/mod.rs` — `format_session_line()`, `format_header_line()`\n- `docs/design/ui.md` — update column width documentation\n\n## Context\n\n- Priority field already exists in SessionSnapshot (u64, default 0)\n- Column labels are LEFT-aligned\n- Cell content is LEFT-aligned, all padding trailing\n- Highlight marker: filled triangle, HighlightSpacing::Always","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T00:51:13.177073+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T15:21:14.511847+01:00","closed_at":"2026-02-16T15:21:14.511847+01:00","close_reason":"Priority column added (12 chars), columns reordered to match sort precedence: Dir → Status → Priority → Time Elapsed → Session ID. Commit: ca3ff95"}
{"id":"acd-3qx","title":"Daemon: rename resurrect → reopen + closed→active lifecycle","description":"## Parent\n\nSub-issue of acd-bwa (redesign resurrect → reopen).\n\n## Scope\n\nRename the IPC command and daemon handler from \"resurrect\" to \"reopen\". When\ndaemon receives REOPEN command for a closed session:\n\n1. Move session from closed queue → active sessions map\n2. Set status to the session's last non-closed status (or Attention as default)\n3. Respond with success + SessionSnapshot\n\n### Files to change\n\n- `src/ipc.rs`: Rename `IpcCommand::Resurrect` → `IpcCommand::Reopen`\n- `src/daemon/handlers.rs` (or handlers/mod.rs): Rename handler function,\n  implement closed→active transition\n- `src/daemon/store/`: Add method to move session from closed to active\n\n### Not in scope\n\n- CLI command rename (separate issue)\n- TUI keybindings (separate issue)\n- Hook execution (client-side, separate issue)\n\n### Testing\n\n- Unit test: reopen moves session from closed to active\n- Unit test: reopen on non-existent session returns error\n- Unit test: reopen on already-active session returns error (or no-op)","notes":"Design clarification (2026-02-15): Reopen always sets status to Attention.\nNot \"last non-closed status\" — Attention is semantically accurate because the\nuser needs to interact with the reopened session. Store method: reopen_session().","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T02:23:25.35644+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T02:59:46.803404+01:00","closed_at":"2026-02-15T02:59:46.803404+01:00","close_reason":"Closed"}
{"id":"acd-3zc","title":"Research ratatui ListState selected=None and header click detection","description":"Initial findings: ratatui ListState supports select(None) — no highlight when nothing selected. Remaining question: how to detect mouse clicks on the header area to clear selection? Need to check mouse event handling in app.rs and determine header y-coordinate. Informs acd-2ou implementation.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:01:44.168567+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T03:07:17.618441+01:00","closed_at":"2026-02-12T03:07:17.618441+01:00","close_reason":"Research completed in previous session: confirmed ListState.select(None) works, header click detection via calculate_clicked_session() returning None. acd-2ou already implemented."}
{"id":"acd-42an","title":"Status stays attention after permission prompt is answered","description":"After a permission_prompt notification fires (status → attention), the user answers the permission. The status should revert to 'working' because Claude resumes execution. However, it stays on 'attention'.\n\nHypothesis: PreToolUse was added (line 29-32 of install.rs) specifically to bridge this gap, but it may not fire for the tool that was paused for permission — only for subsequent tools. If the approved tool executes without a new PreToolUse event, status stays 'attention' until the next tool use.\n\nRelated: acd-4cqb (similar stuck-status issue but for cancel/ESC). Both may share a root cause — hook events not firing when expected.\n\nInvestigation needed:\n1. Manual test with debug logging: answer permission prompt, check if PreToolUse fires\n2. If PreToolUse does NOT fire after permission approval, check if PostToolUse fires (currently disabled in experiment acd-ws6)\n3. If neither fires, consider restoring PostToolUse or adding a new hook event\n\nAgent: hook-research (investigation) then hook-ipc (fix if possible).","notes":"Part of v0.1.3 manual testing epic (acd-slxu). Needs empirical test with AGENT_CONSOLE_DASHBOARD_LOG=debug.","status":"open","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-17T05:55:06.059891+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T19:53:03.59739+01:00"}
{"id":"acd-4398","title":"Research ratatui horizontal pagination pattern","description":"Research how to implement horizontal pagination with ratatui for the compact two-line layout. Specifically: rendering N session chips horizontally in a single Line with overflow indicators (`\u003c- N+` and `N+ -\u003e`).\n\n**Step 1 — Search for existing solutions:** Search the internet (crates.io, GitHub, ratatui ecosystem) for existing widgets or crates that implement horizontal pagination, tab bars, horizontal scrollable lists, or chip layouts with ratatui. This is a common UI pattern — there may already be a ratatui extension crate or community widget.\n\n**Step 2 — Report findings:** If something exists, document what it is, how it works, and whether it fits our needs. If nothing exists, document what approaches are available and recommend a design for implementing it ourselves.\n\nOutput: research report in docs/agents/tui-rendering/. The orchestrator will review findings and discuss with user before proceeding to implementation (acd-6wg6).\n\nAgent: tui-rendering (research mode).","notes":"Research completed by tui-rendering agent (foreground dispatch). Finding: no existing ratatui widget for horizontal pagination. Recommend custom viewport window pattern with compact_scroll_offset in App state, ~200 LOC. Full report: docs/agents/tui-rendering/horizontal-pagination-research.md. User prefers doing research externally in future — note for next research tasks.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T18:04:18.654301+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T19:52:52.341796+01:00","closed_at":"2026-02-18T05:17:17.848466+01:00","close_reason":"Research complete: no existing solution, recommend viewport window pattern with custom Span rendering. ~200 LOC. Doc: docs/agents/tui-rendering/horizontal-pagination-research.md. Commit: 7be0755"}
{"id":"acd-4cqb","title":"Status stuck on working after user cancels with ESC/Ctrl+C","description":"When a user sends a prompt then interrupts it (ESC or Ctrl+C), the session status remains \"working\" instead of reverting to \"attention\".\n\nExpected: after cancel/interrupt, status should revert to \"attention\" (the idle state for an active session).\nActual: status stays locked on \"working\".\n\nRoot cause hypothesis: Claude Code may not fire a Stop hook event on user interruption/cancellation. If so, this may be a Claude Code behavior we cannot control — need to investigate which hook events fire on ESC/Ctrl+C.\n\nInvestigation steps:\n1. Check which hook events Claude Code fires on ESC/Ctrl+C (UserPromptSubmit fires on send, but does Stop fire on cancel?)\n2. If Stop does not fire on cancel, check if any other event fires that we could use\n3. If no event fires, this may need to be reported as a Claude Code feature request\n\nAgent: hook-research (investigation) then hook-ipc (fix if possible).","notes":"Research complete (docs/agents/hook-research/cancel-event-investigation.md). Finding: Stop hook is already registered and maps to attention. It SHOULD fire on cancel. Needs empirical testing with debug logging to confirm. Part of v0.1.3 manual testing epic (acd-slxu). Next: manual test with AGENT_CONSOLE_DASHBOARD_LOG=debug. If Stop fires, investigate why status doesnt update. If Stop doesnt fire, file Claude Code feature request.","status":"open","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-17T00:58:27.671053+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T19:53:03.701433+01:00"}
{"id":"acd-4g0","title":"E2E integration test with real Claude Code","description":"## Problem\n\nNo automated or documented end-to-end test verifying the full ACD flow with a real\nClaude Code instance. A manual smoke test passed (2026-02-08) but the procedure is\nnot documented and not repeatable by others.\n\n## What Was Tested Manually\n\n1. cargo install → acd in PATH\n2. acd install → hooks written to ~/.claude/settings.json\n3. Start Claude Code session → hooks fire\n4. Daemon lazy-starts from hook\n5. Sessions tracked in daemon (verified via acd dump)\n6. acd tui shows live session\n7. acd uninstall → hooks removed\n\n## What Needs Documentation/Automation\n\n### Test Plan Document\n\nWrite a reproducible test plan covering:\n\n- Prerequisites (Claude Code installed, cargo, Rust toolchain)\n- Step-by-step procedure with expected outputs\n- Verification commands at each step\n- Known issues (e.g., env__fetch_usage_raw panics without CLAUDE_CODE_OAUTH_TOKEN)\n\n### Automated Smoke Test (stretch goal)\n\nA script that automates what can be automated:\n- cargo install\n- acd install → verify hooks in settings.json\n- acd daemon → start daemon\n- Simulate hook calls (echo JSON | acd claude-hook attention)\n- acd dump → verify session exists\n- acd uninstall → verify hooks removed\n\nThe Claude Code interaction itself cannot be automated (requires human session).\n\n## Acceptance Criteria\n\n- Documented test plan in docs/testing/ or similar\n- At least the non-interactive parts scriptable\n- CI could optionally run the automated portion","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-09T07:41:05.694293+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T11:05:31.395659+01:00","closed_at":"2026-02-11T11:05:31.395659+01:00","close_reason":"E2E test plan + automated smoke script. All tests pass."}
{"id":"acd-4mk","title":"Display version string in TUI corner","description":"Show version in TUI, format: v0.1.2 (no trailing spaces needed). Use env!(\"CARGO_PKG_VERSION\") for compile-time version. Placement: bottom-right corner of Sessions block or status bar area. Bump version to 0.1.2 in Cargo.toml.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:09.775965+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.999974+01:00","closed_at":"2026-02-12T05:40:26.999974+01:00","close_reason":"Closed"}
{"id":"acd-4nd","title":"Scroll navigation should show detail panel of focused session","description":"Scroll wheel changes the selected session but doesn't show the detail panel. Per the focus interaction model, any action that changes focus should also display the detail panel for that session. This includes j/k keys, scroll wheel, and mouse click.\n\nRelated: acd-bbm (click = focus = show detail panel)","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T15:11:10.411093+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:31:14.848756+01:00","closed_at":"2026-02-14T04:31:14.848756+01:00","close_reason":"Always-visible detail panel with focus-based updates. Enter fires hook, scroll/keyboard never trapped.","dependencies":[{"issue_id":"acd-4nd","depends_on_id":"acd-g40","type":"blocks","created_at":"2026-02-12T15:11:15.511909+01:00","created_by":"Pablo LION"}]}
{"id":"acd-4of","title":"CLI: add session activate command","description":"Add `acd session activate \u003cid\u003e` command that fires the activate_hook from CLI. Deferred from acd-2jp — activate is TUI-only for now.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-15T19:57:52.769601+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T19:57:52.769601+01:00"}
{"id":"acd-4sd","title":"Resolve cargo audit warnings from ratatui dependencies","description":"CI cargo audit reports 2 warnings, both from ratatui 0.29.0 transitive dependencies:\n\n## Advisories\n\n### RUSTSEC-2024-0436: paste (unmaintained)\n- Crate: paste v1.0.15\n- Severity: unmaintained (no longer maintained)\n- Chain: paste 1.0.15 ← ratatui 0.29.0 ← agent-console-dashboard\n\n### RUSTSEC-2026-0002: lru (unsound)\n- Crate: lru v0.12.5\n- Title: IterMut violates Stacked Borrows by invalidating internal pointer\n- Severity: unsound (memory safety issue)\n- Chain: lru 0.12.5 ← ratatui 0.29.0 ← agent-console-dashboard\n\n## Resolution paths\n\n1. **Upgrade ratatui to 0.30.0** — check if the new version bumps paste/lru to fixed versions\n2. **Cargo patch** — override transitive deps in Cargo.toml if ratatui 0.30.0 doesn't fix it\n3. **Upstream PR** — contribute fix to ratatui if they haven't addressed it\n4. **Allowlist** — last resort: add to audit deny.toml with justification (currently these are allowed warnings in CI)\n\n## Current CI behavior\nAudit job passes because these are warnings, not errors. But unsound memory in lru is a real concern.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T01:03:27.93995+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T22:26:46.324443+01:00","closed_at":"2026-02-10T22:26:46.324443+01:00","close_reason":"All security vulns already patched. Two INFO/unsoundness warnings (paste 1.0.15 unmaintained, lru 0.12.5 unsound) are transitive deps from ratatui 0.29 — requires ratatui 0.30 upgrade (breaking API). Not actionable without major version bump."}
{"id":"acd-4sq","title":"Detail panel shows 'unknown' for missing directory — should show 'error'","description":"Dashboard view correctly maps unknown → \u003cerror\u003e (line 120 in dashboard.rs). But the detail panel (detail.rs) may have a separate code path that still shows 'unknown' instead of '\u003cerror\u003e'. Need to check detail view rendering for consistency.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:30.737152+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.75447+01:00","closed_at":"2026-02-11T20:48:57.75447+01:00","close_reason":"Closed"}
{"id":"acd-50g","title":"Visually separate claude-hooks library output from ACD output in install/uninstall","description":"When 'acd install' runs, it calls the claude-hooks library which produces its own output. This output is mixed with ACD's own messages, making it unclear what comes from where. Options: (1) add delimiters/section headers, (2) indent the library output, (3) prefix lines. Decide which approach and implement.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T00:24:46.135979+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:24:46.135979+01:00","labels":["needs-design"]}
{"id":"acd-50i","title":"TUI interface to set session priority","description":"Add a TUI keybinding or interaction to set the user priority (u64) for the selected session.\n\nThis depends on the CLI issue (acd-nd1) which adds the priority field and IPC command. The TUI issue adds a user-facing way to change priority without leaving the TUI.\n\nDesign TBD: keybinding (e.g., +/- to increment/decrement), input prompt, or other interaction.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T22:32:03.746205+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T22:32:03.746205+01:00","labels":["needs-design"],"dependencies":[{"issue_id":"acd-50i","depends_on_id":"acd-nd1","type":"blocks","created_at":"2026-02-12T22:32:08.149312+01:00","created_by":"Pablo LION"}]}
{"id":"acd-515","title":"Fix claude-hooks to use correct Claude Code hooks format","description":"The claude-hooks library uses wrong format. Expected object-based format with event keys: { \"hooks\": { \"Stop\": [{ \"hooks\": [...] }] } } but library uses array format { \"hooks\": [...] }. Need to update settings.rs and related code to handle actual Claude Code schema.","status":"closed","priority":1,"issue_type":"bug","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T21:33:36.775096+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T21:47:17.269398+01:00","closed_at":"2026-02-04T21:47:17.269398+01:00","close_reason":"Fixed claude-hooks library to use correct Claude Code hooks format (object-based instead of array-based). Updated all test files including edge_cases.rs, performance.rs, and atomic_safety.rs."}
{"id":"acd-51l","title":"Consider actor model refactor for daemon (deferred)","description":"Amendment 2 in decision-amendments.md proposed replacing tokio::spawn-per-connection + Arc\u003cRwLock\u003cHashMap\u003e\u003e with single-threaded actor model + plain HashMap. After analysis, decided to defer: Rust type system already prevents data races, TOCTOU risk is marginal at \u003c50 connections, and the refactor touches ~1600 lines across server.rs/store.rs/usage.rs. Revisit if: (1) actual concurrency bugs appear, (2) connection count grows significantly, or (3) lock contention shows up in profiling. See discussion in devlog.","status":"open","priority":4,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:31:09.025911+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T07:31:09.025911+01:00"}
{"id":"acd-51o2","title":"Widget click propagation: API usage line opens URL on click","description":"Clicking on the API usage widget (in any layout mode) opens https://claude.ai/settings/usage in the browser using the open crate. Not blocked by two-line layout — the widget exists independently.\n\nRequirements:\n1. Add open crate dependency\n2. On click (mouse event over API usage area): open URL in default browser\n3. URL is hardcoded for now (customization in separate P2 issue)\n4. Works in both Large and TwoLine layout modes","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T15:43:50.898307+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T05:49:53.853087+01:00"}
{"id":"acd-52a","title":"Restructure daemon CLI: acd daemon start/stop subcommands","description":"Restructure daemon CLI from flat commands to subcommands: 'acd daemon start [--detach/-d]' and 'acd daemon stop [--force/-f]'. Bare 'acd daemon' with no subcommand shows help text. Update lazy-start logic to call 'acd daemon start' instead of 'acd daemon'. Remove old DaemonStop command. Update tests and hook system. Separate P4 issues exist for daemon log viewing and foreground mode.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:22.2565+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:11:29.342323+01:00","closed_at":"2026-02-12T00:11:29.342323+01:00","close_reason":"Closed"}
{"id":"acd-5a1e","title":"Investigate: does /clear create a new session_id?","description":"User assumption: /clear creates a new session_id (UUID), /resume preserves the existing one. Verify this by searching Claude Code documentation, source code references, or official docs.\n\n**Deliverable:** A short, concrete answer for each:\n1. Does /clear generate a new session_id UUID? (expected: yes)\n2. Does /compact preserve the session_id UUID?\n3. Does /resume preserve the session_id UUID? (expected: yes)\n\n**Must include references** — link to docs, source code, or official documentation that confirms each answer. If no authoritative source exists, state that explicitly.\n\nIf /clear creates new IDs, note implications: old session stays as orphan in daemon, same directory gets multiple session entries.\n\nAgent: hook-research (research mode). Output: research report in docs/agents/hook-research/.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-16T04:04:32.13389+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T19:00:47.613991+01:00","closed_at":"2026-02-16T19:00:47.613991+01:00","close_reason":"session_id NOT stable. /clear, /compact, /resume all generate new UUIDs. Confirmed via GitHub issue #12235. Report: docs/agents/hook-research/session-id-lifecycle.md. Commit: 89e305c71fdbc2eac6750dc2205d54a30e71fb83"}
{"id":"acd-5dh","title":"Remove service install/launchd/systemd — lazy-start daemon","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T14:55:34.382147+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T15:17:23.612203+01:00","closed_at":"2026-02-08T15:17:23.612203+01:00","close_reason":"removed service.rs, plist, systemd unit, CLI subcommand, and tests"}
{"id":"acd-5i2","title":"Status stuck on 'attention' after user answers — investigate hook gap","description":"Status stuck on 'attention' after user answers permission prompt or AskUserQuestion. Root cause: no hook fires between user answering and Claude resuming work. Fix: add PreToolUse→working and PostToolUse→working hooks to acd_hook_definitions(). Also bump version (patch) so 'acd install' picks up the new hooks. Research needed: exact ordering of PreToolUse/PostToolUse vs Notification(permission_prompt) — create separate research issue.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:36.55015+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:11:15.63689+01:00","closed_at":"2026-02-12T00:11:15.63689+01:00","close_reason":"Closed"}
{"id":"acd-5sk","title":"V1: color palette and theming (Tokyo Night, etc.)","description":"Current colors are too dim on dark backgrounds: yellow looks brown, green not vivid. For V1:\n1. Research popular CLI color palettes (Tokyo Night, Catppuccin, Dracula, etc.)\n2. Implement theme system\n3. Default theme that works well on dark backgrounds\nNot blocking — aesthetic only.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T14:40:57.482759+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T14:40:57.482759+01:00"}
{"id":"acd-5uh5","title":"Two-line layout: transient feedback overlay on second line","description":"Add transient status message support to two-line layout. When feedback needs to be shown (double-click, copy session ID, no hook configured, etc.), temporarily replace the second line (API usage) with the feedback message for 2 seconds, then revert to API usage. When terminal height \u003e 2 in two-line mode (via --layout twoline), render feedback on an extra line below instead of replacing. Reuse the existing status bar message mechanism from Large layout. If the existing mechanism does not already have a 2-second auto-clear timeout, add it. Agent: tui-rendering.","notes":"Existing infrastructure: app.status_message: Option\u003c(String, Instant)\u003e with expire_status_message() called every tick. Currently uses 3-second timeout — change all occurrences to 2 seconds. In render_two_line_layout(), check app.status_message: if Some, render message on line 2 instead of API usage. When terminal height \u003e 2 in two-line mode, render on extra line 3 instead of replacing.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-19T04:22:01.712626+01:00","created_by":"Pablo LION","updated_at":"2026-02-20T10:25:17.023606+01:00","closed_at":"2026-02-20T10:25:17.023606+01:00","close_reason":"Feedback overlay replaces line 2 in two-line layout. Timeout changed to 2s. Commit: 0e476be"}
{"id":"acd-5xz","title":"Add validation layer for Claude Code hook stdin input","description":"Add validation layer for Claude Code hook stdin input (HookInput struct). Validate: session_id is UUID v4 format, cwd is non-empty absolute path. On invalid input: warn on stderr but still process the hook — don't block Claude Code. This is defense-in-depth, not a hard gate.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T23:02:16.580558+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.851284+01:00","closed_at":"2026-02-12T00:13:22.851284+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-63c","title":"Update E002 session code: verify session_id from JSON stdin","description":"Verify session management code uses session_id from JSON stdin (not basename PWD). Check any hook script examples or test fixtures that use the old pattern. Scope: crates/agent-console-dashboard/src/ session-related code. See docs/architecture/2026-01-31-decision-amendments.md and Q16.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.214276+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T21:37:30.87694+01:00","closed_at":"2026-02-05T21:37:30.87694+01:00","close_reason":"Verified: all hook scripts parse session_id from JSON stdin. Fixed stale $SESSION_ID $ARGS placeholders in daemon/mod.rs command templates. No code uses basename PWD."}
{"id":"acd-66ij","title":"CLI: add --layout flag to tui subcommand","description":"Add --layout \u003cname\u003e flag to the acd tui subcommand in main.rs using clap.\n\n- Flag: --layout \u003cname\u003e (optional)\n- Valid values: large, twoline\n- Parse as Option\u003cLayoutMode\u003e and pass it through to the TUI startup function\n- When None: TUI uses auto-detection (existing behavior)\n- When Some: TUI uses the specified layout mode\n\nThis is the CLI parsing side only. The TUI wiring is in a separate issue.\n\nAgent: cli-features.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T06:09:14.050402+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T21:18:36.212409+01:00","closed_at":"2026-02-18T21:18:36.212409+01:00","close_reason":"CLI --layout flag added with clap ValueEnum. Commit: 94d22c8","dependencies":[{"issue_id":"acd-66ij","depends_on_id":"acd-vawl","type":"blocks","created_at":"2026-02-18T06:09:21.175511+01:00","created_by":"Pablo LION"}]}
{"id":"acd-6dr","title":"Refactor Session.working_dir to Option\u003cPathBuf\u003e + fix disambiguation parent collision","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T19:04:57.072817+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.745546+01:00","closed_at":"2026-02-11T20:48:57.745546+01:00","close_reason":"Closed"}
{"id":"acd-6gh","title":"Move project-level rules from CLAUDE.md to AGENTS.md","description":"Some project-level rules currently live in CLAUDE.md or .claude/rules/ that should be in AGENTS.md instead. AGENTS.md is the right place for agent-specific instructions in shared codebases — it won't confuse human contributors. Audit current rules and migrate project-specific agent instructions to AGENTS.md. Also add a brief doc format section (3-5 lines) pointing to docs/index.md so agents know where documentation lives.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T18:35:03.747535+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.014758+01:00","closed_at":"2026-02-12T05:40:27.014758+01:00","close_reason":"Closed"}
{"id":"acd-6gn","title":"Fix claude-usage crate snake_case warnings","description":"Three functions in claude-usage crate trigger non_snake_case warnings: env__fetch_usage_raw, env__get_token_macos, env__get_usage. Rename to single-underscore convention.","status":"closed","priority":4,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T12:00:48.351604+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T23:52:38.439277+01:00","closed_at":"2026-02-12T23:52:38.439277+01:00","close_reason":"Renamed 4 double-underscore functions to single-underscore"}
{"id":"acd-6hr","title":"Wire usage_fetch_interval config to daemon timer","description":"The config field usage_fetch_interval exists but is NOT connected to the daemon's tokio::interval timer. Wire it so the daemon reads the config value and uses it for the fetch interval instead of the hardcoded 180s.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T01:00:39.828541+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:41:26.07221+01:00","closed_at":"2026-02-10T12:41:26.07221+01:00","close_reason":"Wired usage_fetch_interval from TOML config to daemon via humantime crate"}
{"id":"acd-6o2","title":"Limit TUI to 1 frame per second","description":"Problem: without throttling, the TUI recalculates elapsed time (diff between last history timestamp and now, then format) for every session on every frame. At scale (100 sessions × 100 TUIs = 10,000 calculations per tick), this drains CPU for no user-visible benefit.\n\nSolution: two rendering modes with different trigger rates.\n\n1. PASSIVE ticks (elapsed time recalculation): limit to a constant interval (default 1 second). Define a const like ELAPSED_TIME_REFRESH_INTERVAL (Duration). Zero-cost abstraction, no overhead.\n\n2. USER INPUT (keyboard, mouse, scroll): render immediately on each input event. Cursor movement (j/k/arrows), scrolling, clicking must be real-time with no lag. If user presses down 5 times quickly, the cursor must track all 5 moves immediately.\n\nThis is NOT a global fps cap. Input events bypass the throttle entirely. Only the background elapsed-time tick is throttled.\n\nThe agent must understand the current event loop and tick rate before changing it. Discover how the TUI currently processes events and renders frames.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T22:51:57.997451+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T03:11:59.6391+01:00","closed_at":"2026-02-13T03:11:59.6391+01:00","close_reason":"Closed"}
{"id":"acd-6pqt","title":"Make API usage URL configurable","description":"The API usage widget opens https://claude.ai/settings/usage on click. This URL should be configurable in acd config so users can point to custom dashboards or different Anthropic console URLs.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-18T05:49:50.699423+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T06:03:53.882383+01:00"}
{"id":"acd-6wg6","title":"Session status pagination + overflow indicators","description":"Add horizontal pagination to the two-line layout session list (Line 1). Design decisions:\n\n- Left/right arrows scroll sessions horizontally. Stop at boundaries (no wrap-around).\n- Mouse scroll wheel scrolls sessions in two-line mode.\n- Overflow indicators: \u003c- N+ (left) and N+ -\u003e (right). Non-interactive, gray when empty (no sessions in that direction).\n- Selected session shown with [brackets]. Reuses app.selected_index.\n- Up/down (j/k) still work in two-line mode (navigate session list).\n- Sort order in two-line matches full TUI (status → priority → elapsed).\n- Research (acd-4398) recommends viewport window pattern: compact_scroll_offset in App state, ~200 LOC. See docs/agents/tui-rendering/horizontal-pagination-research.md.\n\nAgent: tui-rendering.","notes":"Ecosystem search (2026-02-18): Checked for existing horizontal pagination solutions.\n\n1. **ratatui Tabs widget** — renders horizontal tab bar but no scroll/pagination. Truncates when tabs exceed width. No overflow indicators.\n\n2. **tui-widgets 0.7.0 ScrollView** (formerly tui-scrollview) — generic buffer-scroll widget with horizontal scrolling support (scroll_left/scroll_right, horizontal scrollbar). Not suitable because: (a) scrolls by pixel/column, not by chip, (b) provides scrollbar indicator, not `\u003c- N+` / `N+ -\u003e` count indicators, (c) no auto-scroll-to-selection, (d) adds a dependency for something simpler to build custom (~200 LOC).\n\n3. **ratatui Scrollbar widget** — visual scrollbar indicator only, no viewport management.\n\n4. **rat-scrolled** — scroll wrapper for widgets, vertical-focused.\n\nConclusion: no off-the-shelf widget provides chip-level horizontal pagination with overflow count indicators. Custom viewport window approach (from acd-4398 research) is the right choice.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T18:04:27.416932+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T21:24:51.84816+01:00","closed_at":"2026-02-18T21:24:51.84816+01:00","close_reason":"Session chip pagination with viewport window pattern, overflow indicators, auto-scroll. 17 new tests. Commit: 3cac753","dependencies":[{"issue_id":"acd-6wg6","depends_on_id":"acd-4398","type":"blocks","created_at":"2026-02-16T18:04:35.586183+01:00","created_by":"Pablo LION"},{"issue_id":"acd-6wg6","depends_on_id":"acd-xh40","type":"blocks","created_at":"2026-02-16T18:04:35.710528+01:00","created_by":"Pablo LION"}]}
{"id":"acd-71n","title":"Verify acd binary is in PATH during install","description":"Hook commands use bare 'acd' — if not in PATH, hooks fail silently. The install command should check that 'acd' resolves in PATH and suggest 'cargo install --path crates/agent-console-dashboard' if not found. See docs/end-to-end-blockers.md B2.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:39.104008+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.263899+01:00","closed_at":"2026-02-08T18:51:55.263899+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-71n","depends_on_id":"acd-qe8","type":"blocks","created_at":"2026-02-08T18:24:50.087355+01:00","created_by":"Pablo LION"}]}
{"id":"acd-79b","title":"Double-click fires configurable hook from config file","description":"Double-click on a session should fire a user-configurable hook (defined in the TOML config file). ACD does NOT handle the action itself — it's modular. The hook receives the session context and the external tool (Zellij tab switch, tmux pane, VS Code, etc.) handles the action. This keeps ACD environment-agnostic. Config example: [hooks.double_click] command = 'zellij action go-to-tab-name \"{session_id}\"'","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:41.428302+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T23:37:36.917389+01:00"}
{"id":"acd-7dl","title":"TUI: column header says 'Name' but shows session ID","description":"The column header says 'Name' but the data shown is session.id (the session ID). Header should say 'Session ID' to match the actual data.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:11.954475+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.121286+01:00","closed_at":"2026-02-10T12:40:18.121288+01:00"}
{"id":"acd-7fm","title":"Research hook event ordering: PreToolUse/PostToolUse vs Notification(permission_prompt)","description":"Investigate the exact ordering of Claude Code hook events during tool use with permission prompts. Questions: (1) Does PreToolUse fire before or after Notification(permission_prompt)? (2) Does PostToolUse fire after the user grants permission, or after the tool completes? (3) Are there other events we should hook into? This research informs acd-5i2 (attention stuck fix).","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-11T23:37:38.369419+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T23:37:38.369419+01:00","dependencies":[{"issue_id":"acd-7fm","depends_on_id":"acd-ws6","type":"blocks","created_at":"2026-02-12T03:05:23.60938+01:00","created_by":"Pablo LION"}]}
{"id":"acd-7jh","title":"Pass SessionSnapshot as stdin JSON to double-click hook","description":"When the double-click hook fires, pipe the full SessionSnapshot as JSON to the hook command's stdin. This follows the same pattern as Claude Code hooks (JSON on stdin).\n\nImplementation:\n1. Serialize the SessionSnapshot for the selected session to JSON\n2. Pipe it to the hook command's stdin (change Stdio::null() to Stdio::piped(), write JSON)\n3. Document the JSON structure in docs/user/ (create file if needed)\n4. Ensure SessionSnapshot is re-exported from the library crate (idempotent — check if already done, add only if missing)\n\nThe hook receives everything: session_id, working_dir, status, status history, timestamps, etc.\n\nCode location (after file split refactoring):\n- Function: execute_double_click_hook() at src/tui/app/mod.rs:174\n- Currently uses std::process::Command with sh -c, fire-and-forget\n- stdout/stderr piped to Stdio::null(), stdin is implicit (not set)\n- The change: set .stdin(Stdio::piped()), write SessionSnapshot JSON to child stdin\n- SessionSnapshot is defined in src/ipc.rs (re-exported from lib.rs via pub use ipc::*)\n- Tests for double-click behavior: src/tui/app/tests/interaction.rs","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T14:50:48.674883+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T03:07:04.661311+01:00","closed_at":"2026-02-14T03:07:04.661311+01:00","close_reason":"SessionSnapshot piped as JSON to double-click hook stdin. Tests added, docs created."}
{"id":"acd-7pa","title":"Add cargo audit to CI workflow","description":"Add a cargo audit step to .github/workflows/ci.yml. Checks dependencies for known security vulnerabilities (CVE database). Should run as a separate job alongside test/lint/docs.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:08.713403+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:14:12.42123+01:00","closed_at":"2026-02-08T01:14:12.42123+01:00","close_reason":"Closed"}
{"id":"acd-7u2","title":"Multiplexer integration (Zellij layouts and launcher)","description":"Integrate ACD dashboard as a top pane in Zellij terminal multiplexer layouts. Three layout presets: minimal (2-row), default (3-row), detailed (5-row). Includes launcher script, KDL layout files, and installation to ~/.config/zellij/layouts/. Scope note: this is about the broader 'agent console' concept — the dashboard as one component in a multiplexer workspace with work panes below. See design/integrations.md for the multiplexer integration philosophy.\n\n---\n\n## Original Spec (from docs/guides/zellij.md)\n\n### Prerequisites\n\n- **Zellij installed** (version 0.39.0+ recommended)\n  - Installation guide: https://zellij.dev/documentation/installation\n- **agent-console binary in PATH**\n  - Build: cargo build --release\n  - Install: cargo install --path .\n\n### Quick Start\n\nUse the provided launcher script to start Zellij with the dashboard:\n\n```sh\n# Default layout (2-line dashboard + vertical split)\n./scripts/zellij/zellij-claude.sh\n\n# Minimal layout (1-line dashboard)\n./scripts/zellij/zellij-claude.sh minimal\n\n# Detailed layout (multi-line dashboard)\n./scripts/zellij/zellij-claude.sh detailed\n```\n\nThe script automatically:\n- Checks for Zellij installation\n- Validates Zellij version (warns if \u003c 0.39.0)\n- Prevents nested sessions\n- Launches the appropriate layout\n\n### Layout Descriptions\n\nThree pre-configured layouts are available:\n\n| Layout | Pane Height | Content | Use Case |\n|--------|------------|---------|----------|\n| minimal | 2 rows | Session names + status | Maximum screen space for work |\n| default | 3 rows | Status + working directory | Balanced monitoring and space |\n| detailed | 5 rows | Full session details | Deep session inspection |\n\n#### Minimal Layout\n\n```kdl\nlayout {\n    pane size=2 {\n        command \"agent-console\"\n        args \"tui\" \"--layout\" \"one-line\"\n    }\n    pane\n}\n```\n\n#### Default Layout\n\n```kdl\nlayout {\n    pane size=3 {\n        command \"agent-console\"\n        args \"tui\" \"--layout\" \"two-line\"\n    }\n    pane split_direction=\"vertical\" {\n        pane\n        pane\n    }\n}\n```\n\n#### Detailed Layout\n\n```kdl\nlayout {\n    pane size=5 {\n        command \"agent-console\"\n        args \"tui\"\n    }\n    pane\n}\n```\n\n### Installation to Zellij Config\n\n```sh\nmkdir -p ~/.config/zellij/layouts\ncp scripts/zellij/layouts/claude-*.kdl ~/.config/zellij/layouts/\nzellij --layout claude-default\n```\n\n### Usage Patterns\n\n#### Launching from Outside Zellij\n\n```sh\n./scripts/zellij/zellij-claude.sh default\nzellij --layout claude-default\n```\n\n#### Adding Dashboard to Existing Session\n\n```sh\nzellij action new-pane --command agent-console tui\n```\n\n### Daemon Auto-Start\n\nThe dashboard automatically triggers daemon auto-start when launched. No manual daemon management is required.\n\n### Troubleshooting\n\n- Zellij not installed → brew install zellij / cargo install zellij\n- Nested session warning → exit current session or use zellij action new-pane\n- Version compatibility → update to 0.39.0+\n- Layout file not found → run from project root\n- agent-console not found → cargo install --path .\n- No data shown → check daemon status, ensure active sessions exist\n\n### Customization\n\nCustom layouts: copy existing KDL, modify pane size and args. Save to ~/.config/zellij/layouts/custom.kdl.\n\nDashboard placement: reverse pane order in KDL to place at bottom instead of top.\n\n### Platform Support\n\nTested on macOS (Sonoma 14.x+) and Linux (Ubuntu 22.04+, Arch, Fedora). Windows via WSL.\n\n### References\n\n- Zellij docs: https://zellij.dev/documentation/\n- KDL layout syntax: https://zellij.dev/documentation/creating-a-layout.html","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-09T20:55:09.141463+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T21:07:28.050868+01:00"}
{"id":"acd-7xz","title":"Session ID ellipsis truncation for small window sizes","description":"When terminal window is too small to show full UUID (36 chars), truncate session_id with ellipsis. Design TBD — user is still thinking about the exact behavior. Defer until user provides spec.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:26.560083+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:19:26.560083+01:00","labels":["needs-design"]}
{"id":"acd-80s","title":"Add integration tests for claude-hook subcommand","description":"Automate the manual integration tests for `acd claude-hook`. These test the compiled binary with real stdin/stdout (no daemon running). Cases to cover:\n1. Valid JSON with session_id → exit 0, stdout contains {\"continue\": true} with systemMessage (daemon not running)\n2. Malformed JSON → exit 2, stderr contains error message\n3. Valid JSON missing session_id field → exit 2\n4. Valid JSON with extra unknown fields → exit 0 (forward-compatible)\n\nUse cargo integration test pattern (`tests/` directory) with `assert_cmd` or `std::process::Command` to invoke the built binary. See existing test patterns in the crate.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:39:13.597761+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T21:52:35.27479+01:00","closed_at":"2026-02-07T21:52:35.27479+01:00","close_reason":"Integration tests added and bugs fixed in PR #2"}
{"id":"acd-87o","title":"Fix: highlighted inactive session text unreadable — use black text","description":"When an inactive session row is highlighted (selected), the text is unreadable because inactive text color blends with the highlight background. Fix: set text to black (Color::Black) when the row is highlighted and the session is inactive. Active sessions don't need changes.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T14:40:54.516047+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T23:57:00.021769+01:00","closed_at":"2026-02-12T23:57:00.021769+01:00","close_reason":"Black text for highlighted inactive sessions, merged to main"}
{"id":"acd-88r","title":"Closed sessions should use same visual style as inactive sessions","description":"Closed sessions don't enter 'inactive' visual mode because is_inactive() checks !self.closed. But visually, closed sessions should look identical to inactive ones — both represent sessions the user is no longer actively using.\n\nFix approach (try in order):\n\n1. **Preferred: Bind to Status enum.** Add a method like `Status::should_dim()` (or `is_dimmed()`) directly on the Status enum. This centralizes the logic — each variant knows whether it should be dimmed. Currently inactive and closed should return true; working, attention, question should return false. This is the most idiomatic Rust pattern.\n\n2. **Alternative: Rename is_inactive().** If approach 1 doesn't fit the current architecture, rename `is_inactive()` to `should_dim()` (or `should_have_dim_style()`) and include closed sessions in the check. Do NOT keep the name `is_inactive` if it now covers closed sessions too — the name must match the semantics.\n\n3. **Fallback: Separate method.** If `is_inactive()` is used for non-visual logic elsewhere (e.g., daemon idle timer), keep it unchanged and add a new `should_dim()` method that returns true for both inactive and closed.\n\nCheck all callers of `is_inactive()` to understand whether it's purely visual or used for other logic too. This determines which approach to use.\n\nVisual requirements:\n- Closed sessions get the same dimmed style as inactive sessions (identical, no subtle difference)\n- Closed + highlighted sessions get the same Color::Black text treatment as inactive + highlighted (from acd-87o)\n\nRelated: acd-87o (highlighted inactive text readability) — merged.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T18:18:12.182325+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T05:34:14.472091+01:00","closed_at":"2026-02-13T05:34:14.472091+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-88r","depends_on_id":"acd-87o","type":"blocks","created_at":"2026-02-12T21:51:22.218803+01:00","created_by":"Pablo LION"}]}
{"id":"acd-8uw","title":"Add column headers to TUI session list","description":"The session list table has no header row. Add visible column headers so users can tell what each column represents (session name, status, working directory, elapsed time). Headers should follow the same responsive breakpoints as the data rows.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:27.180486+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:54:52.132422+01:00","closed_at":"2026-02-10T11:54:52.132422+01:00","close_reason":"Implemented: column headers added. Superseded by acd-7dl (header says 'Name' but should say 'Session ID')","dependencies":[{"issue_id":"acd-8uw","depends_on_id":"acd-r57","type":"blocks","created_at":"2026-02-08T22:43:23.764807+01:00","created_by":"Pablo LION"}]}
{"id":"acd-8vg","title":"Add 'acd config edit' command to open config in editor","description":"Add 'acd config edit' subcommand that opens the config file in the user's editor.\n\nEditor resolution order: $VISUAL first, then $EDITOR. If neither is set, print an error message telling the user to set $EDITOR.\n\nIf no config file exists, print an error: \"No config found. Run 'acd config init' first.\" Do NOT auto-create.\n\nBefore opening the editor, back up the current config using the same backup format as acd-qga: \u003cname\u003e.bak.\u003ctinydate\u003e where tinydate uses Zulu time: YYYYMMDDTHHmmssZ (16 chars). Reuse the generate_tinydate() function from config/default.rs. Example: config.toml.bak.20260213T143052Z\n\nExpected output:\n  Config backed up to: /path/to/config.toml.bak.20260213T143052Z\n  Opening /path/to/config.toml in editor...","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T15:05:07.394616+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T13:03:23.440196+01:00","closed_at":"2026-02-13T13:03:23.440196+01:00","close_reason":"Closed"}
{"id":"acd-8vx","title":"Validate hook cwd path exists on filesystem","description":"Currently cwd from hook stdin is accepted as-is. Should we validate the path exists? Pros: catches stale/wrong paths. Cons: path may not exist on daemon host (remote scenarios), adds I/O. Separate from format validation (acd-5xz validates absolute path format only).","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:01:42.135576+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:01:42.135576+01:00","labels":["needs-design"]}
{"id":"acd-8yv","title":"Rename cargo package agent-console to agent-console-dashboard","description":"Package name 'agent-console' doesn't match repo name 'agent-console-dashboard' or directory 'crates/agent-console-dashboard/'. Rename package to 'agent-console-dashboard', update lib name to 'agent_console_dashboard', and update all imports. Binary stays 'acd'.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T21:30:50.820146+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T14:38:29.285285+01:00","closed_at":"2026-02-08T14:38:29.285285+01:00","close_reason":"Package renamed to agent-console-dashboard across Cargo.toml, lib name, all imports, runtime paths, service identifiers, and plist file"}
{"id":"acd-938s","title":"Investigate: inactive session reactivation via hooks","description":"When a session becomes inactive (dimmed due to INACTIVE_SESSION_THRESHOLD), it is unclear whether a new hook event for that session properly reactivates it (un-dims it). Questions: (1) Does a hook event update the session since timestamp to reactivate it? (2) If /clear creates a new session_id, the old session can never receive new hooks — it stays inactive forever. (3) Should the daemon garbage-collect orphaned inactive sessions for the same directory? Related to session_id stability investigation.","notes":"Blocked on manual testing for v0.1.3. Part of epic acd-slxu. Test plan: use acd session delete to clean orphans, copy session IDs with s key, verify --resume behavior.","status":"open","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-16T04:04:35.246044+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T05:49:59.191284+01:00","dependencies":[{"issue_id":"acd-938s","depends_on_id":"acd-5a1e","type":"blocks","created_at":"2026-02-16T18:48:27.669804+01:00","created_by":"Pablo LION"},{"issue_id":"acd-938s","depends_on_id":"acd-rbv5","type":"blocks","created_at":"2026-02-17T00:09:34.21244+01:00","created_by":"Pablo LION"},{"issue_id":"acd-938s","depends_on_id":"acd-p6ym","type":"blocks","created_at":"2026-02-17T00:09:34.334924+01:00","created_by":"Pablo LION"}]}
{"id":"acd-9hb5","title":"One-line history overflow display in detail panel","description":"When the per-state duration history (e.g., 'working 10m | attention 2m | question 30s | ...') exceeds the available width in the detail panel, handle truncation or wrapping gracefully. This is a TUI display problem, not a data problem. Related to acd-2olq (which changes the data format). Decide on truncation strategy: ellipsis, scroll, show only most recent N states, etc.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T20:32:51.457086+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T04:51:02.5072+01:00"}
{"id":"acd-9n5","title":"Document daemon start behavior when already running","description":"The daemon start message is already correct ('Reusing existing daemon... no new daemon started'). The env var docs (docs/user/environment-variables.md) already exist and document ACD_LOG.\n\nRemaining work:\n1. Add a note to docs/user/environment-variables.md under the ACD_LOG section: 'This variable is read at daemon startup. Changing it has no effect on an already running daemon. Stop and restart the daemon for log level changes to take effect.'\n2. Add a doc comment on the is_daemon_running() function in src/commands/daemon.rs explaining the reuse behavior.\n\nScope: documentation only. Do NOT implement acd daemon restart (separate issue).","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T14:46:14.634935+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:53:18.497321+01:00","closed_at":"2026-02-14T04:53:18.497321+01:00","close_reason":"Documented ACD_LOG startup-only behavior and is_daemon_running() reuse."}
{"id":"acd-9n7","title":"Detail panel content when no session selected","description":"When no session is selected, the detail panel area is empty. Consider showing something useful — dashboard summary, help text, or stats. No concrete design yet.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T14:41:03.948652+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T14:41:03.948652+01:00"}
{"id":"acd-9pq","title":"Verify hook scripts exist at referenced paths","description":"Daemon references /path/to/hooks/*.sh but scripts may not exist. Check if E006 (S006) created these scripts and update paths if needed.","status":"closed","priority":2,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:49.579311+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T15:26:40.576029+01:00","closed_at":"2026-02-07T15:26:40.576029+01:00","close_reason":"Obsolete: shell hook scripts deleted, replaced by plugin system (acd-a81)"}
{"id":"acd-9ul","title":"Directory column: show basename with disambiguation","description":"Display last path component (basename) instead of truncated full path. When multiple sessions share same basename, include parent folder to disambiguate. Per docs/design/ui.md:172.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:25.413908+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.75185+01:00","closed_at":"2026-02-11T20:48:57.75185+01:00","close_reason":"Closed"}
{"id":"acd-9ws","title":"CLI: add session reopen command","description":"Add `acd session reopen \u003cid\u003e` command that fires the reopen_hook from CLI. Deferred from acd-2jp — reopen is TUI-only for now (acd-bwa decision).","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-15T19:57:51.770551+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T19:57:51.770551+01:00"}
{"id":"acd-9zb","title":"Drift: README should document 'acd install' for setup, not 'acd daemon start'","description":"The daemon lazy-starts via hooks, so 'acd daemon start' is unnecessary and misleading as setup guidance. The README (when written) should tell users to run 'acd install' to set up hooks. 'acd daemon start' should not appear in getting-started instructions.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:44.427262+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.012555+01:00","closed_at":"2026-02-12T05:40:27.012555+01:00","close_reason":"Closed"}
{"id":"acd-a44","title":"closed flag is a one-way latch — no reverse path on re-activation","description":"set_status(Closed) sets closed=true, but set_status(Working) does not reset it to false. A re-activated session has status=Working but closed=true, causing incorrect active/closed counts in STATUS and DUMP commands. Needs decision: either clear closed on non-Closed transitions, or prevent re-activation of closed sessions.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.278012+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:27:01.97654+01:00","closed_at":"2026-02-08T01:27:01.97654+01:00","close_reason":"Fixed: self.closed now derived from new_status on every transition"}
{"id":"acd-a81","title":"Migrate ACD to Claude Code plugin system","description":"Replace manual hook management (daemon/hooks.rs + claude-hooks crate) with the official Claude Code plugin system. ACD would ship as a plugin with hooks declared in hooks/hooks.json. Claude Code handles install/update/uninstall lifecycle. This eliminates daemon/hooks.rs (610 lines), the registry system, and the claude-hooks dependency from ACD. The claude-hooks crate can be archived or kept for types only. See discussion in acd-in9 merge session.","status":"closed","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T02:59:53.346537+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T19:42:11.008566+01:00","closed_at":"2026-02-07T19:42:11.008566+01:00","close_reason":"Migrated to Claude Code plugin system: build.rs generates plugin manifest, claude-hook subcommand replaces shell scripts, removed daemon/hooks.rs (610 lines) and claude-hooks dependency"}
{"id":"acd-a8k","title":"Handle stale sessions from crashed clients (session TTL or heartbeat)","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-06T21:40:34.991201+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T02:42:04.252317+01:00","closed_at":"2026-02-08T02:42:04.252317+01:00","close_reason":"Inactive session detection with visual treatment (dimmed DarkGray + ◌ symbol). No auto-close — sessions stay in active list, distinct from closed. has_active_sessions excludes inactive to fix daemon idle timeout."}
{"id":"acd-ake","title":"Same-status transitions should reset elapsed timer","description":"Session.set_status() at lib.rs:204 returns early when new_status == current status, only updating last_activity. This means if we receive attention→attention (different event, same status), the elapsed timer keeps counting from the original transition. Fix: reset self.since = now even when status is unchanged, so elapsed reflects the latest event. Don't record a history transition for same-status, just reset the timer.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:39.905508+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.828803+01:00","closed_at":"2026-02-12T00:13:22.828803+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-arsz","title":"TUI stops receiving daemon updates after idle period","description":"After being AFK for an extended period, the TUI stops displaying new updates from the daemon. Sessions appear frozen/stale. Likely a connection timeout or missed reconnect. Needs investigation into the WebSocket/Unix socket connection lifecycle and keep-alive behavior. Agent: daemon-core or tui-rendering.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-17T00:09:29.275103+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T03:46:38.848956+01:00","closed_at":"2026-02-17T03:46:38.848956+01:00","close_reason":"Research complete. Root cause: no reconnection logic in TUI subscription. Fix: retry loop with backoff. Doc: docs/agents/daemon-core/tui-stale-data-investigation.md. Commit: 89ff5d6"}
{"id":"acd-awp","title":"Fix build.rs drift: missing PreToolUse and PostToolUse hooks in plugin.json","description":"build.rs generates .claude-plugin/plugin.json with a hardcoded hook list that is missing PreToolUse and PostToolUse hooks. These were added to acd_hook_definitions() in main.rs (v0.1.1) but never mirrored in build.rs. Result: plugin system hooks are incomplete while acd install settings are correct. Fix: add PreToolUse and PostToolUse hooks to build.rs hook definitions (lines 38-109). Consider DRY: share hook definitions between build.rs and main.rs to prevent future drift.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T03:54:22.178606+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.006034+01:00","closed_at":"2026-02-12T05:40:27.006034+01:00","close_reason":"Closed"}
{"id":"acd-b0p","title":"Show seconds in all time displays including hours format","description":"Three time formatting functions drop seconds when duration \u003e= 1 hour. DRY fix: extract a single shared format_duration function (e.g., in a helpers/shared module) used by all three call sites. Do NOT fix at three places separately. Functions to consolidate: (1) format_elapsed (dashboard.rs:44) — session list column, (2) format_duration (detail.rs:277) — detail panel status line, (3) format_transition_time (detail.rs:291) — detail panel history entries. All should show XhYmZs when hours\u003e0. Extract to shared location, then import everywhere. This enables future user customization of time format.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T03:34:39.209799+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.995169+01:00","closed_at":"2026-02-12T05:40:26.995169+01:00","close_reason":"Closed"}
{"id":"acd-b87v","title":"Refactor: centralize and modularize time format functions","description":"Extract and centralize all time/duration formatting functions into a single module if they are scattered across multiple files. This enables consistent duration display (e.g., '10m 30s' for \u003e=10m) and makes future format changes easier. Audit codebase for all duration formatting code and consolidate. Related to acd-2olq (per-state duration) and the compact layout history line.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T20:32:54.905634+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T04:48:19.873465+01:00","dependencies":[{"issue_id":"acd-b87v","depends_on_id":"acd-qy9w","type":"blocks","created_at":"2026-02-18T04:48:20.109686+01:00","created_by":"Pablo LION"}]}
{"id":"acd-bbh","title":"TUI: left click shows details below session list, not popup","description":"Current implementation opens a modal overlay on double-click. Redesign: left click selects a session and shows its details in a section BELOW the session list within the default dashboard view. No popup/modal. The detail section is part of the dashboard layout.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:38.594756+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T01:23:21.926696+01:00","closed_at":"2026-02-16T01:23:21.926696+01:00","close_reason":"Already implemented. Commit 425e0d2 replaced detail modal with inline panel. Code verified on main."}
{"id":"acd-bbm","title":"Detail panel always visible when item focused (click = focus)","description":"Navigation model clarification:\n- Left click = focus (show detail panel)\n- Double-click = focus + trigger hook action\n- Enter on focused item = same as double-click\nDetail panel should appear whenever an item is focused/selected, not require Enter.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T14:41:02.022814+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:31:14.845789+01:00","closed_at":"2026-02-14T04:31:14.845789+01:00","close_reason":"Always-visible detail panel with focus-based updates. Enter fires hook, scroll/keyboard never trapped.","dependencies":[{"issue_id":"acd-bbm","depends_on_id":"acd-g40","type":"blocks","created_at":"2026-02-12T15:11:15.629879+01:00","created_by":"Pablo LION"}]}
{"id":"acd-bbt","title":"Research: how to run rustfmt on only staged files","description":"Research how to run cargo fmt / rustfmt on only git-staged files (not the whole project). This would make the pre-commit hook more precise — currently it formats everything. Investigate: (1) rustfmt accepts file paths as arguments, (2) extract staged .rs files from git diff --cached --name-only, (3) any existing tools/scripts that do this. Output: a short report with the recommended approach.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T21:44:27.369491+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T21:44:27.369491+01:00"}
{"id":"acd-bc7","title":"Daemon log viewing and foreground mode for detached daemon","description":"When a daemon is running detached (acd daemon start --detach), provide ways to: (1) view daemon logs/output, (2) bring it to foreground. Exact UX TBD. Low priority — not needed for prototype.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T23:37:40.797514+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T23:37:40.797514+01:00"}
{"id":"acd-bcg","title":"Create user documentation folder with environment variable reference","description":"Create docs/user/ folder for user-facing documentation (separate from dev docs in docs/). First document: environment-variables.md listing all env vars (AGENT_CONSOLE_DASHBOARD_LOG, AGENT_CONSOLE_DASHBOARD_DEBUG, XDG_CONFIG_HOME, XDG_RUNTIME_DIR). README can reference this folder.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:15.313066+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.010535+01:00","closed_at":"2026-02-12T05:40:27.010535+01:00","close_reason":"Closed"}
{"id":"acd-bel","title":"Automate worktree cleanup after merge","description":"Investigate automating worktree + branch removal after merge. Currently manual (orchestrator step 4). Options: post-merge hook with reflog parsing (fragile), Worktrunk tool, or custom script. Research done in session 20260215 — reflog parsing works but isn't a stable contract.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T20:00:07.392194+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T20:00:07.392194+01:00"}
{"id":"acd-bfe","title":"Research: systematic naming convention for ignored tests","description":"The env__ prefix was renamed to env_ but we're unsure if any prefix is needed given #[ignore] already marks them. Research: (1) Rust community conventions for categorizing ignored tests, (2) whether prefix-based filtering (cargo test -- --ignored env_) is worth the naming overhead, (3) alternatives like module-based filtering or cargo-nextest. Decide on a convention and update testing-strategy.md.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T00:16:10.587396+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T00:16:10.587396+01:00"}
{"id":"acd-bho","title":"Restructure docs folder: detect auto-generated files and separate user/dev docs","description":"Investigate which docs are auto-generated vs hand-written. Approach: create git worktree branch, delete suspected auto-generated docs, regenerate, let git diff show which came back. Then restructure: either docs/user/ + docs/dev/ (option 3) or keep current + docs/user/ (option 2). Cross-references to update: AGENTS.md (@docs/terminology.md), markdown-lint-config-justification.md (glob patterns), lib.rs:517 (docs/decisions/variable-naming.md). Low priority — current structure works.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:54:27.007037+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T03:54:27.007037+01:00"}
{"id":"acd-boy","title":"Fix pre-commit hook infinite recursion: remove global hook chaining","description":"The local pre-commit hook (.git/hooks/pre-commit, sourced from scripts/pre-commit.sh) has a 'Chain to global hooks' section that reads core.hooksPath and calls the global hook. This causes infinite recursion because the global hook already chains back to the local hook. Fix: remove lines 11-19 (the GLOBAL_HOOKS_DIR block) from scripts/pre-commit.sh. The global hook runs first via core.hooksPath, then chains to local. Local should NOT call global back.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T00:07:30.302779+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:13:22.898275+01:00","closed_at":"2026-02-12T00:13:22.898275+01:00","close_reason":"Implemented in commit dbaf13b (combined commit from parallel agents)"}
{"id":"acd-bw4","title":"Auto-install git hooks via build.rs","description":"Add hook installation logic to build.rs. On cargo build, create symlinks from .git/hooks/{pre-commit,pre-push} to scripts/{pre-commit,pre-push}.sh. Skip if NO_INSTALL_HOOKS=1. Warn but don't overwrite foreign hooks.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:04.591027+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:00:24.320277+01:00","closed_at":"2026-02-08T01:00:24.320277+01:00","close_reason":"Closed"}
{"id":"acd-bwa","title":"Redesign resurrect → reopen: fire configurable hook instead of printing command","description":"## Current behavior (problematic)\n\n`acd resurrect \u003cid\u003e` looks up a closed session, validates the working directory,\nand returns `claude --resume \u003cid\u003e` as text. User has to copy-paste it. The TUI\nhas a TODO (Action::Resurrect) that doesn't send the IPC command yet.\n\n## New design direction\n\nRename \"resurrect\" to \"reopen\" throughout the codebase. Instead of returning a\ncommand string, fire a configurable hook from the ACD config file.\n\n### Two hooks in config\n\n1. **activate hook** (`tui.activate_hook`): Focus on an active session — e.g.,\n   switch terminal pane to it. Fires when user activates a non-closed session.\n2. **reopen hook** (`tui.reopen_hook`): Reopen a closed session — e.g., run\n   `claude --resume` in the right directory. Fires only for closed sessions.\n\nBoth hooks receive the full SessionSnapshot as JSON on stdin (same pattern as\ndouble-click hook). Placeholder substitution: `{session_id}`, `{working_dir}`,\n`{status}`.\n\n### Implementation scope\n\n- Rename `resurrect` → `reopen` in CLI, IPC command, daemon handler, TUI action\n- Replace text output with hook execution\n- Add `tui.activate_hook` and `tui.reopen_hook` to config schema\n- TUI: 'r' key or Enter on closed session fires reopen hook\n- TUI: Enter on active session fires activate hook\n- CLI: `acd session reopen \u003cid\u003e` fires the reopen hook via daemon\n\n### Open questions\n\n- Should the daemon remove the session from the closed queue after reopen?\n  (Currently resurrect does this — may want to keep it until a new SessionStart\n  hook arrives for the resumed session)\n- How does this interact with multiplexer integration (acd-7u2)?","notes":"Split into 6 sequential sub-issues (2026-02-15):\n\n1. acd-3qx — Daemon: rename resurrect → reopen + closed→active (daemon-core)\n2. acd-puk — Config: add activate_hook + reopen_hook (cli-features)\n3. acd-1j2 — TUI: wire hooks to double-click + keybindings (tui-rendering)\n4. acd-jau — CLI: rename resurrect → session reopen (cli-features)\n5. acd-0hx — Delete integrations/zellij module (cleanup)\n6. acd-3le — Delete terminal/ module (cleanup)\n\nExecution: sequential, one agent at a time, merge after each.\nDouble-click becomes context-sensitive: non-closed → activate_hook, closed → reopen_hook.\nReopen moves session from closed → active queue in daemon.\nMultiplexer interaction: just hook configuration, no special code.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T02:07:46.445223+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T18:57:23.283684+01:00","closed_at":"2026-02-15T18:57:23.283684+01:00","close_reason":"All 6 sub-issues closed (3qx, puk, jau, 0hx, 3le, 1j2). Resurrect→reopen migration complete."}
{"id":"acd-bxfc","title":"Three-line compact layout (session status + history + API usage)","description":"Implement the three-line compact layout from docs/design/ui.md lines 67-84. Line 1: sessions (horizontal, paginated). Line 2: selected session history (per-state duration). Line 3: API usage. Requires two-line layout to be implemented first (acd-hex). Also requires multi-line Widget trait change or separate rendering path for the two-line session status widget.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T04:02:02.451141+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T04:02:02.451141+01:00"}
{"id":"acd-c1h","title":"Pin Rust toolchain version to fix recurring CI rustfmt mismatch","description":"## Problem\n\nCI lint job (`cargo fmt --all -- --check`) fails intermittently because local\nrustfmt and CI rustfmt format code differently. Root cause: Homebrew installs\nRust 1.93.0 (rustfmt 1.8.0) but CI's `dtolnay/rust-toolchain@stable` installs\n1.93.1 (latest stable). Patch version differences cause different line-wrapping\ndecisions in rustfmt.\n\nThis has occurred twice:\n1. Session where we upgraded from 1.89.0 → 1.93.0 and reformatted everything\n2. Now: agent-written code formatted with 1.93.0 fails CI's 1.93.1 check\n\n## Fix\n\nAdd `rust-toolchain.toml` to repo root to pin the toolchain version:\n\n```toml\n[toolchain]\nchannel = \"1.93.0\"\ncomponents = [\"rustfmt\", \"clippy\"]\n```\n\nThis ensures:\n- Local dev uses the pinned version (rustup reads this file automatically)\n- CI uses the same version (dtolnay/rust-toolchain respects rust-toolchain.toml)\n- No more version drift between local and CI\n- Version upgrades become deliberate (bump the file, reformat, commit)\n\nAlso reformat the 2 files that currently differ (cli.rs, rendering.rs).\n\n## Files\n\n- New: `rust-toolchain.toml` (repo root)\n- Fix: `crates/agent-console-dashboard/src/cli_tests/cli.rs`\n- Fix: `crates/agent-console-dashboard/src/tui/views/dashboard/tests/rendering.rs`\n- Optional: update CI to remove explicit `components: rustfmt, clippy` since\n  rust-toolchain.toml handles it","status":"closed","priority":1,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-14T12:35:16.50759+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T21:16:00.521697+01:00","closed_at":"2026-02-14T21:16:00.521697+01:00","close_reason":"Pinned via rust-toolchain.toml + fixed flaky test"}
{"id":"acd-csg","title":"TUI: column labels should be left-aligned","description":"Column headers (Status, Directory, Elapsed) are right-aligned ({:\u003e10}, {:\u003e20}, {:\u003e8}). They should be left-aligned for a table layout.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:17.374221+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.432225+01:00","closed_at":"2026-02-10T12:40:18.432228+01:00"}
{"id":"acd-cvb","title":"Debug bar: show mouse interactions with optional auto-copy","description":"When AGENT_CONSOLE_DASHBOARD_DEBUG=1, replace the current ruler line with a 'debug bar':\n\nLeft side: show last interaction event (mouse click coordinates, element clicked, key pressed)\nRight side: auto-copy toggle button (default OFF)\n- OFF: shows ✗\n- ON: shows ✓ with lighter/distinct visual\n- Toggle with a key (TBD)\n- When ON, debug info is auto-copied to clipboard\n\nThis replaces the current ruler (column widths). The debug bar is more useful for interactive debugging — click registration issues, event handling, etc.\n\nDepends on: acd-l1b (debug interaction logging infrastructure)","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T14:46:20.344875+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T14:46:20.344875+01:00","dependencies":[{"issue_id":"acd-cvb","depends_on_id":"acd-l1b","type":"blocks","created_at":"2026-02-12T14:46:24.32678+01:00","created_by":"Pablo LION"}]}
{"id":"acd-cx9","title":"TUI Polish","description":"Epic for TUI improvements: error display, layout fixes, column headers, compact dashboard, resurrect keybinding, mouse interaction. Sequential chain — all touch views/dashboard.rs.","status":"open","priority":2,"issue_type":"epic","owner":"dev@pablolion.com","created_at":"2026-02-08T22:43:19.755438+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T22:43:19.755438+01:00","dependencies":[{"issue_id":"acd-cx9","depends_on_id":"acd-lht","type":"blocks","created_at":"2026-02-08T22:43:29.053037+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-r57","type":"blocks","created_at":"2026-02-08T22:43:29.166598+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-8uw","type":"blocks","created_at":"2026-02-08T22:43:29.283283+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-hex","type":"blocks","created_at":"2026-02-08T22:43:29.401028+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-bwa","type":"blocks","created_at":"2026-02-08T22:43:29.511344+01:00","created_by":"Pablo LION"},{"issue_id":"acd-cx9","depends_on_id":"acd-3cv","type":"blocks","created_at":"2026-02-08T22:43:29.622039+01:00","created_by":"Pablo LION"}]}
{"id":"acd-czj","title":"TUI: time elapsed column too thin (8 chars)","description":"Elapsed column is 8 chars wide ({:\u003e8}). Gets squeezed and unreadable. Need more width. Also the elapsed values are incorrect — see related issue for the Instant serialization bug.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:16.035995+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.325433+01:00","closed_at":"2026-02-10T12:40:18.325435+01:00"}
{"id":"acd-dmy","title":"Document SessionSnapshot use cases in struct doc comment","description":"Add inline documentation to the SessionSnapshot struct listing all its use cases:\n1. IPC wire format: daemon → TUI (JSON lines over Unix socket)\n2. Double-click hook payload: TUI → user hook (stdin JSON)\n3. Public API: re-exported for Rust hook authors to deserialize\n\nThis helps contributors and hook authors understand the struct's role.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T14:50:55.629548+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T03:11:59.641058+01:00","closed_at":"2026-02-13T03:11:59.641058+01:00","close_reason":"Closed"}
{"id":"acd-dyb","title":"Add daemon stop command","description":"No way to stop the daemon. CLI has daemon/tui/status/dump/config/claude-hook/install/uninstall/resurrect but no stop. User needs to stop/restart the daemon. Lazy start handles startup, but there's no way to shut down a running daemon short of killing the process.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:21.960625+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T01:58:41.277322+01:00","closed_at":"2026-02-11T01:58:41.277322+01:00","close_reason":"STOP IPC command + acd daemon-stop CLI + graceful shutdown. Committed 83ba356."}
{"id":"acd-edx","title":"Implement floor rounding for usage time display","description":"Round down (floor) the displayed time percentage in the usage widget. The 5-hour API window = 300 minutes, we fetch every 3 minutes = 1% of window. Floor ensures: (1) never overstates elapsed time, (2) clean 1% steps per fetch, (3) tolerant of fetch/window misalignment. Implementation: apply floor() when converting elapsed minutes to percentage for display.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T01:00:44.260922+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:39:32.838005+01:00","closed_at":"2026-02-10T12:39:32.838005+01:00","close_reason":"Added .floor() to all 4 percentage format strings in api_usage.rs"}
{"id":"acd-eem","title":"CLI: add session list command","description":"Add `acd session list` command that outputs session info similar to TUI (table format). Deferred from acd-2jp CLI tree redesign — not needed for v0.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-15T19:57:50.145698+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T19:57:50.145698+01:00"}
{"id":"acd-elrc","title":"API usage widget: show time elapsed alongside quota percentage","description":"Update api_usage.rs widget long mode format.\n\nFormat: `5h: 42% / 75% | 7d: 77% / 50% | Period: used / elapsed`\n\n- Each time window shows: `\u003cperiod\u003e: \u003cused%\u003e / \u003celapsed%\u003e`\n- Windows separated by ` | `\n- Last segment `Period: used / elapsed` is a dimmed legend (same dim style as inactive/closed sessions)\n- claude-usage crate already provides time_elapsed_percent() and time_until_reset()\n- No changes needed to claude-usage crate — only the widget renderer\n\nAgent: tui-visual.","notes":"Long mode renders in the two-line compact layout (line 2, from acd-hex design). Show both 5h and 7d windows exactly as specified.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T01:11:04.105636+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T04:11:02.024106+01:00","closed_at":"2026-02-18T04:11:02.024106+01:00","close_reason":"Long mode format: 5h: used/elapsed | 7d: used/elapsed | dimmed legend. Commit: c425954"}
{"id":"acd-g40","title":"Document focus interaction model","description":"Document the focus interaction model in docs/design/ui.md.\n\nThe detail panel always reflects the currently focused session. Focus is the central concept — every interaction that changes focus also updates the detail panel.\n\nActions that change focus:\n- Scroll wheel (mouse wheel) → changes focus to the scrolled-to item\n- Left click on unfocused item → changes focus to the clicked item\n- Double click on any item → changes focus + triggers hook action\n- j/k keyboard navigation → changes focus to the next/previous item\n\nActions that do NOT change focus:\n- Left click on the already-focused item → no-op (focus unchanged)\n\nSpecial behaviors:\n- Double click on the already-focused item → still triggers hook action (focus stays, hook fires)\n- Enter on focused item → same as double-click (focus + trigger hook)\n- Esc / click header → defocus (hide detail panel, no item focused)\n\nCurrent gap: scroll wheel changes selection but doesn't show detail panel. This should be fixed (related: acd-bbm).","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T15:11:08.136763+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T14:59:50.633381+01:00","closed_at":"2026-02-13T14:59:50.633381+01:00","close_reason":"Documented focus interaction model in docs/design/ui.md"}
{"id":"acd-g5h","title":"Investigate AskUserQuestion hook behavior in Claude Code","description":"Verify whether AskUserQuestion triggers any Claude Code hook (PreToolUse, Notification, etc). If it does, determine if it causes duplicate status updates. Log both JSON stdin session_id and CC_SESSION_ID env var, compare if they differ. Track across Claude Code versions.","notes":"## Investigation Complete (2026-02-09)\n\n### Original conclusion was WRONG\nelicitation_dialog is for MCP tool elicitation, NOT AskUserQuestion.\n\n### Solution: PreToolUse with matcher AskUserQuestion\nConfirmed by Anthropic collaborator @dicksontsai in #10168.\nBug that caused blank answers (pre-v2.0.76) is fixed since Jan 4 2026.\nCurrent version v2.1.37 — safe to use.\n\n### Ranked workarounds\n1. PreToolUse matcher AskUserQuestion — official workaround, confirmed working\n2. PermissionRequest matcher AskUserQuestion — also fires, duplicates with #1\n3. Stop hook — too broad (every response, not AskUserQuestion-specific)\n4. iTerm2 triggers — terminal-specific, fragile\n5. CLAUDE.md prompt engineering — non-deterministic\n\n### Related GitHub issues\n- #13024 (OPEN) — Main feature request for WaitingForInput hook\n- #10168 (OPEN) — Where Anthropic staff posted the workaround\n- #12048 (CLOSED dup of #10168)\n- #13830 (CLOSED dup of #13024)\n- #15872 (OPEN) — Another request for AskUserQuestion hook\n- #12605 (CLOSED dup of #10168) — Bidirectional hook request\n- #13439 (CLOSED fixed v2.0.76) — Bug that broke PreToolUse+AskUserQuestion\n\n### Action required for ACD\n1. Replace Notification/elicitation_dialog hook with PreToolUse/AskUserQuestion hook\n2. Or add PreToolUse/AskUserQuestion as a 7th hook alongside existing elicitation_dialog\n3. Test that question status fires correctly in TUI\n4. Verify no blank-answer regression on current Claude Code version\n\n### Also consider\n- PermissionRequest/AskUserQuestion fires simultaneously — pick one to avoid duplicate status updates\n- No bidirectional hook exists (cannot programmatically answer from hook)\n- VSCode extension may not fire PermissionRequest (PreToolUse safer)","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T13:45:16.412777+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T23:52:06.007433+01:00","closed_at":"2026-02-08T22:57:50.595896+01:00","close_reason":"Confirmed: AskUserQuestion fires Notification hook with notification_type=elicitation_dialog. ACD already maps this to question status correctly. No duplication risk. Other notification types: permission_prompt, idle_prompt, auth_success."}
{"id":"acd-gup","title":"Socket path not configurable via hooks","description":"Hook commands don't pass --socket, always use /tmp/agent-console-dashboard.sock default. Works for single-user but won't scale. Low priority — default works for personal use. See docs/end-to-end-blockers.md B7.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:45.671081+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T19:50:43.871627+01:00"}
{"id":"acd-gzy","title":"Rename ACD_LOG to AGENT_CONSOLE_DASHBOARD_LOG for env var consistency","description":"Rename environment variable ACD_LOG to AGENT_CONSOLE_DASHBOARD_LOG in daemon/logging.rs. Add AGENT_CONSOLE_DASHBOARD_DEBUG environment variable for debug mode. Update all references in docs, tests, and code. The full package name should be used consistently for all env vars.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:12.609027+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.997746+01:00","closed_at":"2026-02-12T05:40:26.997746+01:00","close_reason":"Closed"}
{"id":"acd-h3h","title":"Research: does Claude Code hot-reload hooks without restart?","description":"After 'acd install' adds/updates hooks in settings.json, does Claude Code pick them up immediately or require a restart? Currently we say 'You may need to restart.' If hot-reload is confirmed, remove the message. If restart is required, make the message definitive.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:24:43.293141+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T00:35:14.799372+01:00"}
{"id":"acd-hek","title":"Track mf-upm","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T18:56:01.819854+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:56:01.819854+01:00"}
{"id":"acd-hex","title":"Implement compact 3-line dashboard view","description":"Implement compact two-line dashboard view for the TUI. REVISED SCOPE: Two-line layout first (three-line deferred to P4, see acd-bxfc). Two-line = Line 1 (sessions, horizontal paginated) + Line 2 (API usage). Sub-issues: acd-4398 (R: research pagination), acd-xh40 (A: skeleton), acd-6wg6 (B: pagination + overflow), acd-xmew (D: CLI flag). Sequenced R → A → B → D. All assigned to tui-rendering agent.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:29.232694+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T18:04:45.526864+01:00","dependencies":[{"issue_id":"acd-hex","depends_on_id":"acd-8uw","type":"blocks","created_at":"2026-02-08T22:43:23.88892+01:00","created_by":"Pablo LION"}]}
{"id":"acd-i4o","title":"Deep content audit of all 55 story files","description":"## Context\n\nStructural audit completed on 2026-01-30 (see docs/audits/2026-01-30-story-structural-audit.md).\nAll files pass structural validation (docs/docs-scripts/validate-stories.sh).\nThis task covers the CONTENT quality review that was not yet done.\n\n## Branch\n\nContinue on: docs/create-missing-stories\n\n## What to Check Per Story File\n\nFor each of the 55 story files in docs/stories/:\n\n1. **Description quality**: Clear user story format (\"As a..., I want..., So that...\")\n2. **Context section**: Explains WHY this story exists, not just WHAT\n3. **Implementation Details accuracy**: Files to modify/create match actual codebase structure\n   - Check paths like `src/daemon/server.rs` vs `crates/agent-console-dashboard/src/daemon/server.rs`\n   - Flag any paths that reference non-existent modules\n4. **Acceptance criteria**: Testable, specific, not vague\n5. **Dependencies**: Cross-references to other stories are accurate (correct story IDs, correct relationship)\n6. **Scope consistency with epic**: Story scope matches what the parent epic describes\n7. **Points estimation**: Reasonable relative to other stories (1=trivial, 2=small, 3=medium, 5=large)\n8. **Code examples**: If present, check they use correct crate/module names\n9. **Out of scope**: Items listed make sense and aren't things that should be in scope\n\n## Approach\n\n1. Read stories in epic order (E001 stories first, then E002, etc.)\n2. Read the parent epic first to understand goals\n3. Review each story against the checklist above\n4. Record findings per file in docs/audits/2026-01-30-story-content-audit.md\n5. Fix issues found\n6. Commit fixes\n\n## Already Verified (Do NOT Re-check)\n\n- File existence (all present)\n- Header format (Story ID, Epic link, Status, Priority, Points)\n- Required sections present (Description, Acceptance Criteria)\n- Epic links resolve to correct files\n- Epic story tables have hyperlinks\n- Sprint-status.yaml alignment\n- Story ID matches filename\n\n## Key Files\n\n- Validation script: docs/docs-scripts/validate-stories.sh\n- Structural audit: docs/audits/2026-01-30-story-structural-audit.md\n- Sprint status: planning-artifacts/sprint-status.yaml","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-30T17:55:53.788894+01:00","created_by":"Pablo LION","updated_at":"2026-01-30T19:21:46.215323+01:00","closed_at":"2026-01-30T19:21:46.215323+01:00","close_reason":"Content audit complete. First pass fixed 37 files (paths, E009 rewrite, stale refs). BMAD second pass scored 94% — 49/55 stories implementation-ready, 4 medium + 6 minor AC specificity issues remain."}
{"id":"acd-i71","title":"Remove unused assert_bg_color helper in test_utils.rs","description":"test_utils.rs defines assert_bg_color() but no test uses it, causing a dead_code warning. Add assert_bg_color calls to existing highlight-related tests (e.g., test_inactive_session_highlighted_uses_black_text) to verify the highlight background color is correct. Do not create a separate test — add background assertions alongside existing foreground assertions in the same tests.","status":"closed","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:47.504744+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T03:11:59.635278+01:00","closed_at":"2026-02-13T03:11:59.635278+01:00","close_reason":"Closed"}
{"id":"acd-in9","title":"Update E009/E011 integration: daemon fetches usage, not TUI","description":"Code changes needed: TUI should no longer call claude_usage::get_usage() directly. Instead, daemon fetches every 3 minutes and broadcasts via subscription. Update any TUI code that imports claude-usage crate directly. Scope: crates/agent-console-dashboard/src/. See docs/architecture/2026-01-31-discussion-decisions.md D3-D4.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.328486+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T23:46:15.357091+01:00","closed_at":"2026-02-05T23:46:15.357091+01:00","close_reason":"UsageFetcher wired into daemon, SUB extended with USAGE messages, TUI receives and stores usage data"}
{"id":"acd-ir7","title":"Pre-commit: auto-fix cargo fmt and re-stage","description":"Pre-commit hook currently reports fmt errors but doesn't fix them. Change to: run cargo fmt on the whole project, then git add -u to re-stage formatted files. Keep clippy as report-only gate. The simpler whole-project approach is fine — unstaged files won't be in the commit anyway. See acd-bbt (P4) for future research on staged-only formatting.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T12:00:47.125984+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T23:45:31.339421+01:00","closed_at":"2026-02-12T23:45:31.339421+01:00","close_reason":"Pre-commit hook now auto-fixes with cargo fmt + git add -u"}
{"id":"acd-isj","title":"Fixed-width columns: session_id (40), status (13), elapsed (16)","description":"Fixed-width columns for Full TUI mode. Directory fills remaining width (flex). Fixed columns: session_id=40 (UUID 36 + 4 padding), status=14 (even: max 'attention' 9 + 5 padding), elapsed=16 (HH:MM:SS 8 + 8 padding). Narrow mode (\u003c40 cols) unchanged. Collapse standard/wide modes into one mode since directory is now flex. Includes acd-ps6 (column arrangement). Update format_session_line(), format_header_line(), and affected tests.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:42.815278+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:10:47.214068+01:00","closed_at":"2026-02-12T00:10:47.214068+01:00","close_reason":"Closed"}
{"id":"acd-j4q","title":"Reconsider header/footer layout: header may be wasted space","description":"Ideas to explore:\n1. Header line ('Agent Console Dashboard') may not be needed — could reclaim vertical space\n2. Could move version or other info to header instead of footer\n3. Bottom-right footer currently shows version, but could show contextual feedback (e.g., double-click status)\n4. Full bottom line is used for status messages — that works well\n\nNo decision yet. Revisit during next TUI layout pass.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T14:30:07.999715+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T14:30:07.999715+01:00"}
{"id":"acd-j4u","title":"Investigate usage fetch timer alignment and rounding","description":"Investigation complete. Timer uses tokio::interval(180s), no drift. Config usage_fetch_interval defined but NOT wired to daemon. D4 alignment concern deferred. Remaining work: (1) wire config to daemon, (2) investigate if rounding causes real issues, (3) consider API window boundary alignment.","notes":"## Investigation Results (2026-02-09)\n\n### Timer: No drift\ntokio::interval(180s) handles drift correctly. No issue here.\n\n### Config: usage_fetch_interval not wired\nThe config field exists but is NOT connected to the daemon timer. Needs wiring.\n\n### Rounding Solution (confirmed by user)\n5-hour API window = 300 minutes. Fetch every 3 minutes = 1% of window.\n\n**Solution: round down (floor) the displayed time percentage.**\n\nWhy floor:\n1. **Truthful** — never overstates elapsed time. 50.7% real → shows 50%.\n2. **Clean 1% steps** — each fetch advances real value by ~1%. Floor produces exactly +1% per fetch (50.2% → 50%, next fetch 51.2% → 51%).\n3. **Alignment tolerant** — first fetch may not land on window boundary. Floor absorbs: 0.8% → shows 0%, next → 1%. No jitter.\n\nRound-to-nearest would also give 1% steps but overstates by up to 0.5%, creating misleading rate signals when comparing time vs quota.\n\n### Remaining Work\n1. Wire usage_fetch_interval config to daemon timer\n2. Implement floor rounding for displayed time percentage","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:00:31.576795+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T01:01:01.351974+01:00","closed_at":"2026-02-10T01:01:01.351974+01:00","close_reason":"Split into two separate issues: acd-6hr (wire config to daemon) and acd-edx (floor rounding)"}
{"id":"acd-jau","title":"CLI: remove resurrect command","description":"## Parent\n\nSub-issue of acd-bwa (redesign resurrect → reopen).\n\n## Scope\n\nRemove the `acd resurrect` CLI command entirely. Reopen functionality is\nTUI-only (via hooks). No CLI replacement needed.\n\n### What to remove\n\n- CLI arg definition for `resurrect` subcommand\n- `run_resurrect_command()` function\n- Any references to resurrect in CLI dispatch (main.rs match arms)\n- Tests for the resurrect CLI command\n\n### What NOT to do\n\n- Do NOT create a `session reopen` CLI command (not needed)\n- Do NOT fire hooks from CLI (TUI-only)\n- Do NOT touch daemon handler (separate issue acd-3qx)\n\n### Depends on\n\n- acd-3qx (daemon has already renamed Resurrect → Reopen in IPC)","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T02:23:54.48971+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T03:32:29.291037+01:00","closed_at":"2026-02-15T03:32:29.291037+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-jau","depends_on_id":"acd-3qx","type":"blocks","created_at":"2026-02-15T02:23:59.873998+01:00","created_by":"Pablo LION"}]}
{"id":"acd-jnd","title":"Make AUTO_STOP_IDLE_SECS configurable via config.toml","description":"Currently AUTO_STOP_IDLE_SECS is a hardcoded constant (3600). Allow overriding via [daemon] section in config.toml as an integer (seconds). No env var needed — this is stable config, not per-invocation.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-05T07:11:27.767435+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T01:58:44.594559+01:00","closed_at":"2026-02-11T01:58:44.594559+01:00","close_reason":"daemon.idle_timeout read from [daemon] config section, defaults to 60m. Committed 83ba356."}
{"id":"acd-k69","title":"TUI: remove session ID truncation, decide policy later","description":"Line 106 in dashboard.rs hard-truncates session ID to 20 chars: truncate_string(\u0026session.id, 20). Remove the truncation entirely for now so we can see actual session ID lengths. Decide on a truncation policy later after observing real data.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:14.081276+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T12:40:18.222418+01:00","closed_at":"2026-02-10T12:40:18.22242+01:00"}
{"id":"acd-kgxs","title":"Epic: V2","description":"Version 2 backlog. Features and improvements deferred from current focus. Children: acd-9hb5 (history overflow), acd-51o2 (widget click opens URL), acd-6pqt (configurable API usage URL).","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T04:51:02.408348+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T06:03:57.497849+01:00"}
{"id":"acd-khj","title":"TUI selection highlight off by 1 in normal mode, off by 2 in debug mode","description":"When clicking a session row in the TUI, the selection highlight lands on the wrong row. In normal mode it's off by 1 (selects the row below the clicked one). In debug mode (AGENT_CONSOLE_DASHBOARD_DEBUG=1) it's off by 2.\n\n## Root Cause\n\ncalculate_clicked_session() in src/tui/app/mod.rs:231 uses a hardcoded offset of 2 (app header + column header). It doesn't account for:\n1. The Block top border on the List widget (+1 row) — causes off-by-1 in normal mode\n2. The debug ruler row (+1 more) — causes off-by-2 in debug mode\n\nActual row positions:\n- Normal mode: App header (0) → Column header (1) → Block border (2) → Session 0 (3) — offset should be 3\n- Debug mode: + debug ruler row — offset should be 4\n- Narrow mode (width \u003c 40): No column header, no ruler — offset 2 is correct\n\n## Design Decision: Store list_area Rect from render pass (Option C)\n\nDo NOT fix by changing the hardcoded offset. Instead:\n\n1. Add a field to App: session_list_inner_area: Rect (the List widget's inner area, excluding block borders)\n2. During render_session_list(), after computing list_area and the Block, calculate the inner Rect (list_area with border insets) and store it on App via a mutable reference or return value\n3. In calculate_clicked_session(), use the stored Rect: check mouse.row falls within session_list_inner_area, then compute index as (mouse.row - session_list_inner_area.y) as usize\n4. This automatically handles normal mode, debug mode, narrow mode, and any future layout changes\n\nKey files:\n- src/tui/app/mod.rs — calculate_clicked_session() and App struct\n- src/tui/views/dashboard/mod.rs — render_session_list() where list_area is computed\n- src/tui/ui.rs — render_dashboard() orchestrates the render\n- src/tui/app/tests/interaction.rs — update existing tests for new offset behavior\n\nThe render pass already knows the exact geometry. Storing it eliminates all hardcoded offsets and prevents future regressions when layout changes.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-14T04:53:37.72366+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T23:34:17.197448+01:00","closed_at":"2026-02-14T23:34:17.197448+01:00","close_reason":"Fixed: stored inner Rect from render pass, rewrote tests as pure unit tests"}
{"id":"acd-kmvh","title":"Dim all columns consistently for inactive/closed sessions","description":"Currently, inactive and closed session rows have mismatched colors: the status text (e.g., \"inactive\", \"closed\") is more visible than other columns (directory, session_id, time elapsed, priority). All columns in inactive/closed rows should use the SAME color as the status column text. This means directory, session_id, time elapsed, and priority columns should all render in the same dimmed color as the status word. Agent: tui-visual.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-17T00:09:20.603391+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T00:36:18.997436+01:00","closed_at":"2026-02-17T00:36:18.997436+01:00","close_reason":"All columns now consistently dimmed for inactive/closed sessions. Commit: 0dfe215"}
{"id":"acd-l1b","title":"Debug mode: log user interactions (clicks, keys) visibly","description":"When AGENT_CONSOLE_DASHBOARD_DEBUG=1, log user interactions (mouse clicks, key presses) somewhere visible — possibly stderr, a debug panel, or external log. Helps debug click registration issues (e.g., single click sometimes not registering).","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T14:40:59.879015+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T14:40:59.879015+01:00","labels":["needs-design"]}
{"id":"acd-l5r","title":"Change highlight symbol to filled triangle and always show indent spacing","description":"Selection marker changes: (1) Change highlight_symbol from ▸ (small triangle) to ▶ (filled triangle, U+25B6). (2) Add .highlight_spacing(HighlightSpacing::Always) to List widget so 2-char indent is reserved for ALL items, not just selected. Currently non-selected items lose the leading 2 spaces, causing misalignment. ratatui 0.29 supports this API.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:07.404605+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:26.992853+01:00","closed_at":"2026-02-12T05:40:26.992853+01:00","close_reason":"Closed"}
{"id":"acd-lht","title":"Show \u003cerror\u003e in red instead of 'unknown' for missing working directory","description":"When a session has no working directory, the TUI shows 'unknown' in the working directory column. This is misleading — the JSON stdin from Claude Code always includes cwd, so a missing cwd means something went wrong. Display '\u003cerror\u003e' in red instead. Reserve 'unknown' for a true unknown state if one exists. This makes the error visible and debuggable.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:34.091679+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:54:50.24667+01:00","closed_at":"2026-02-10T11:54:50.24667+01:00","close_reason":"Implemented: dashboard shows \u003cerror\u003e in red for missing CWD. Follow-ups: acd-4sq (detail panel still shows 'unknown'), acd-rxy (cwd not recognized from hook input)"}
{"id":"acd-lj1","title":"Add uninstall command for agent-console-dashboard system","description":"## Scope\n\nEnhance `acd uninstall` to clean up the full ACD system.\n\n### Already done (acd-qe8)\n- Remove hooks from Claude Code settings.json\n\n### Remaining\n1. **Socket cleanup**: Remove `/tmp/agent-console-dashboard.sock` if it exists\n2. **Config file**: Do NOT remove. Print a one-liner command the user can copy-paste to remove it themselves: `rm \u003cconfig_path\u003e`\n3. **Stop daemon**: If running, stop it before cleanup\n\n### NOT in scope\n- launchd/systemd service files — ACD has no system service (lazy-start design)\n- Config backup — if user runs the printed rm command, they chose to delete\n\n### UX flow\n```\nacd uninstall\n  Removed ACD hooks from Claude Code settings\n  Stopped daemon\n  Removed socket file\n  Config file preserved at: ~/.config/agent-console-dashboard/config.toml\n  To remove: rm ~/.config/agent-console-dashboard/config.toml\n```","notes":"Hooks uninstall done (acd-qe8). Remaining: stop daemon, remove socket, print config path.\nNo launchd/systemd — ACD has no system service (lazy-start design).\nAgent: cli-features. Files: src/commands/install.rs (run_uninstall_command).","status":"closed","priority":3,"issue_type":"feature","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-02T09:55:57.018235+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T23:21:24.390397+01:00","closed_at":"2026-02-15T23:21:24.390397+01:00","close_reason":"Uninstall now stops daemon, removes socket, prints config path for manual removal. Commit: 270a668"}
{"id":"acd-mf45","title":"Daemon: handle session delete IPC message","description":"Add a daemon IPC handler to delete a session from the store.\n\n- New IPC message type: DeleteSession { session_id: String }\n- Handler removes the session from SessionStore entirely (not just set status to closed)\n- Return success/error response (e.g., session not found)\n- Include tests: delete existing session, delete non-existent session, verify session gone after delete\n- Do NOT implement broadcast to TUI clients yet — that is a separate research task\n\nAgent: daemon-core.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-17T00:16:45.247906+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T00:58:13.709034+01:00","closed_at":"2026-02-17T00:58:13.709034+01:00","close_reason":"DELETE IPC handler added. Removes session from store entirely. 6 tests. Commit: aa87f4f"}
{"id":"acd-mfo","title":"TUI regression: directory column shows full path instead of basename","description":"## Observed behavior\n\nDirectory column in the full TUI shows the complete path (e.g.,\n`/home/user/projects/my-app`) instead of just the basename (`my-app`).\n\n## Expected behavior\n\nDirectory column shows basename by default. When multiple sessions share\nthe same basename, parent folders are added for disambiguation (up to 3\nlevels). This logic exists in `compute_directory_display_names()` at\n`tui/views/dashboard/mod.rs:75`.\n\n## Investigation notes\n\nThe code uses `path.file_name()` which should extract the basename. The\nregression may be in:\n- How `working_dir` is sent from hooks to daemon (full path vs normalized)\n- An edge case in path handling (trailing slash, symlinks, etc.)\n- Data-level issue rather than display-level issue\n\n## Design question (deferred)\n\nDisambiguation currently lives only in the TUI. Should the daemon also\ncompute display names? Separate issue for this design discussion.\n\n## Reproduction\n\nRun `acd tui` with active Claude Code sessions. Observe the Directory column.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-16T00:51:12.4525+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T01:23:20.628102+01:00","closed_at":"2026-02-16T01:23:20.628102+01:00","close_reason":"Not a bug. User had duplicate folder names with different session IDs, triggering disambiguation (expected behavior)."}
{"id":"acd-mpyo","title":"Refactor: replace hardcoded IPC command strings with enum","description":"Replace hardcoded IPC command strings (\"SET\", \"GET\", \"RM\", \"DELETE\", \"SUB\", etc.) with a Rust enum that has string values. This improves type safety and prevents typos.\n\nCurrent: commands are matched as raw strings in server.rs and sent as strings from CLI.\nTarget: IpcCommand enum with Display/FromStr implementations, used throughout.\n\nAgent: daemon-core.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-17T01:16:31.986043+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T01:38:20.389953+01:00","closed_at":"2026-02-18T01:38:20.389953+01:00","close_reason":"IpcCommandKind enum with Display/FromStr replaces all hardcoded strings. 7 files, 4 new tests. Commit: 0a2852f"}
{"id":"acd-mq6y","title":"TUI: move version display from footer to header line","description":"Current: version (v0.1.2) in bottom-right footer (ui.rs:104-110). New: move to header line, RIGHT-ALIGNED, dim gray style (visible but subdued — not too dim). Format: 'v0.1.2' right-aligned in the header block. Remove version from footer — bottom-right reserved for API usage (acd-0i4i). Files: src/tui/ui.rs, update footer/header tests.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T01:04:35.202111+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T19:17:33.518375+01:00","closed_at":"2026-02-16T19:17:33.518375+01:00","close_reason":"Version moved from footer to header, right-aligned in DarkGray. Footer cleared for API usage (acd-0i4i). Commit: ec6411c7e9bcdc3a862a67703cbdb78953808c78"}
{"id":"acd-mwk4","title":"Widget trait: support multi-line rendering","description":"The Widget::render method currently returns a single Line. The two-line session status widget (for three-line compact layout) needs to render 2 lines. Options: (1) Change Widget::render to return Vec\u003cLine\u003e, (2) Add a separate multi-line rendering path outside the Widget trait, (3) Use two coordinated widgets sharing state. Needs design discussion before implementation.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T04:02:05.422938+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T04:02:05.422938+01:00","labels":["needs-design"]}
{"id":"acd-n7r","title":"Add just as development task runner","description":"Adopt just (justfile) as the project task runner for development commands (test, lint, fmt, build, etc.). Replace manual cargo commands in documentation and scripts with just recipes.\n\nScope:\n1. Add justfile with recipes for: test, lint (clippy + fmt check), fmt (auto-fix), build, doc, pre-commit, pre-push\n2. Migrate scripts/pre-commit.sh logic to just recipes (the shell script can call just, or be replaced entirely)\n3. Update AGENTS.md with just usage instructions for agents\n4. Update docs/dev/ references to use just commands\n\nDiscussion needed: just vs cargo xtask tradeoffs. User wants to understand why xtask convention isn't widely followed despite being 'the Rust way.' Cover: verbosity of Rust for shell tasks, extra binary requirement, community adoption, when each makes sense.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-14T02:53:46.023692+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T23:05:24.832361+01:00","closed_at":"2026-02-15T23:05:24.832361+01:00","close_reason":"Superseded by acd-0o2. Decision: use shell scripts instead of just. just adds a dependency with marginal benefit for simple cargo wrappers. Git Bash covers Windows."}
{"id":"acd-nd1","title":"CLI command to set session priority","description":"Add `--priority \u003cu64\u003e` flag to the SET command (Option A — extend existing command).\n\nPriority is a u64 unsigned integer. Default: 0. Higher value = ranked higher in\nthe TUI session list (see acd-wx6 for sort order).\n\n## Implementation\n\n1. Add `priority: u64` field to `Session` struct (default 0)\n2. Add `priority: u64` field to `SessionSnapshot` (`#[serde(default)]`)\n3. Include priority in `From\u003c\u0026Session\u003e for SessionSnapshot`\n4. Add `priority: Option\u003cu64\u003e` to `IpcCommand`\n5. Extend `handle_set_command` to update priority when provided\n6. Rename `broadcast_status_change` → `broadcast_session_change`; fire on\n   status OR priority change\n7. Add `--priority \u003cu64\u003e` to CLI `set` subcommand\n8. Tests for priority storage, broadcast, and IPC round-trip\n\n## CLI (current tree, pre-redesign)\n\n```text\nacd set \u003csession_id\u003e \u003cstatus\u003e --priority \u003cu64\u003e [--working-dir \u003cpath\u003e]\n```\n\nAfter CLI tree redesign (acd-2jp), this becomes `acd session set ...`.\n\n## IPC\n\n```json\n{\"version\": 1, \"cmd\": \"SET\", \"session_id\": \"abc\", \"status\": \"working\", \"priority\": 5}\n```\n\nPriority-only updates (no status change) are deferred — requires making status\noptional in SET, which is part of acd-2jp scope.","notes":"Design decisions (session):\n- Option A chosen: extend SET command with --priority flag\n- No separate PRIORITY IPC command\n- Priority-only updates (without status) deferred to CLI tree redesign (acd-2jp)\n  where status becomes optional in session set\n- broadcast_status_change → broadcast_session_change (fires on any change)","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T22:31:58.522543+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T21:12:54.02185+01:00","closed_at":"2026-02-14T21:12:54.02185+01:00","close_reason":"Implemented: session sorting + CLI priority flag","labels":["needs-design"],"dependencies":[{"issue_id":"acd-nd1","depends_on_id":"acd-wx6","type":"blocks","created_at":"2026-02-12T22:32:08.028997+01:00","created_by":"Pablo LION"}]}
{"id":"acd-ndg","title":"Add interactive TUI E2E tests with terminal emulation","description":"Add automated tests that exercise the TUI's interactive event loop — key presses,\nmouse clicks, timing — not just rendered output.\n\n## Context\n\nCurrent TUI tests use ratatui's TestBackend to render frames and assert on cell\ncontent, colors, and layout. These cover rendering correctness but not the\ninteractive loop (event handling, state transitions from real input sequences).\n\nThe e2e-test-plan.md notes \"TUI (step 7) cannot be automated and must be tested\nmanually.\" This issue aims to change that.\n\n## Approaches to Evaluate\n\n### PTY-based crates (recommended starting point)\n\n- **expectrl** (https://docs.rs/expectrl): Spawn a PTY, send keystrokes, match\n  output patterns. Rust-native, no external deps.\n- **rexpect** (https://docs.rs/rexpect): Similar expect-style PTY automation.\n\nThese would launch `acd tui` in a real terminal emulator and verify output.\nAdded as dev-dependencies only — no production impact.\n\n### Snapshot testing with insta\n\n- **insta** (https://docs.rs/insta): Snapshot/golden-file testing. Combined with\n  TestBackend, captures full terminal buffer as text for regression detection.\n- Lower effort than PTY tests, catches unintended layout changes.\n\n### Custom event injection harness (higher effort)\n\n- Make App::run() accept an event source trait\n- Inject synthetic crossterm::event::Event values in tests\n- No external tool deps, fast and deterministic\n- Moderate refactor — consider only if PTY crates prove insufficient\n\n### VHS (visual demos, not assertions)\n\n- charmbracelet/vhs: Records terminal sessions from scripts\n- Good for visual regression screenshots, not programmatic assertions\n\n## Test Scenarios to Cover\n\n- j/k navigation moves highlight marker\n- Enter opens detail panel, Esc closes it\n- Mouse click selects session, double-click fires hook\n- q exits cleanly\n- Scroll wheel navigates list and detail history\n- Resize triggers responsive layout change\n- Header click clears selection\n\n## Notes\n\n- crossterm provides the Event enum (key, mouse, resize) that drives the loop\n- ratatui's TestBackend already used extensively in existing unit tests\n- PTY crates are dev-dependencies only, acceptable for test infrastructure\n- Discuss approach in detail when working on this issue","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-14T01:50:57.609818+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T01:50:57.609818+01:00"}
{"id":"acd-nvqd","title":"Add install.sh script to scripts folder","description":"Add install.sh to scripts/ folder. Scope:\n\n1. Wrap `cargo install --path crates/agent-console-dashboard` as the main action.\n2. Include quick pre-flight checks (no heavy computation): verify cargo is installed, rust toolchain available, etc.\n3. Do NOT run `acd install` after building — user runs that manually if needed.\n4. Update scripts/README.md table with the new script entry.\n\nAgent: build-tooling.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T01:23:22.889166+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T20:32:03.707379+01:00","closed_at":"2026-02-16T20:32:03.707379+01:00","close_reason":"Added install.sh with pre-flight checks (cargo/rustc). Updated README.md table. Commit: 8688f47753017bd180c0135c6e0165f1596aed7b"}
{"id":"acd-o62","title":"Show status bar message when double-click hook is not configured","description":"Double-click visual feedback for TUI sessions. Two cases: (1) No hook configured: show status bar message with config file path, e.g. \"No double-click hook configured. Set tui.double_click_hook in \u003cconfig-path\u003e\". (2) Hook IS triggered: show confirmation message, e.g. \"Hook triggered: \u003chook-command\u003e\". Currently double-click with no hook silently does nothing, and hook trigger has no visual feedback either.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T00:13:44.633437+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.008309+01:00","closed_at":"2026-02-12T05:40:27.008309+01:00","close_reason":"Closed"}
{"id":"acd-o7kl","title":"Organize .git-ignored folder: separate devlog from reference docs","description":"The .git-ignored folder contains a mix of devlog notes (dispatch-plan-v2/v3, dispatch-lessons) and reference docs (hook-json-schema, table-layout-terminology, format-spec-syntax). Categorize and reorganize: create subdirectories like devlog/ and reference/ to make the folder navigable.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T15:43:54.822465+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T15:43:54.822465+01:00"}
{"id":"acd-oix","title":"Extract TUI tests: dashboard.rs, app.rs, detail.rs, event.rs","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T15:28:10.396816+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T21:57:04.341677+01:00","closed_at":"2026-02-13T21:57:04.341677+01:00","close_reason":"Closed"}
{"id":"acd-ojb","title":"Update E001 daemon code: auto-stop 60min + actor model","description":"Code changes needed after epic amendments: (1) Update AUTO_STOP_IDLE_THRESHOLD_SECS from 1800 to 3600 in daemon code, (2) Refactor connection handling from tokio::spawn per connection to single-threaded actor model with mpsc queue, (3) Replace Arc\u003cRwLock\u003cHashMap\u003e\u003e with plain HashMap. Scope: crates/agent-console-dashboard/src/daemon/. See docs/architecture/2026-01-31-decision-amendments.md amendments 1-2.","status":"closed","priority":0,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-01-31T05:01:48.103218+01:00","created_by":"Pablo LION","updated_at":"2026-02-05T09:08:36.54909+01:00","closed_at":"2026-02-05T09:08:36.54909+01:00","close_reason":"Split into focused issues: acd-2co (P1, idle timer implementation), acd-jnd (P4, configurability), acd-51l (P4, actor model deferred). Code audit found no deadlocks possible, one inconsequential TOCTOU. Current RwLock model is idiomatic Rust and correct for our scale."}
{"id":"acd-opf","title":"Republish claude-hooks v0.1.1 with two-layer safety","description":"Changes after initial publish (two-layer safety check) are not on crates.io yet. Bump version to v0.1.1 and republish.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:50.670104+01:00","created_by":"Pablo LION","updated_at":"2026-02-04T19:30:56.045108+01:00","closed_at":"2026-02-04T19:30:56.045108+01:00","close_reason":"Published v0.1.1 with serial group fix"}
{"id":"acd-oso","title":"E2E test: TUI disambiguation with isolated daemon","description":"E2E test that starts an isolated daemon, creates two sessions with same basename directories, launches the TUI, and verifies disambiguation is visible. Depends on TUI E2E test framework (acd-ndg). Requirements: isolated daemon (custom socket), mock sessions, TUI assertion via terminal emulation, cleanup after test.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-14T04:45:11.060603+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:45:11.060603+01:00","dependencies":[{"issue_id":"acd-oso","depends_on_id":"acd-ndg","type":"blocks","created_at":"2026-02-14T04:45:16.281142+01:00","created_by":"Pablo LION"}]}
{"id":"acd-p26i","title":"Update status symbols to ASCII characters with inactive symbol","description":"Change all status symbols in status_symbol() to ASCII characters, and add a new inactive symbol. Current → New: Working ● → *, Attention ○ → !, Question ? → ? (unchanged), Closed × → x, Inactive (new) → . (dot). Inactive is not a Status enum variant — it is determined by is_inactive() time check. The chip renderer and dashboard view must check is_inactive() and use dot instead of the status symbol. The dimming logic (DarkGray) for inactive/closed remains unchanged. Update status_symbol() in src/tui/views/dashboard/mod.rs. Update all tests that assert on status symbols. Agent: tui-visual.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-20T10:54:23.594595+01:00","created_by":"Pablo LION","updated_at":"2026-02-20T11:03:37.129286+01:00","closed_at":"2026-02-20T11:03:37.129286+01:00","close_reason":"ASCII status symbols: * ! ? x and . for inactive. Commit: c9d446e"}
{"id":"acd-p6f","title":"Config documentation and acd config show command","description":"## Problem\n\nNo user-facing documentation on config options. Users don't know what settings exist,\nwhat the defaults are, or how to customize behavior. Three gaps:\n\n1. **No `acd config show`**: Users can create a config (`acd config init`), check\n   the path (`acd config path`), and validate (`acd config validate`), but cannot\n   view current effective values (defaults + file overrides + env var overrides).\n\n2. **No config reference docs**: The TOML schema defines fields like\n   `socket_path`, `tick_interval_secs`, `usage_fetch_interval`, `auto_stop_idle_secs`,\n   etc. but these are only documented in the source code. No user-facing reference.\n\n3. **No `--help` integration**: `acd config --help` shows subcommands but doesn't\n   explain what configuration controls.\n\n## Context\n\nConfig system implemented in E007. Config loading, XDG paths, TOML parsing all work.\nThe schema is defined in `src/config/` module. Default values documented in open\nquestions Q39. Environment variable overrides supported per Q64.\n\n## Acceptance Criteria\n\n- `acd config show` displays current effective config (resolved from defaults + file + env)\n- Config reference section added to README or as separate `docs/configuration.md`\n- Each config key documented with: type, default, description, env var override name","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-09T07:40:52.858888+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T01:58:42.966626+01:00","closed_at":"2026-02-11T01:58:42.966626+01:00","close_reason":"acd config show displays effective config as TOML with source header. Committed 83ba356."}
{"id":"acd-p6ym","title":"Detail panel: copy session ID to clipboard","description":"Add keybinding to copy session ID to clipboard from the detail panel.\n\n- Keybinding: s (not taken, checked)\n- Clipboard crate: arboard (cross-platform, pure Rust)\n- Only works when a session is selected (detail panel visible)\n- Detail panel hint text: \"s copy session ID\" (short)\n- No clickable button for now — keybinding only\n- Scope: copy session_id only (full path copy is a future feature)\n\nAgent: tui-visual.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-17T00:09:27.2226+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T03:37:29.185219+01:00","closed_at":"2026-02-17T03:37:29.185219+01:00","close_reason":"Copy session ID to clipboard with 's' key. arboard crate, detail hint, footer hint. Commit: 425aa05"}
{"id":"acd-pbt5","title":"Two-line compact: capture design decisions in issue descriptions","description":"Design decisions from session discussion that need to be captured in acd-hex sub-issue descriptions before dispatch: (1) Stop at boundaries (no wrap-around). (2) Gray arrows when no sessions in that direction. (3) Up/down (j/k) still work in two-line mode. (4) Mouse scroll wheel scrolls sessions. (5) Overflow indicators are non-interactive (not focusable). (6) Selected session shown with [brackets]. (7) Sort matches full TUI. These should be added to the sub-issue descriptions when acd-hex is broken down into beads issues.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T15:43:48.470766+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T18:04:41.95846+01:00","closed_at":"2026-02-16T18:04:41.95846+01:00","close_reason":"Design decisions folded into acd-hex sub-issue descriptions (acd-4398, acd-xh40, acd-6wg6, acd-xmew)"}
{"id":"acd-pdx","title":"Dynamic padding for all columns instead of hardcoded","description":"Column padding (currently 2 spaces each side) should be dynamic rather than hardcoded. Exact behavior TBD — possibly scale with terminal width or use proportional spacing.","status":"open","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:28.350981+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:19:28.350981+01:00","labels":["needs-design"]}
{"id":"acd-ps6","title":"Column reorder: directory flex-left, fixed columns right","description":"Reorder TUI columns: directory column on the LEFT with flex width (expands to fill remaining space, like CSS flexbox). Three fixed-width columns (session_id, status, time elapsed) on the RIGHT. Current layout has directory first but with truncated fixed width. New layout: [directory (flex)] [session_id (40)] [status (13)] [elapsed (16)].","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:14:45.670211+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T23:37:35.062902+01:00","closed_at":"2026-02-11T23:37:35.062902+01:00","close_reason":"Merged into acd-isj. Not a reorder — just width rearrangement.","dependencies":[{"issue_id":"acd-ps6","depends_on_id":"acd-isj","type":"blocks","created_at":"2026-02-11T22:14:51.67248+01:00","created_by":"Pablo LION"}]}
{"id":"acd-puk","title":"Config: add activate_hook + reopen_hook to schema","description":"## Parent\n\nSub-issue of acd-bwa (redesign resurrect → reopen).\n\n## Scope\n\nRename and add hook fields in the config schema:\n\n- Rename `tui.double_click_hook` → `tui.activate_hook`: fires on double-click\n  of a non-closed session (same behavior as before, just renamed)\n- Add new `tui.reopen_hook`: fires on double-click of a closed session\n\nBoth hooks fire on double-click. The TUI decides which to fire based on\nsession state (closed vs not closed). No backwards compatibility — just remove\nthe old `double_click_hook` key.\n\nBoth hooks receive SessionSnapshot as JSON on stdin. Support placeholder\nsubstitution: {session_id}, {working_dir}, {status}.\n\n### Files to change\n\n- Config schema (TOML definition): rename double_click_hook → activate_hook, add reopen_hook\n- Config parsing/validation\n- Default config template (if any)\n\n### Not in scope\n\n- TUI wiring (separate issue acd-1j2)\n- CLI wiring (separate issue acd-jau)","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-15T02:23:32.279477+01:00","created_by":"Pablo LION","updated_at":"2026-02-15T03:05:09.630487+01:00","closed_at":"2026-02-15T03:05:09.630487+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-puk","depends_on_id":"acd-3qx","type":"blocks","created_at":"2026-02-15T02:23:59.431906+01:00","created_by":"Pablo LION"}]}
{"id":"acd-qe8","title":"Install command: write hooks to ~/.claude/settings.json","description":"Plugin is not installed in Claude Code. .claude-plugin/ is a gitignored build artifact — Claude Code doesn't auto-discover it. Add 'acd install' command that writes hooks directly to ~/.claude/settings.json (user scope). Also add 'acd uninstall' to remove them. See docs/end-to-end-blockers.md B1+B6.","status":"closed","priority":0,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-08T18:24:36.803276+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T18:51:55.257828+01:00","closed_at":"2026-02-08T18:51:55.257828+01:00","close_reason":"Closed"}
{"id":"acd-qga","title":"Config init --force: show backup path and new file path in console","description":"When running 'acd config init --force' and an existing config is found:\n1. No feedback is shown during backup\n2. User doesn't know where the old config was backed up to\n\nExpected output:\n  Old config backed up to: /path/to/config.toml.bak.20260213T143052Z\n  Created new config: /path/to/config.toml\n\nIf --force is used but no existing config exists, behave as if --force was not passed (just create a new config normally).\n\nBackup filename format: \u003cname\u003e.bak.\u003ctinydate\u003e where tinydate uses Zulu time: YYYYMMDDTHHmmssZ (16 chars). Example: config.toml.bak.20260213T143052Z\n\nNote: 'acd config init' (without --force) already prints the path — no change needed there.","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-12T16:06:47.789972+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T05:34:14.4464+01:00","closed_at":"2026-02-13T05:34:14.4464+01:00","close_reason":"Closed"}
{"id":"acd-qgv5","title":"Compact view: global activity feed (Line 2 global item)","description":"In the compact view, when a \"global item\" is selected in Line 1, Line 2 should show a global activity feed: which session changed to which state, how long ago, across all sessions sorted by time. Deferred from acd-hex. Depends on three-line layout being implemented first. Design doc reference: docs/design/ui.md lines 75-80.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T04:01:59.606166+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T04:01:59.606166+01:00"}
{"id":"acd-qhh","title":"One-line compact TUI dashboard view","description":"A minimal single-line TUI view that shows essential information in one row. Designed for tight spaces like Zellij status panes (size=2).\n\n## Content (must fit one line)\n\n- API usage: 5h and 7d percentage from claude-usage\n- Latest activity: most recent session name + status (or aggregated status indicator)\n- More content TBD during design phase\n\n## Interaction\n\n- Click: TBD (select? expand to full view?)\n- Double-click: TBD (open detail? switch to multi-line view?)\n- Keyboard bindings: TBD\n\n## Design considerations\n\n- Truncation strategy: how to handle long session names or many sessions in one line\n- View switching: keybinding to toggle between one-line and full dashboard (e.g. Tab or 1/2/3 for layout presets)\n- Color coding: session status as colored dots/icons since no room for text status\n- Overflow indicator: when more sessions than fit, show count (e.g. '3 sessions, 1 attention')\n\nFull design to come later. This issue captures the intent and known requirements.\n\n## Relationship to existing work\n\n- Related to acd-hex (compact 3-line view) — this is even more minimal (1 line)\n- Related to acd-7u2 (multiplexer integration) — the one-line view is what goes in a Zellij minimal layout pane","notes":"Deferred to after v1 per user decision (2026-02-16). Focus on 3-line layout (acd-hex) first.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-10T00:00:31.187671+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T01:04:34.172436+01:00"}
{"id":"acd-qk2","title":"Plugin distribution strategy decision (B1+B4)","description":"## Problem\n\nTwo hook installation paths exist with no clear strategy for which to use when:\n\n| Path | Method | Audience | Status |\n|------|--------|----------|--------|\n| acd install | Writes to ~/.claude/settings.json | Personal use | Working |\n| .claude-plugin/plugin.json | Build artifact from build.rs | Distribution | Unclear |\n\n### Issues with the Plugin Path\n\n1. .claude-plugin/ is gitignored — won't ship via git clone\n2. Plugin marketplace discovery is undocumented — unclear how to publish\n3. claude plugin install requires a marketplace entry (local or remote)\n4. build.rs generates plugin.json but nobody can use it without the binary\n\n### Issues with settings.json Path\n\n1. Works perfectly for personal use\n2. Cannot distribute to others (requires them to have acd installed first)\n3. Hardcodes binary path — won't work if acd is at a different location\n\n### Decision Needed\n\nChoose one of:\n\nA. **settings.json only**: Remove plugin system from build.rs. acd install is the\n   only installation method. Distribution via cargo install + acd install.\n   Plugin marketplace not needed.\n\nB. **Both paths**: Keep plugin.json for future marketplace publishing. Use\n   acd install for now. Revisit plugin distribution when Claude Code marketplace\n   is more mature.\n\nC. **Plugin-first**: Research Claude Code plugin marketplace requirements. Publish\n   plugin. Make acd install a fallback for users who prefer manual setup.\n\n### Recommendation\n\nOption B (keep both, defer marketplace). The plugin infrastructure costs nothing\nto maintain (build.rs generates it automatically). When the marketplace matures,\nwe can publish without rework.\n\n## References\n\n- Blockers doc: B1 and B4\n- Claude Code plugins reference: https://code.claude.com/docs/en/plugins-reference","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-09T07:41:18.389394+01:00","created_by":"Pablo LION","updated_at":"2026-02-09T07:41:18.389394+01:00"}
{"id":"acd-qku","title":"Rename Session.id to Session.session_id for Claude Code naming consistency","description":"Rename the Session.id field to Session.session_id to match Claude Code's naming. Remove the unused Session.session_id: Option\u003cString\u003e field first. Mechanical refactor touching many files.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:21.034042+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T05:10:44.947671+01:00","closed_at":"2026-02-11T05:10:44.947671+01:00","close_reason":"Renamed Session.id and DumpSession.id to session_id across 20 files. All 534 lib tests + 12 integration tests passing."}
{"id":"acd-qy9w","title":"Epic: Next refactor batch","description":"P4 backlog: refactoring and cleanup tasks deferred from current work. Not blocking any features. Children: acd-zcjx (layout naming), acd-b87v (time format centralization).","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T04:48:14.643304+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T04:48:14.643304+01:00"}
{"id":"acd-r4c","title":"Verify elicitation dialog → question state end-to-end","description":"Verify elicitation dialog → question state end-to-end.\n\nResearch report (acd-zdj, closed): /Users/pablo/base/manifold-worktrees/mf-cc-research/claude-code-handbook/pretooluse-askuserquestion-hook.md\n\nRead that report before starting implementation. It documents which hook to use (PreToolUse with AskUserQuestion matcher) and any caveats.\n\nPreviously blocked by: acd-g5h (closed), acd-zdj (closed). Now unblocked.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:39.041305+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T18:21:07.108536+01:00","dependencies":[{"issue_id":"acd-r4c","depends_on_id":"acd-g5h","type":"blocks","created_at":"2026-02-08T22:14:43.548313+01:00","created_by":"Pablo LION"},{"issue_id":"acd-r4c","depends_on_id":"acd-zdj","type":"blocks","created_at":"2026-02-10T01:01:02.290586+01:00","created_by":"Pablo LION"}]}
{"id":"acd-r57","title":"Fix TUI layout — right-align columns, flexbox-style name column","description":"Current layout centers content. Change to: first column (session name) is flexible and grows/shrinks with terminal width. Last 3 columns (status, working directory, elapsed time) are right-aligned with fixed widths. Like CSS flexbox where name column is flex:1 and others are fixed.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T22:14:31.486474+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T11:54:51.250015+01:00","closed_at":"2026-02-10T11:54:51.250015+01:00","close_reason":"Implemented: columns right-aligned. Superseded by acd-csg (labels should be left-aligned instead)","dependencies":[{"issue_id":"acd-r57","depends_on_id":"acd-lht","type":"blocks","created_at":"2026-02-08T22:43:23.64525+01:00","created_by":"Pablo LION"}]}
{"id":"acd-rb0","title":"Detail panel: show summary stats when no session selected","description":"When the detail panel is visible but no session is focused, show summary statistics: session counts by status (working, attention, closed), daemon uptime, etc. This is an enhancement to the hint text shown in the always-visible detail panel. Depends on always-visible detail panel being implemented first.","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-14T02:55:06.707807+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T02:55:06.707807+01:00","dependencies":[{"issue_id":"acd-rb0","depends_on_id":"acd-zpg","type":"blocks","created_at":"2026-02-14T02:55:10.479324+01:00","created_by":"Pablo LION"}]}
{"id":"acd-rbv5","title":"CLI: remove/drop session from daemon list","description":"Parent issue. Split into 3 sub-issues:\n- acd-mf45: Daemon handler for session delete IPC (daemon-core)\n- acd-tmk9: CLI command acd session delete (cli-features), blocked by mf45\n- acd-wtr7: Research broadcast complexity (daemon-core)\n\nCommand naming follows CRUD: Create/Read/Update/Delete → acd session delete \u003cid\u003e\n\nOriginal scope: remove session from daemon list entirely. Closed/inactive sessions currently stay visible. Needed for acd-938s testing and garbage collection.","status":"closed","priority":2,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-17T00:09:24.535481+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T04:51:02.302986+01:00","closed_at":"2026-02-18T04:51:02.302986+01:00","close_reason":"All 3 sub-issues complete: acd-mf45 (daemon handler), acd-tmk9 (CLI command), acd-wtr7 (broadcast research)."}
{"id":"acd-rhr","title":"Discuss full UUID v4 validation for session_id","description":"Currently we only validate session_id is 36 chars with hex+dashes. Should we enforce full UUID v4 format (8-4-4-4-12 pattern, version nibble = 4)? Pros: catches invalid IDs early. Cons: breaks if Claude Code changes format. Decision needed.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T00:01:39.294245+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T00:01:39.294245+01:00","labels":["needs-design"]}
{"id":"acd-rla","title":"Update design docs with fixed column layout decisions","description":"Document the TUI column layout decisions in docs/design/ui.md:\n- Fixed columns: session_id (40), status (13), time elapsed (16) — right-aligned\n- Directory column: flex width, left side\n- Padding: dynamic (not hardcoded)","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-11T22:19:24.339375+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T03:07:17.505466+01:00","closed_at":"2026-02-12T03:07:17.505466+01:00","close_reason":"Design docs updated directly in main thread: docs/design/ui.md now has column layout section, cell content alignment rule, and highlight marker decisions."}
{"id":"acd-rxy","title":"Bug: directory (cwd) not recognized from hook input","description":"Passing cwd via echo hook command doesn't set the working directory. User tested with: echo '{\"session_id\":\"test\",\"cwd\":\"/tmp\"}' | acd claude-hook working — directory not recognized. Need to investigate hook stdin parsing. Use ACD_LOG=debug to diagnose.","notes":"Implementation details:\n- Replaced split_whitespace() text protocol with JSON Lines (IpcCommand, IpcResponse structs)\n- Created SessionSnapshot wire struct (from Session with Instant→u64 conversion)\n- Created StatusChange history entries (status + at_secs unix timestamp)\n- Fixed get_or_create_session to update working_dir on existing sessions\n- Removed api_usage from wire struct (not consumed by any client)\n- Renamed old SessionSnapshot (dump) to DumpSession to avoid collision\n- Updated TUI subscription to parse JSON instead of text\n- All IPC commands: SET, LIST, GET, RM, SUB, STATUS, DUMP, RESURRECT use JSON\n- 528 lib + 40 bin + 12 integration tests pass\n- Committed as d6c43e4, documented in docs/decisions/ipc-protocol.md","status":"closed","priority":2,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-10T10:27:28.257468+01:00","created_by":"Pablo LION","updated_at":"2026-02-10T23:45:30.614315+01:00","closed_at":"2026-02-10T23:39:47.633594+01:00","close_reason":"JSON Lines IPC implemented. All commands/responses use JSON. SessionSnapshot wire struct with StatusChange history. get_or_create_session fixed."}
{"id":"acd-ryg","title":"Split main.rs (1808 lines) into main.rs + commands/ module","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T15:28:08.421569+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T21:57:04.337626+01:00","closed_at":"2026-02-13T21:57:04.337626+01:00","close_reason":"Closed"}
{"id":"acd-rzl","title":"Add shell autocompletion script for acd CLI","status":"open","priority":4,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-11T22:00:48.761222+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T22:00:48.761222+01:00","labels":["needs-design"]}
{"id":"acd-s07","title":"Replace silent \".\" fallback when cwd is absent from hook JSON","description":"When Claude Code hook JSON has no cwd field, run_set_command defaults to \".\" which resolves relative to the daemon's cwd, not the session's. This is semantically wrong — resurrection validation would pass incorrectly, and the dashboard shows useless \".\" as working dir. Needs design decision: use \"unknown\" sentinel, log a warning, or require cwd.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.285338+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:28:08.778259+01:00","closed_at":"2026-02-08T01:28:08.778259+01:00","close_reason":"Fixed: uses \u003cunknown\u003e sentinel + stderr warning instead of silent ."}
{"id":"acd-s27","title":"Split store/mod.rs (639 lines) into mod.rs + lifecycle.rs + closed.rs","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T15:28:09.310282+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T21:57:04.339577+01:00","closed_at":"2026-02-13T21:57:04.339577+01:00","close_reason":"Closed"}
{"id":"acd-slxu","title":"Epic: v0.1.3 manual testing","description":"Manual testing tasks for the v0.1.3 patch release. Includes empirical verification of hook behavior, session_id stability, and other items that cannot be automated.","status":"open","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T05:49:48.626912+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T05:49:48.626912+01:00"}
{"id":"acd-tmk9","title":"CLI: acd session delete command","description":"Add CLI command: acd session delete \u003csession_id\u003e\n\n- Sends DELETE IPC message to daemon (command string: \"DELETE\")\n- On success: print the returned SessionSnapshot (option b)\n- On failure: print error message\n- No --force flag needed for now\n- If the session subcommand group does not exist yet, create it\n- Include CLI tests\n\nAgent: cli-features.","notes":"Design decisions:\n- Output: print full SessionSnapshot on success (not just \"deleted\")\n- IPC command: \"DELETE\" (matches daemon handler from acd-mf45)\n- Session subcommand may need to be created if it doesnt exist yet","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-17T00:16:48.190594+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T05:54:31.398301+01:00","closed_at":"2026-02-17T05:54:31.398301+01:00","close_reason":"CLI session delete command implemented. 3 files, 3 tests. Commit: e3d4fd6","dependencies":[{"issue_id":"acd-tmk9","depends_on_id":"acd-mf45","type":"blocks","created_at":"2026-02-17T00:16:57.803157+01:00","created_by":"Pablo LION"}]}
{"id":"acd-tvr","title":"Handle Claude Code hook JSON schema versioning","description":"Document the current Claude Code hook stdin JSON schema and the Claude Code version we support. Add version detection or a dispatcher if the JSON format changes in future Claude Code versions. Current schema has: session_id, transcript_path, cwd, permission_mode, hook_event_name. Event-specific: Stop has reason, UserPromptSubmit has user_prompt.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:01:56.107185+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T13:01:56.107185+01:00"}
{"id":"acd-tw9","title":"Extract tests: claude-hooks lib.rs + settings.rs","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T15:28:12.190071+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T21:57:04.34713+01:00","closed_at":"2026-02-13T21:57:04.34713+01:00","close_reason":"Closed"}
{"id":"acd-tz3","title":"Wire lazy-start into claude-hook handler","description":"run_claude_hook_command() uses raw UnixStream::connect() via run_set_command(), bypassing the existing connect_with_auto_start() in client/connection.rs. The auto-start infrastructure (spawn daemon + exponential backoff retry) is built but not wired into the hook path. Fix: make the hook handler use connect_with_auto_start() so the daemon starts automatically on first hook trigger.","status":"closed","priority":0,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T15:17:00.493749+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T17:38:43.041967+01:00","closed_at":"2026-02-08T17:38:43.041967+01:00","close_reason":"Wired connect_with_lazy_start() into run_claude_hook_async(), daemon now auto-starts on first hook trigger","dependencies":[{"issue_id":"acd-tz3","depends_on_id":"acd-3kr","type":"blocks","created_at":"2026-02-08T15:22:45.117723+01:00","created_by":"Pablo LION"}]}
{"id":"acd-ubu","title":"Add pre-push hook with cargo doc and cargo test","description":"Create scripts/pre-push.sh that runs RUSTDOCFLAGS='-D warnings' cargo doc --workspace --no-deps --quiet and cargo test --workspace. build.rs installs the symlink alongside pre-commit.","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-08T00:57:06.550947+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:00:24.323569+01:00","closed_at":"2026-02-08T01:00:24.323569+01:00","close_reason":"Closed","dependencies":[{"issue_id":"acd-ubu","depends_on_id":"acd-bw4","type":"blocks","created_at":"2026-02-08T00:57:14.58858+01:00","created_by":"Pablo LION"}]}
{"id":"acd-ue1a","title":"Two-line layout: show folder name instead of session ID in chips","description":"Change chip labels in two-line layout from session_id prefix (first 8 chars of UUID) to working directory basename. Reuse the existing directory display logic from the Large layout (basename + parent disambiguation). If the formatting logic is not already a shared helper, extract it as a reusable function so both Large layout Dir column and two-line chips call the same code. Fallback to short session_id if working_dir is None. Agent: tui-rendering.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T22:37:36.601766+01:00","created_by":"Pablo LION","updated_at":"2026-02-19T19:38:56.309434+01:00","closed_at":"2026-02-19T19:38:56.309434+01:00","close_reason":"Chips show folder basename with parent disambiguation. Extracted get_directory_display_name() helper. Commit: b3718f4"}
{"id":"acd-uws","title":"Add --claude-path flag to acd service install","description":"Allow specifying the Claude CLI path instead of assuming it is on PATH. Over-engineering now, stored as a future idea for when we support multiple agent CLIs.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T13:01:53.062903+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T13:01:53.062903+01:00"}
{"id":"acd-vawl","title":"TUI: wire layout override from CLI flag","description":"Accept an optional LayoutMode override from the CLI flag and use it instead of auto-detection when present.\n\n- App::new() or run_dashboard() accepts Option\u003cLayoutMode\u003e parameter\n- When Some(mode): use that mode, skip height auto-detection\n- When None: auto-detect from terminal height (existing behavior)\n- The CLI flag parsing is in a separate issue — this only handles receiving and applying the override\n\nAgent: tui-rendering.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T06:09:17.042097+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T10:51:03.992926+01:00","closed_at":"2026-02-18T10:51:03.992926+01:00","close_reason":"Layout mode override parameter wired through App::new(). 9 files, 3 new tests. Commit: fe460f2"}
{"id":"acd-vnd","title":"Fix dead code warnings for unused hook functions","description":"cleanup_existing_acd_hooks() and uninstall_acd_hooks() are unused. Either keep for future 'acd uninstall-hooks' CLI command or add #[allow(dead_code)] with comment explaining why.","status":"closed","priority":3,"issue_type":"task","owner":"36828324+PabloLION@users.noreply.github.com","created_at":"2026-02-04T19:27:48.195917+01:00","created_by":"Pablo LION","updated_at":"2026-02-07T15:26:40.660117+01:00","closed_at":"2026-02-07T15:26:40.660117+01:00","close_reason":"Obsolete: daemon/hooks.rs deleted entirely in plugin migration (acd-a81)"}
{"id":"acd-wdaj","title":"Add PreCompact hook to fire working status","description":"When a session runs /compact, the PreCompact hook event fires but ACD has no hook configured for it. The session status should change to \"working\" during compaction. Currently 7 hooks are configured (SessionStart, UserPromptSubmit, Stop, SessionEnd, PreToolUse, two Notifications) but PreCompact is missing. Add PreCompact→working to both hook sources: build.rs (plugin.json) and main.rs (acd install).","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-16T03:20:03.072613+01:00","created_by":"Pablo LION","updated_at":"2026-02-16T19:13:32.381327+01:00","closed_at":"2026-02-16T19:13:32.381327+01:00","close_reason":"Added PreCompact→working hook to both build.rs and install.rs. Tests updated (7→8 hooks). Commit: bb27c70308c363dff65b3292158cf7358c435e9d"}
{"id":"acd-ws6","title":"Test PreToolUse timing by temporarily removing PostToolUse hook","description":"Experiment: temporarily remove PostToolUse hook from acd_hook_definitions() to test whether PreToolUse fires after user grants permission. If PreToolUse alone bridges the attention→working gap, PostToolUse may be redundant for status tracking. This informs hook ordering research (acd-7fm).","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-12T03:05:02.798643+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.00402+01:00","closed_at":"2026-02-12T05:40:27.00402+01:00","close_reason":"Closed"}
{"id":"acd-wsk","title":"Fix flaky test: create_with_force_creates_backup","description":"config::default::tests::create_with_force_creates_backup fails intermittently under parallel test execution due to serial_test contention on shared config file. Passes in isolation. Fix: use isolated temp directories per test or add proper locking.","status":"closed","priority":3,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-11T22:03:03.571535+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T05:40:27.016721+01:00","closed_at":"2026-02-12T05:40:27.016721+01:00","close_reason":"Closed"}
{"id":"acd-wtr7","title":"Research: broadcast complexity for session deletion to TUI clients","description":"Research task for daemon-core agent: investigate whether broadcasting a session deletion event to connected TUI clients is simple or complex.\n\nQuestions to answer:\n1. Does the current IPC protocol support notifying TUI clients of session removal?\n2. What changes would be needed to broadcast a \"session deleted\" event?\n3. Is it a trivial addition to existing broadcast infrastructure, or does it require new plumbing?\n\nOutput: Write findings to docs/agents/daemon-core/session-delete-broadcast.md\n- If simple: state why and what the implementation would look like (1-2 paragraphs)\n- If complex: document the technical challenges and estimated scope\n\nAgent: daemon-core.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-17T00:16:52.849762+01:00","created_by":"Pablo LION","updated_at":"2026-02-17T00:44:41.698011+01:00","closed_at":"2026-02-17T00:44:41.698011+01:00","close_reason":"Research complete: broadcast is simple (~50 LOC, 4 files). Report: docs/agents/daemon-core/session-delete-broadcast.md"}
{"id":"acd-wx6","title":"Sort sessions by status priority: attention \u003e working \u003e inactive \u003e closed","description":"Reorder sessions in the TUI using a lexicographic sort with three keys:\n\n1. **Status group** — attention \u003e working \u003e inactive \u003e closed.\n2. **User priority** (u64, descending) — higher value = ranked higher. Default: 0.\n3. **Time elapsed** — within each (status, priority) group.\n\nImplementation steps:\n1. Add priority: u64 field to Session struct (default 0) in src/lib.rs\n2. Add priority: u64 field to SessionSnapshot in src/ipc.rs (with serde default)\n3. Include priority in From\u003c\u0026Session\u003e for SessionSnapshot conversion\n4. Implement sort comparator: status_group() -\u003e priority (desc) -\u003e elapsed\n5. Add status_group() method on Status enum returning a u8 (attention=0, working=1, inactive=2, closed=3)\n6. Apply sort in the TUI before rendering the session list\n7. Add tests for sort ordering\n\nDesign decision (from notes): priority lives in daemon as a passively stored field. Daemon does not act on priority — stores and relays. Same pattern as working_dir.","notes":"Design decisions (session):\n\n**Broadcast**: Rename `broadcast_status_change` → `broadcast_session_change`.\nFire on any meaningful session change (status OR priority). The internal\nbroadcast channel carries a lightweight signal; the SUB handler always does a\nfull session lookup and sends the complete SessionSnapshot to TUI.\n\n**No new IPC command**: Priority flows through the existing SET command with\nan added `--priority` flag (Option A). No separate PRIORITY command.\n\n**Sort key**: (status_group ASC, Reverse(priority), Reverse(elapsed)).\nstatus_group: attention=0, working=1, inactive=2, closed=3.\n\n**CLI shape (after acd-2jp tree redesign)**: `acd session set \u003cid\u003e \u003cstatus\u003e\n[--priority \u003cu64\u003e] [--working-dir \u003cpath\u003e]`. For priority-only updates, status\nbecomes optional.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-12T21:48:48.144412+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T21:12:54.018073+01:00","closed_at":"2026-02-14T21:12:54.018073+01:00","close_reason":"Implemented: session sorting + CLI priority flag","labels":["needs-design"]}
{"id":"acd-x4f","title":"Verify highlight symbol 2-char padding on all rows","description":"Ensure every session row has 2-char left padding for the highlight symbol. Unselected rows should have 2 spaces matching the highlight_symbol width. Verify ratatui List widget handles this or add manual padding.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T14:54:27.625773+01:00","created_by":"Pablo LION","updated_at":"2026-02-11T20:48:57.749396+01:00","closed_at":"2026-02-11T20:48:57.749396+01:00","close_reason":"Closed"}
{"id":"acd-xh40","title":"Two-line compact layout renderer skeleton","description":"Add two-line layout mode to the TUI. Scope:\n\n1. Add LayoutMode enum (Large, TwoLine) to app state.\n2. Branch in render_dashboard (tui/ui.rs) based on layout mode.\n3. TwoLine renderer: Line 1 = session chips (horizontal, no pagination yet — just render as many as fit, truncate at width). Line 2 = API usage widget (reuse existing long mode widget).\n4. Auto-detection: terminal height \u003c 5 → TwoLine mode. Use a named constant for the threshold (value 5). Naming TBD (see acd-zcjx).\n5. No CLI flag yet (acd-xmew). No pagination/overflow indicators yet (acd-6wg6).\n\nThe session_status widget already renders a horizontal Line — reuse it for Line 1. The api_usage widget already renders a Line — reuse it for Line 2.\n\nAgent: tui-rendering.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T18:04:23.930933+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T05:49:30.22507+01:00","closed_at":"2026-02-18T05:49:30.22507+01:00","close_reason":"Two-line layout skeleton: LayoutMode enum, auto-detect height \u003c 5, session chips + API usage. 6 tests. Commit: 8540db1"}
{"id":"acd-xmew","title":"CLI --layout flag + COMPACT_LAYOUT_MAX_HEIGHT","description":"Add --layout \u003cname\u003e flag to acd tui command. Behavior:\n\n- When no flag: auto-detect layout based on terminal height. height \u003c COMPACT_LAYOUT_MAX_HEIGHT (constant, value 5) → TwoLine. Otherwise → Large.\n- When flag provided: use specified layout, overriding auto-detection.\n- Valid values: large (default full TUI), twoline (two-line view).\n- The LayoutMode enum and auto-detection logic already exist from acd-xh40. This issue adds the CLI flag and wires it to override auto-detection.\n\nBlocked by: acd-xh40 (skeleton with LayoutMode enum).\nAgent: tui-rendering or cli-features.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-16T18:04:31.559568+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T06:09:21.292096+01:00","closed_at":"2026-02-18T06:09:21.292096+01:00","close_reason":"Split into sub-issues: acd-66ij (CLI flag, cli-features) and acd-vawl (TUI wiring, tui-rendering).","dependencies":[{"issue_id":"acd-xmew","depends_on_id":"acd-xh40","type":"blocks","created_at":"2026-02-16T18:04:36.278959+01:00","created_by":"Pablo LION"}]}
{"id":"acd-xqx","title":"Split lib.rs (1615 lines) into lib.rs + ipc.rs + health.rs + tests/","status":"closed","priority":2,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-13T15:28:07.535026+01:00","created_by":"Pablo LION","updated_at":"2026-02-13T21:57:04.334609+01:00","closed_at":"2026-02-13T21:57:04.334609+01:00","close_reason":"Closed"}
{"id":"acd-ynv","title":"Remove unnecessary inner mod wrapper in claude_hook integration tests","description":"tests/claude_hook.rs wraps everything in mod claude_hook { ... } which adds indentation without namespacing benefit (test files are already separate crates). Removing it would simplify the file. Low priority style improvement.","status":"closed","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-07T21:46:05.277703+01:00","created_by":"Pablo LION","updated_at":"2026-02-08T01:20:57.291197+01:00","closed_at":"2026-02-08T01:20:57.291197+01:00","close_reason":"Closed"}
{"id":"acd-zcjx","title":"Layout naming and threshold refactoring","description":"Current layout naming is inconsistent. Need to define: (1) Rust enum type for layout modes (e.g., Large, TwoLine, ThreeLine). (2) Proper names for each layout mode. (3) Threshold constant names and values (currently COMPACT_LAYOUT_MAX_HEIGHT=5 is a placeholder). (4) How many layouts exist and boundaries between them. The two-line layout implementation (acd-hex) will use a TODO comment linking to this issue for the naming refactoring.","status":"open","priority":4,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-16T04:02:15.593698+01:00","created_by":"Pablo LION","updated_at":"2026-02-18T04:48:19.771079+01:00","labels":["needs-design"],"dependencies":[{"issue_id":"acd-zcjx","depends_on_id":"acd-qy9w","type":"blocks","created_at":"2026-02-18T04:48:19.986507+01:00","created_by":"Pablo LION"}]}
{"id":"acd-zdj","title":"Research AskUserQuestion hook in Claude Code","description":"Research task for a separate session (Claude Code-focused, not ACD code).\n\n## Background\nACD needs to detect when Claude Code shows an AskUserQuestion dialog so it can set the session status to 'question'. Investigation in acd-g5h confirmed the solution: PreToolUse hook with matcher 'AskUserQuestion'.\n\n## What to research\n\n### Verify PreToolUse/AskUserQuestion works\n- Set up a test hook with PreToolUse matcher AskUserQuestion\n- Confirm it fires when Claude Code shows an AskUserQuestion dialog\n- Confirm no blank-answer regression (was fixed in v2.0.76, current is v2.1.37+)\n- Test in both terminal and VSCode contexts\n\n### Compare with PermissionRequest\n- PermissionRequest also fires for AskUserQuestion (per acd-g5h notes)\n- Determine if both fire simultaneously\n- Recommend which to use (PreToolUse preferred — works in VSCode too)\n\n### Check for upstream progress\n- GitHub #13024 — main feature request for WaitingForInput hook (still open)\n- GitHub #10168 — where Anthropic staff (@dicksontsai) posted the workaround\n- GitHub #15872 — another AskUserQuestion hook request\n- Any new issues or PRs since Feb 2026\n\n### Document findings\n- Write up which hook to use and why\n- Note any caveats or version requirements\n- Feed results back to ACD implementation (acd-r4c depends on this)\n\n## Related issues\n- acd-g5h (closed) — original investigation, full notes there\n- acd-r4c — verify elicitation dialog → question state end-to-end (blocked)","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-10T01:00:56.974578+01:00","created_by":"Pablo LION","updated_at":"2026-02-12T18:21:01.624785+01:00","closed_at":"2026-02-12T18:21:01.624785+01:00","close_reason":"Research completed externally. Report at /Users/pablo/base/manifold-worktrees/mf-cc-research/claude-code-handbook/pretooluse-askuserquestion-hook.md"}
{"id":"acd-zhq","title":"Pre-commit hook: reduce verbose test output","description":"cargo test --workspace --quiet produces 81 lines in the pre-commit hook. The --quiet flag reduces cargo build output but the test harness still prints individual test dots (625+ dots), which is the main noise source.\n\nWhat to keep: warnings (unused imports etc.), 'running N tests' headers, 'test result:' summaries, 'error:' messages.\nWhat to remove: individual test dots (the '.....' lines).\n\nFix approach: in scripts/pre-commit.sh, capture test output and filter out dot-only lines. On test failure, show full unfiltered output. On success, show only warnings, headers, and summary lines.\n\nThere is no cargo flag to suppress dots while keeping warnings — the test harness only offers terse (dots), pretty (names), or json (nightly) formats. This must be solved at the shell script level.\n\nCurrent hook command: cargo test --workspace --quiet -- --test-threads=4\nFile to modify: scripts/pre-commit.sh (lines 49-50)","status":"closed","priority":1,"issue_type":"bug","owner":"dev@pablolion.com","created_at":"2026-02-14T02:17:45.877444+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T03:03:31.166777+01:00","closed_at":"2026-02-14T03:03:31.166777+01:00","close_reason":"Pre-commit hook now filters dot/i progress lines. Output reduced from 81 to ~62 lines (all meaningful content preserved)."}
{"id":"acd-zksu","title":"CLI: add auto as explicit --layout option","description":"Add auto as a valid value for the --layout flag on the tui subcommand. Add Auto variant to LayoutModeArg enum. Map Auto to None for layout_mode_override (same as omitting the flag). Makes the responsive behavior explicitly requestable: acd tui --layout auto. Useful for discoverability and future config file override scenarios. Should be listed first in help text as the default. Agent: cli-features. ~5 lines of code.","status":"closed","priority":3,"issue_type":"task","owner":"dev@pablolion.com","created_at":"2026-02-18T22:32:43.895443+01:00","created_by":"Pablo LION","updated_at":"2026-02-20T10:33:29.790763+01:00","closed_at":"2026-02-20T10:33:29.790763+01:00","close_reason":"Added auto variant to --layout flag, maps to None (responsive). Commit: 8a04d0f"}
{"id":"acd-zpg","title":"Always-visible detail panel with hint text","description":"Make the detail panel always visible below the session list. When no session is focused, show hint text: 'Select a session to see details' with keybinding hints. Do NOT auto-select the first session. The panel should never steal focus from the session list — keyboard (j/k) and scroll wheel must always navigate the session list regardless of whether the detail panel is showing content.\n\nAlso: Enter on a focused session fires the double-click hook (same behavior as double-click). This is part of the persistent panel design — since the detail is always visible, Enter no longer needs to toggle the panel.\n\nRelated: acd-bbm (click = focus), acd-4nd (scroll updates detail). Dispatch all three together.","status":"closed","priority":3,"issue_type":"feature","owner":"dev@pablolion.com","created_at":"2026-02-14T02:55:04.029331+01:00","created_by":"Pablo LION","updated_at":"2026-02-14T04:31:14.851565+01:00","closed_at":"2026-02-14T04:31:14.851565+01:00","close_reason":"Always-visible detail panel with focus-based updates. Enter fires hook, scroll/keyboard never trapped."}
