# Story: Ensure Client Module Remains Internal

**Story ID:** S003.06 **Epic:**
[E003 - IPC Protocol and Client](../epic/E003-ipc-protocol-and-client.md)
**Status:** Draft **Priority:** P3 **Estimated Points:** 1

## Description

As a maintainer, I want to ensure the client module is not accidentally exposed
as public API, so that external consumers use CLI commands instead of the Rust
library directly.

## Context

The `client` module (`src/client/`) provides internal connection functionality
for:

- TUI dashboard (`agent-console tui`)
- CLI commands (`agent-console set/list/subscribe`)

External tools (shell hooks, scripts) should use CLI commands rather than
importing the client module. This keeps the public API surface minimal and
allows internal refactoring without breaking external consumers.

## Acceptance Criteria

- [ ] `src/client/mod.rs` documents that the module is internal-only
- [ ] `src/lib.rs` does NOT export the client module
- [ ] CI/build check verifies client module is not in public API
- [ ] Documentation clarifies external tools should use CLI commands

## Implementation Details

### Technical Approach

1. Add compile-time or test-time check that `client` is not exported
2. Consider using `#[doc(hidden)]` if module needs to be `pub` for technical
   reasons but should not appear in docs

### Verification Method

Add a test or build script that:

```rust
// This should fail to compile if client module is accidentally made public
// In tests/api_surface.rs or similar
#[test]
fn client_module_not_public() {
    // Attempt to use agent_console::client should fail
    // This test documents the intentional design decision
}
```

Alternatively, use `cargo public-api` or similar tool in CI to detect API
changes.

### Files to Modify

- `src/lib.rs` - Ensure no `pub mod client` export
- `tests/api_surface.rs` - Add API surface verification test (new file)

### Dependencies

None - this is a quality/maintenance story.

## Notes

- The client module may need to be `pub(crate)` for internal use across modules
- External hook scripts use `agent-console set ...` CLI commands, not Rust API
- This decision was made during QC review of Epic 1
